<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 5 Tidyverse | Análises Ecológicas no R</title>
  <meta name="description" content="Capítulo 5 Tidyverse | Análises Ecológicas no R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 5 Tidyverse | Análises Ecológicas no R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 5 Tidyverse | Análises Ecológicas no R" />
  
  
  



<meta name="date" content="2022-02-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cap4.html"/>
<link rel="next" href="cap6.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Análises Ecológicas no R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Capa</a></li>
<li class="chapter" data-level="" data-path="prefácio.html"><a href="prefácio.html"><i class="fa fa-check"></i>Prefácio</a></li>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html"><i class="fa fa-check"></i>Sobre os autores</a></li>
<li class="chapter" data-level="" data-path="revisores-e-colaboradores.html"><a href="revisores-e-colaboradores.html"><i class="fa fa-check"></i>Revisores e colaboradores</a></li>
<li class="chapter" data-level="1" data-path="cap1.html"><a href="cap1.html"><i class="fa fa-check"></i><b>1</b> Introdução</a>
<ul>
<li class="chapter" data-level="1.1" data-path="cap1.html"><a href="cap1.html#histórico-deste-livro"><i class="fa fa-check"></i><b>1.1</b> Histórico deste livro</a></li>
<li class="chapter" data-level="1.2" data-path="cap1.html"><a href="cap1.html#objetivo-deste-livro"><i class="fa fa-check"></i><b>1.2</b> Objetivo deste livro</a></li>
<li class="chapter" data-level="1.3" data-path="cap1.html"><a href="cap1.html#o-que-você-não-encontrará-neste-livro"><i class="fa fa-check"></i><b>1.3</b> O que você não encontrará neste livro</a></li>
<li class="chapter" data-level="1.4" data-path="cap1.html"><a href="cap1.html#por-que-usar-o-r"><i class="fa fa-check"></i><b>1.4</b> Por que usar o R?</a></li>
<li class="chapter" data-level="1.5" data-path="cap1.html"><a href="cap1.html#indo-além-da-linguagem-de-progração-para-a-ecologia"><i class="fa fa-check"></i><b>1.5</b> Indo além da linguagem de progração para a Ecologia</a></li>
<li class="chapter" data-level="1.6" data-path="cap1.html"><a href="cap1.html#como-usar-este-livro"><i class="fa fa-check"></i><b>1.6</b> Como usar este livro</a></li>
<li class="chapter" data-level="1.7" data-path="cap1.html"><a href="cap1.html#como-ensinar-e-aprender-com-esse-livro"><i class="fa fa-check"></i><b>1.7</b> Como ensinar e aprender com esse livro</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="cap1.html"><a href="cap1.html#em-laboratórios-ou-grupos-de-pesquisa"><i class="fa fa-check"></i><b>1.7.1</b> Em laboratórios ou grupos de pesquisa</a></li>
<li class="chapter" data-level="1.7.2" data-path="cap1.html"><a href="cap1.html#em-disciplinas-da-graduação-ou-pós-graduação"><i class="fa fa-check"></i><b>1.7.2</b> Em disciplinas da graduação ou pós-graduação</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="cap2.html"><a href="cap2.html"><i class="fa fa-check"></i><b>2</b> Voltando ao básico: como dominar a arte de fazer perguntas cientificamente relevantes</a>
<ul>
<li class="chapter" data-level="2.1" data-path="cap2.html"><a href="cap2.html#introdução"><i class="fa fa-check"></i><b>2.1</b> Introdução</a></li>
<li class="chapter" data-level="2.2" data-path="cap2.html"><a href="cap2.html#perguntas-devem-preceder-as-análises-estatísticas"><i class="fa fa-check"></i><b>2.2</b> Perguntas devem preceder as análises estatísticas</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="cap2.html"><a href="cap2.html#um-bestiárioperguntas_ecologia-1-para-o-teste-de-hipóteses-você-está-fazendo-a-pergunta-certa"><i class="fa fa-check"></i><b>2.2.1</b> Um bestiário para o teste de hipóteses (Você está fazendo a pergunta certa?)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="cap2.html"><a href="cap2.html#fluxograma-conectando-variáveis-para-melhorar-o-desenho-experimental-e-as-análises-estatísticas"><i class="fa fa-check"></i><b>2.3</b> Fluxograma: Conectando variáveis para melhorar o desenho experimental e as análises estatísticas</a></li>
<li class="chapter" data-level="2.4" data-path="cap2.html"><a href="cap2.html#questões-fundamentais-em-etnobiologia-ecologia-e-conservação"><i class="fa fa-check"></i><b>2.4</b> Questões fundamentais em etnobiologia, ecologia e conservação</a></li>
<li class="chapter" data-level="2.5" data-path="cap2.html"><a href="cap2.html#considerações-finais"><i class="fa fa-check"></i><b>2.5</b> Considerações Finais</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="cap3.html"><a href="cap3.html"><i class="fa fa-check"></i><b>3</b> Pré-requisitos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="cap3.html"><a href="cap3.html#introdução-1"><i class="fa fa-check"></i><b>3.1</b> Introdução</a></li>
<li class="chapter" data-level="3.2" data-path="cap3.html"><a href="cap3.html#instalação-do-r"><i class="fa fa-check"></i><b>3.2</b> Instalação do R</a></li>
<li class="chapter" data-level="3.3" data-path="cap3.html"><a href="cap3.html#instalação-do-rstudio"><i class="fa fa-check"></i><b>3.3</b> Instalação do RStudio</a></li>
<li class="chapter" data-level="3.4" data-path="cap3.html"><a href="cap3.html#versão-do-r"><i class="fa fa-check"></i><b>3.4</b> Versão do R</a></li>
<li class="chapter" data-level="3.5" data-path="cap3.html"><a href="cap3.html#pacotes"><i class="fa fa-check"></i><b>3.5</b> Pacotes</a></li>
<li class="chapter" data-level="3.6" data-path="cap3.html"><a href="cap3.html#dados"><i class="fa fa-check"></i><b>3.6</b> Dados</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="cap4.html"><a href="cap4.html"><i class="fa fa-check"></i><b>4</b> Introdução ao R</a>
<ul>
<li class="chapter" data-level="" data-path="cap4.html"><a href="cap4.html#pré-requisitos-do-capítulo"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="4.1" data-path="cap4.html"><a href="cap4.html#contextualização"><i class="fa fa-check"></i><b>4.1</b> Contextualização</a></li>
<li class="chapter" data-level="4.2" data-path="cap4.html"><a href="cap4.html#r-e-rstudio"><i class="fa fa-check"></i><b>4.2</b> R e RStudio</a></li>
<li class="chapter" data-level="4.3" data-path="cap4.html"><a href="cap4.html#funcionamento-da-linguagem-r"><i class="fa fa-check"></i><b>4.3</b> Funcionamento da linguagem R</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="cap4.html"><a href="cap4.html#console"><i class="fa fa-check"></i><b>4.3.1</b> Console</a></li>
<li class="chapter" data-level="4.3.2" data-path="cap4.html"><a href="cap4.html#scripts"><i class="fa fa-check"></i><b>4.3.2</b> Scripts</a></li>
<li class="chapter" data-level="4.3.3" data-path="cap4.html"><a href="cap4.html#operadores"><i class="fa fa-check"></i><b>4.3.3</b> Operadores</a></li>
<li class="chapter" data-level="4.3.4" data-path="cap4.html"><a href="cap4.html#objetos"><i class="fa fa-check"></i><b>4.3.4</b> Objetos</a></li>
<li class="chapter" data-level="4.3.5" data-path="cap4.html"><a href="cap4.html#funções"><i class="fa fa-check"></i><b>4.3.5</b> Funções</a></li>
<li class="chapter" data-level="4.3.6" data-path="cap4.html"><a href="cap4.html#pacotes-1"><i class="fa fa-check"></i><b>4.3.6</b> Pacotes</a></li>
<li class="chapter" data-level="4.3.7" data-path="cap4.html"><a href="cap4.html#ajuda-help"><i class="fa fa-check"></i><b>4.3.7</b> Ajuda (<em>Help</em>)</a></li>
<li class="chapter" data-level="4.3.8" data-path="cap4.html"><a href="cap4.html#ambiente-environment"><i class="fa fa-check"></i><b>4.3.8</b> Ambiente (<em>Environment</em>)</a></li>
<li class="chapter" data-level="4.3.9" data-path="cap4.html"><a href="cap4.html#citações"><i class="fa fa-check"></i><b>4.3.9</b> Citações</a></li>
<li class="chapter" data-level="4.3.10" data-path="cap4.html"><a href="cap4.html#principais-erros-de-iniciantes"><i class="fa fa-check"></i><b>4.3.10</b> Principais erros de iniciantes</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="cap4.html"><a href="cap4.html#estrutura-e-manipulação-de-objetos"><i class="fa fa-check"></i><b>4.4</b> Estrutura e manipulação de objetos</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="cap4.html"><a href="cap4.html#atributo-dos-objetos"><i class="fa fa-check"></i><b>4.4.1</b> Atributo dos objetos</a></li>
<li class="chapter" data-level="4.4.2" data-path="cap4.html"><a href="cap4.html#manipulação-de-objetos-unidimensionais"><i class="fa fa-check"></i><b>4.4.2</b> Manipulação de objetos unidimensionais</a></li>
<li class="chapter" data-level="4.4.3" data-path="cap4.html"><a href="cap4.html#manipulação-de-objetos-multidimensionais"><i class="fa fa-check"></i><b>4.4.3</b> Manipulação de objetos multidimensionais</a></li>
<li class="chapter" data-level="4.4.4" data-path="cap4.html"><a href="cap4.html#valores-faltantes-e-especiais"><i class="fa fa-check"></i><b>4.4.4</b> Valores faltantes e especiais</a></li>
<li class="chapter" data-level="4.4.5" data-path="cap4.html"><a href="cap4.html#diretório-de-trabalho"><i class="fa fa-check"></i><b>4.4.5</b> Diretório de trabalho</a></li>
<li class="chapter" data-level="4.4.6" data-path="cap4.html"><a href="cap4.html#importar-dados"><i class="fa fa-check"></i><b>4.4.6</b> Importar dados</a></li>
<li class="chapter" data-level="4.4.7" data-path="cap4.html"><a href="cap4.html#conferência-dos-dados-importados"><i class="fa fa-check"></i><b>4.4.7</b> Conferência dos dados importados</a></li>
<li class="chapter" data-level="4.4.8" data-path="cap4.html"><a href="cap4.html#exportar-dados"><i class="fa fa-check"></i><b>4.4.8</b> Exportar dados</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="cap4.html"><a href="cap4.html#exercícios"><i class="fa fa-check"></i><b>4.5</b> Exercícios</a></li>
<li class="chapter" data-level="4.6" data-path="cap4.html"><a href="cap4.html#para-se-aprofundar"><i class="fa fa-check"></i><b>4.6</b> Para se aprofundar</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="cap4.html"><a href="cap4.html#livros"><i class="fa fa-check"></i><b>4.6.1</b> Livros</a></li>
<li class="chapter" data-level="4.6.2" data-path="cap4.html"><a href="cap4.html#links"><i class="fa fa-check"></i><b>4.6.2</b> Links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="cap5.html"><a href="cap5.html"><i class="fa fa-check"></i><b>5</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="" data-path="cap5.html"><a href="cap5.html#pré-requisitos-do-capítulo-1"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="5.1" data-path="cap5.html"><a href="cap5.html#contextualização-1"><i class="fa fa-check"></i><b>5.1</b> Contextualização</a></li>
<li class="chapter" data-level="5.2" data-path="cap5.html"><a href="cap5.html#tidyverse"><i class="fa fa-check"></i><b>5.2</b> <em>tidyverse</em></a></li>
<li class="chapter" data-level="5.3" data-path="cap5.html"><a href="cap5.html#here"><i class="fa fa-check"></i><b>5.3</b> here</a></li>
<li class="chapter" data-level="5.4" data-path="cap5.html"><a href="cap5.html#readr-readxl-e-writexl"><i class="fa fa-check"></i><b>5.4</b> readr, readxl e writexl</a></li>
<li class="chapter" data-level="5.5" data-path="cap5.html"><a href="cap5.html#tibble"><i class="fa fa-check"></i><b>5.5</b> tibble</a></li>
<li class="chapter" data-level="5.6" data-path="cap5.html"><a href="cap5.html#magrittr-pipe--"><i class="fa fa-check"></i><b>5.6</b> magrittr (pipe - %&gt;%)</a></li>
<li class="chapter" data-level="5.7" data-path="cap5.html"><a href="cap5.html#tidyr"><i class="fa fa-check"></i><b>5.7</b> tidyr</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="cap5.html"><a href="cap5.html#palmerpenguins"><i class="fa fa-check"></i><b>5.7.1</b> palmerpenguins</a></li>
<li class="chapter" data-level="5.7.2" data-path="cap5.html"><a href="cap5.html#glimpse"><i class="fa fa-check"></i><b>5.7.2</b> glimpse()</a></li>
<li class="chapter" data-level="5.7.3" data-path="cap5.html"><a href="cap5.html#unite"><i class="fa fa-check"></i><b>5.7.3</b> unite()</a></li>
<li class="chapter" data-level="5.7.4" data-path="cap5.html"><a href="cap5.html#separate"><i class="fa fa-check"></i><b>5.7.4</b> separate()</a></li>
<li class="chapter" data-level="5.7.5" data-path="cap5.html"><a href="cap5.html#drop_na-e-replace_na"><i class="fa fa-check"></i><b>5.7.5</b> drop_na() e replace_na()</a></li>
<li class="chapter" data-level="5.7.6" data-path="cap5.html"><a href="cap5.html#pivot_longer-e-pivot_wider"><i class="fa fa-check"></i><b>5.7.6</b> pivot_longer() e pivot_wider()</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="cap5.html"><a href="cap5.html#dplyr"><i class="fa fa-check"></i><b>5.8</b> dplyr</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="cap5.html"><a href="cap5.html#gramática"><i class="fa fa-check"></i><b>5.8.1</b> Gramática</a></li>
<li class="chapter" data-level="5.8.2" data-path="cap5.html"><a href="cap5.html#sintaxe"><i class="fa fa-check"></i><b>5.8.2</b> Sintaxe</a></li>
<li class="chapter" data-level="5.8.3" data-path="cap5.html"><a href="cap5.html#palmerpenguins-1"><i class="fa fa-check"></i><b>5.8.3</b> palmerpenguins</a></li>
<li class="chapter" data-level="5.8.4" data-path="cap5.html"><a href="cap5.html#relocate"><i class="fa fa-check"></i><b>5.8.4</b> relocate()</a></li>
<li class="chapter" data-level="5.8.5" data-path="cap5.html"><a href="cap5.html#rename"><i class="fa fa-check"></i><b>5.8.5</b> rename()</a></li>
<li class="chapter" data-level="5.8.6" data-path="cap5.html"><a href="cap5.html#select"><i class="fa fa-check"></i><b>5.8.6</b> select()</a></li>
<li class="chapter" data-level="5.8.7" data-path="cap5.html"><a href="cap5.html#pull"><i class="fa fa-check"></i><b>5.8.7</b> pull()</a></li>
<li class="chapter" data-level="5.8.8" data-path="cap5.html"><a href="cap5.html#mutate"><i class="fa fa-check"></i><b>5.8.8</b> mutate()</a></li>
<li class="chapter" data-level="5.8.9" data-path="cap5.html"><a href="cap5.html#arrange"><i class="fa fa-check"></i><b>5.8.9</b> arrange()</a></li>
<li class="chapter" data-level="5.8.10" data-path="cap5.html"><a href="cap5.html#filter"><i class="fa fa-check"></i><b>5.8.10</b> filter()</a></li>
<li class="chapter" data-level="5.8.11" data-path="cap5.html"><a href="cap5.html#slice"><i class="fa fa-check"></i><b>5.8.11</b> slice()</a></li>
<li class="chapter" data-level="5.8.12" data-path="cap5.html"><a href="cap5.html#distinct"><i class="fa fa-check"></i><b>5.8.12</b> distinct()</a></li>
<li class="chapter" data-level="5.8.13" data-path="cap5.html"><a href="cap5.html#count"><i class="fa fa-check"></i><b>5.8.13</b> count()</a></li>
<li class="chapter" data-level="5.8.14" data-path="cap5.html"><a href="cap5.html#group_by"><i class="fa fa-check"></i><b>5.8.14</b> group_by()</a></li>
<li class="chapter" data-level="5.8.15" data-path="cap5.html"><a href="cap5.html#summarise"><i class="fa fa-check"></i><b>5.8.15</b> summarise()</a></li>
<li class="chapter" data-level="5.8.16" data-path="cap5.html"><a href="cap5.html#bind_rows-e-bind_cols"><i class="fa fa-check"></i><b>5.8.16</b> bind_rows() e bind_cols()</a></li>
<li class="chapter" data-level="5.8.17" data-path="cap5.html"><a href="cap5.html#join"><i class="fa fa-check"></i><b>5.8.17</b> *_join()</a></li>
<li class="chapter" data-level="5.8.18" data-path="cap5.html"><a href="cap5.html#operações-de-conjuntos-e-comparação-de-dados"><i class="fa fa-check"></i><b>5.8.18</b> Operações de conjuntos e comparação de dados</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="cap5.html"><a href="cap5.html#stringr"><i class="fa fa-check"></i><b>5.9</b> stringr</a></li>
<li class="chapter" data-level="5.10" data-path="cap5.html"><a href="cap5.html#forcats"><i class="fa fa-check"></i><b>5.10</b> forcats</a></li>
<li class="chapter" data-level="5.11" data-path="cap5.html"><a href="cap5.html#lubridate"><i class="fa fa-check"></i><b>5.11</b> lubridate</a></li>
<li class="chapter" data-level="5.12" data-path="cap5.html"><a href="cap5.html#purrr"><i class="fa fa-check"></i><b>5.12</b> purrr</a></li>
<li class="chapter" data-level="5.13" data-path="cap5.html"><a href="cap5.html#exercícios-1"><i class="fa fa-check"></i><b>5.13</b> Exercícios</a></li>
<li class="chapter" data-level="5.14" data-path="cap5.html"><a href="cap5.html#para-se-aprofundar-1"><i class="fa fa-check"></i><b>5.14</b> Para se aprofundar</a>
<ul>
<li class="chapter" data-level="5.14.1" data-path="cap5.html"><a href="cap5.html#livros-1"><i class="fa fa-check"></i><b>5.14.1</b> Livros</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="cap6.html"><a href="cap6.html"><i class="fa fa-check"></i><b>6</b> Visualização de dados</a>
<ul>
<li class="chapter" data-level="" data-path="cap6.html"><a href="cap6.html#pré-requisitos-do-capítulo-2"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="6.1" data-path="cap6.html"><a href="cap6.html#contextualização-2"><i class="fa fa-check"></i><b>6.1</b> Contextualização</a></li>
<li class="chapter" data-level="6.2" data-path="cap6.html"><a href="cap6.html#principais-pacotes"><i class="fa fa-check"></i><b>6.2</b> Principais pacotes</a></li>
<li class="chapter" data-level="6.3" data-path="cap6.html"><a href="cap6.html#grámatica-dos-gráficos"><i class="fa fa-check"></i><b>6.3</b> Grámatica dos gráficos</a></li>
<li class="chapter" data-level="6.4" data-path="cap6.html"><a href="cap6.html#tipos-de-gráficos"><i class="fa fa-check"></i><b>6.4</b> Tipos de gráficos</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="cap6.html"><a href="cap6.html#histograma-histogram"><i class="fa fa-check"></i><b>6.4.1</b> Histograma (<em>histogram</em>)</a></li>
<li class="chapter" data-level="6.4.2" data-path="cap6.html"><a href="cap6.html#gráfico-de-densidade-density-plot"><i class="fa fa-check"></i><b>6.4.2</b> Gráfico de densidade (<em>density plot</em>)</a></li>
<li class="chapter" data-level="6.4.3" data-path="cap6.html"><a href="cap6.html#diagrama-de-pontos-dot-plot"><i class="fa fa-check"></i><b>6.4.3</b> Diagrama de pontos (<em>dot plot</em>)</a></li>
<li class="chapter" data-level="6.4.4" data-path="cap6.html"><a href="cap6.html#gráfico-de-barras-bar-plot"><i class="fa fa-check"></i><b>6.4.4</b> Gráfico de barras (<em>bar plot</em>)</a></li>
<li class="chapter" data-level="6.4.5" data-path="cap6.html"><a href="cap6.html#gráfico-de-setores-pie-chart-e-donut-chart"><i class="fa fa-check"></i><b>6.4.5</b> Gráfico de setores (<em>pie chart</em> e <em>donut chart</em>)</a></li>
<li class="chapter" data-level="6.4.6" data-path="cap6.html"><a href="cap6.html#gráfico-de-caixa-boxplot"><i class="fa fa-check"></i><b>6.4.6</b> Gráfico de caixa (<em>boxplot</em>)</a></li>
<li class="chapter" data-level="6.4.7" data-path="cap6.html"><a href="cap6.html#gráfico-de-dispersão-scatter-plot"><i class="fa fa-check"></i><b>6.4.7</b> Gráfico de dispersão (<em>scatter plot</em>)</a></li>
<li class="chapter" data-level="6.4.8" data-path="cap6.html"><a href="cap6.html#visualização-de-múltiplos-gráficos-pareados"><i class="fa fa-check"></i><b>6.4.8</b> Visualização de múltiplos gráficos pareados</a></li>
<li class="chapter" data-level="6.4.9" data-path="cap6.html"><a href="cap6.html#erros-comuns-dos-usuários-do-ggplot2-e-como-evitá-los"><i class="fa fa-check"></i><b>6.4.9</b> Erros comuns dos usuários do <code>ggplot2</code> e como evitá-los</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="cap6.html"><a href="cap6.html#finalização-de-gráficos-para-publicação"><i class="fa fa-check"></i><b>6.5</b> Finalização de gráficos para publicação</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="cap6.html"><a href="cap6.html#posição-cores-e-fonte-da-legenda"><i class="fa fa-check"></i><b>6.5.1</b> Posição, cores e fonte da legenda</a></li>
<li class="chapter" data-level="6.5.2" data-path="cap6.html"><a href="cap6.html#elementos-gráficos-eixo-fonte-gride"><i class="fa fa-check"></i><b>6.5.2</b> Elementos gráficos: eixo, fonte, gride</a></li>
<li class="chapter" data-level="6.5.3" data-path="cap6.html"><a href="cap6.html#temas-personalizados-ggtheme"><i class="fa fa-check"></i><b>6.5.3</b> Temas personalizados <code>ggtheme()</code></a></li>
<li class="chapter" data-level="6.5.4" data-path="cap6.html"><a href="cap6.html#criando-seu-próprio-theme_custom"><i class="fa fa-check"></i><b>6.5.4</b> Criando seu próprio <code>theme_custom()</code></a></li>
<li class="chapter" data-level="6.5.5" data-path="cap6.html"><a href="cap6.html#exportando-dados-com-alta-qualidade-com-a-função-ggsave"><i class="fa fa-check"></i><b>6.5.5</b> Exportando dados com alta qualidade com a função <code>ggsave()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="cap6.html"><a href="cap6.html#para-se-aprofundar-2"><i class="fa fa-check"></i><b>6.6</b> Para se aprofundar</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="cap6.html"><a href="cap6.html#livros-2"><i class="fa fa-check"></i><b>6.6.1</b> Livros</a></li>
<li class="chapter" data-level="6.6.2" data-path="cap6.html"><a href="cap6.html#links-1"><i class="fa fa-check"></i><b>6.6.2</b> Links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="cap7.html"><a href="cap7.html"><i class="fa fa-check"></i><b>7</b> Modelos lineares</a>
<ul>
<li class="chapter" data-level="" data-path="cap7.html"><a href="cap7.html#pré-requisitos-do-capítulo-3"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="7.1" data-path="cap7.html"><a href="cap7.html#teste-t-de-student-para-duas-amostras-independentes"><i class="fa fa-check"></i><b>7.1</b> Teste T (de Student) para duas amostras independentes</a></li>
<li class="chapter" data-level="7.2" data-path="cap7.html"><a href="cap7.html#teste-t-para-amostras-pareadas"><i class="fa fa-check"></i><b>7.2</b> Teste T para amostras pareadas</a></li>
<li class="chapter" data-level="7.3" data-path="cap7.html"><a href="cap7.html#correlação-de-pearson"><i class="fa fa-check"></i><b>7.3</b> Correlação de Pearson</a></li>
<li class="chapter" data-level="7.4" data-path="cap7.html"><a href="cap7.html#regressão-linear-simples"><i class="fa fa-check"></i><b>7.4</b> Regressão Linear Simples</a></li>
<li class="chapter" data-level="7.5" data-path="cap7.html"><a href="cap7.html#regressão-linear-múltipla"><i class="fa fa-check"></i><b>7.5</b> Regressão Linear Múltipla</a></li>
<li class="chapter" data-level="7.6" data-path="cap7.html"><a href="cap7.html#análises-de-variância-anova"><i class="fa fa-check"></i><b>7.6</b> Análises de Variância (ANOVA)</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="cap7.html"><a href="cap7.html#anova-de-um-fator"><i class="fa fa-check"></i><b>7.6.1</b> ANOVA de um fator</a></li>
<li class="chapter" data-level="7.6.2" data-path="cap7.html"><a href="cap7.html#anova-com-dois-fatores-ou-anova-fatorial"><i class="fa fa-check"></i><b>7.6.2</b> ANOVA com dois fatores ou ANOVA fatorial</a></li>
<li class="chapter" data-level="7.6.3" data-path="cap7.html"><a href="cap7.html#anova-em-blocos-aleatorizados"><i class="fa fa-check"></i><b>7.6.3</b> ANOVA em blocos aleatorizados</a></li>
<li class="chapter" data-level="7.6.4" data-path="cap7.html"><a href="cap7.html#análise-de-covariância-ancova"><i class="fa fa-check"></i><b>7.6.4</b> Análise de covariância (ANCOVA)</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="cap7.html"><a href="cap7.html#generalized-least-squares-gls"><i class="fa fa-check"></i><b>7.7</b> Generalized Least Squares (GLS)</a></li>
<li class="chapter" data-level="7.8" data-path="cap7.html"><a href="cap7.html#para-se-aprofundar-3"><i class="fa fa-check"></i><b>7.8</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="cap8.html"><a href="cap8.html"><i class="fa fa-check"></i><b>8</b> Modelos Lineares Generalizados</a>
<ul>
<li class="chapter" data-level="" data-path="cap8.html"><a href="cap8.html#pré-requisitos-do-capítulo-4"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="8.1" data-path="cap8.html"><a href="cap8.html#introdução-2"><i class="fa fa-check"></i><b>8.1</b> Introdução</a></li>
<li class="chapter" data-level="8.2" data-path="cap8.html"><a href="cap8.html#como-um-glm-funciona"><i class="fa fa-check"></i><b>8.2</b> Como um GLM funciona?</a></li>
<li class="chapter" data-level="8.3" data-path="cap8.html"><a href="cap8.html#como-escolher-a-distribuição-correta-para-seus-dados"><i class="fa fa-check"></i><b>8.3</b> Como escolher a distribuição correta para seus dados?</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="cap8.html"><a href="cap8.html#para-dados-contínuos"><i class="fa fa-check"></i><b>8.3.1</b> Para dados contínuos</a></li>
<li class="chapter" data-level="8.3.2" data-path="cap8.html"><a href="cap8.html#para-dados-de-contagem"><i class="fa fa-check"></i><b>8.3.2</b> Para dados de contagem</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="cap8.html"><a href="cap8.html#dados-de-contagem-a-distribuição-de-poisson"><i class="fa fa-check"></i><b>8.4</b> Dados de contagem: a distribuição de Poisson</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="cap8.html"><a href="cap8.html#o-que-causa-a-overdispersion"><i class="fa fa-check"></i><b>8.4.1</b> O que causa a <em>overdispersion</em>?</a></li>
<li class="chapter" data-level="8.4.2" data-path="cap8.html"><a href="cap8.html#o-que-fazer-se-seu-modelo-tiver-overdispersion"><i class="fa fa-check"></i><b>8.4.2</b> O que fazer se seu modelo tiver <em>overdispersion</em>?</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="cap8.html"><a href="cap8.html#dados-de-contagem-modelos-quasi-likelihood"><i class="fa fa-check"></i><b>8.5</b> Dados de contagem: modelos quasi-likelihood</a></li>
<li class="chapter" data-level="8.6" data-path="cap8.html"><a href="cap8.html#dados-de-contagem-a-distribuição-binomial"><i class="fa fa-check"></i><b>8.6</b> Dados de contagem: a distribuição binomial</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="cap8.html"><a href="cap8.html#análise-com-dados-de-proporção"><i class="fa fa-check"></i><b>8.6.1</b> Análise com dados de proporção</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="cap8.html"><a href="cap8.html#análise-com-dados-de-incidência"><i class="fa fa-check"></i><b>8.7</b> Análise com dados de incidência</a></li>
<li class="chapter" data-level="8.8" data-path="cap8.html"><a href="cap8.html#dados-de-contagem-com-excesso-de-zeros"><i class="fa fa-check"></i><b>8.8</b> Dados de contagem com excesso de zeros</a></li>
<li class="chapter" data-level="8.9" data-path="cap8.html"><a href="cap8.html#dados-ordinais-os-modelos-cumulative-link"><i class="fa fa-check"></i><b>8.9</b> Dados ordinais: os modelos cumulative link</a></li>
<li class="chapter" data-level="8.10" data-path="cap8.html"><a href="cap8.html#dados-contínuos-distribuição-beta"><i class="fa fa-check"></i><b>8.10</b> Dados contínuos: distribuição beta</a></li>
<li class="chapter" data-level="8.11" data-path="cap8.html"><a href="cap8.html#para-se-aprofundar-4"><i class="fa fa-check"></i><b>8.11</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="cap9.html"><a href="cap9.html"><i class="fa fa-check"></i><b>9</b> Análises Multidimensionais</a>
<ul>
<li class="chapter" data-level="" data-path="cap9.html"><a href="cap9.html#pré-requisitos-do-capítulo-5"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="9.1" data-path="cap9.html"><a href="cap9.html#aspectos-teóricos"><i class="fa fa-check"></i><b>9.1</b> Aspectos teóricos</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="cap9.html"><a href="cap9.html#coeficientes-de-associação"><i class="fa fa-check"></i><b>9.1.1</b> Coeficientes de associação</a></li>
<li class="chapter" data-level="9.1.2" data-path="cap9.html"><a href="cap9.html#métricas-de-distância"><i class="fa fa-check"></i><b>9.1.2</b> Métricas de distância</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="cap9.html"><a href="cap9.html#análises-de-agrupamento"><i class="fa fa-check"></i><b>9.2</b> Análises de agrupamento</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="cap9.html"><a href="cap9.html#agrupamento-hierárquico"><i class="fa fa-check"></i><b>9.2.1</b> Agrupamento hierárquico</a></li>
<li class="chapter" data-level="9.2.2" data-path="cap9.html"><a href="cap9.html#agrupamento-não-hierárquico-k-means"><i class="fa fa-check"></i><b>9.2.2</b> Agrupamento não-hierárquico (<em>K-means</em>)</a></li>
<li class="chapter" data-level="9.2.3" data-path="cap9.html"><a href="cap9.html#espécies-indicadoras"><i class="fa fa-check"></i><b>9.2.3</b> Espécies indicadoras</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="cap9.html"><a href="cap9.html#análises-de-ordenação"><i class="fa fa-check"></i><b>9.3</b> Análises de Ordenação</a></li>
<li class="chapter" data-level="9.4" data-path="cap9.html"><a href="cap9.html#ordenação-irrestrira"><i class="fa fa-check"></i><b>9.4</b> Ordenação irrestrira</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="cap9.html"><a href="cap9.html#análise-de-componentes-principais-pca"><i class="fa fa-check"></i><b>9.4.1</b> Análise de Componentes Principais (PCA)</a></li>
<li class="chapter" data-level="9.4.2" data-path="cap9.html"><a href="cap9.html#análises-de-coordenadas-principais-pcoa"><i class="fa fa-check"></i><b>9.4.2</b> Análises de Coordenadas Principais (PCoA)</a></li>
<li class="chapter" data-level="9.4.3" data-path="cap9.html"><a href="cap9.html#regressão-de-componentes-principais-pcr"><i class="fa fa-check"></i><b>9.4.3</b> Regressão de Componentes Principais (PCR)</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="cap9.html"><a href="cap9.html#ordenação-restrita"><i class="fa fa-check"></i><b>9.5</b> Ordenação restrita</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="cap9.html"><a href="cap9.html#análise-de-redundância-rda"><i class="fa fa-check"></i><b>9.5.1</b> Análise de Redundância (RDA)</a></li>
<li class="chapter" data-level="9.5.2" data-path="cap9.html"><a href="cap9.html#análise-de-redundância-parcial-rdap"><i class="fa fa-check"></i><b>9.5.2</b> Análise de Redundância parcial (RDAp)</a></li>
<li class="chapter" data-level="9.5.3" data-path="cap9.html"><a href="cap9.html#análise-de-redundância-baseada-em-distância-db-rda"><i class="fa fa-check"></i><b>9.5.3</b> Análise de Redundância baseada em distância (db-RDA)</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="cap9.html"><a href="cap9.html#permanova"><i class="fa fa-check"></i><b>9.6</b> PERMANOVA</a></li>
<li class="chapter" data-level="9.7" data-path="cap9.html"><a href="cap9.html#mantel-e-mantel-parcial"><i class="fa fa-check"></i><b>9.7</b> Mantel e Mantel parcial</a></li>
<li class="chapter" data-level="9.8" data-path="cap9.html"><a href="cap9.html#mantel-espacial-com-modelo-nulo-restrito-considerando-autocorrelação-espacial"><i class="fa fa-check"></i><b>9.8</b> Mantel espacial com modelo nulo restrito considerando autocorrelação espacial</a></li>
<li class="chapter" data-level="9.9" data-path="cap9.html"><a href="cap9.html#procrustes-e-protest"><i class="fa fa-check"></i><b>9.9</b> PROCRUSTES e PROTEST</a></li>
<li class="chapter" data-level="9.10" data-path="cap9.html"><a href="cap9.html#métodos-multivariados-baseados-em-modelos"><i class="fa fa-check"></i><b>9.10</b> Métodos multivariados baseados em modelos</a></li>
<li class="chapter" data-level="9.11" data-path="cap9.html"><a href="cap9.html#para-se-aprofundar-5"><i class="fa fa-check"></i><b>9.11</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="cap10.html"><a href="cap10.html"><i class="fa fa-check"></i><b>10</b> Rarefação</a>
<ul>
<li class="chapter" data-level="" data-path="cap10.html"><a href="cap10.html#pré-requisitos-do-capítulo-6"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="10.1" data-path="cap10.html"><a href="cap10.html#aspectos-teóricos-1"><i class="fa fa-check"></i><b>10.1</b> Aspectos teóricos</a></li>
<li class="chapter" data-level="10.2" data-path="cap10.html"><a href="cap10.html#curva-de-rarefação-baseada-no-indivíduo-individual-based"><i class="fa fa-check"></i><b>10.2</b> Curva de rarefação baseada no indivíduo (<em>individual-based</em>)</a></li>
<li class="chapter" data-level="10.3" data-path="cap10.html"><a href="cap10.html#curva-de-rarefação-baseada-em-amostras-sample-based"><i class="fa fa-check"></i><b>10.3</b> Curva de rarefação baseada em amostras (<em>sample-based</em>)</a></li>
<li class="chapter" data-level="10.4" data-path="cap10.html"><a href="cap10.html#curva-de-rarefação-coverage-based"><i class="fa fa-check"></i><b>10.4</b> Curva de rarefação <em>coverage-based</em></a></li>
<li class="chapter" data-level="10.5" data-path="cap10.html"><a href="cap10.html#para-se-aprofundar-6"><i class="fa fa-check"></i><b>10.5</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="cap11.html"><a href="cap11.html"><i class="fa fa-check"></i><b>11</b> Estimadores de riqueza</a>
<ul>
<li class="chapter" data-level="" data-path="cap11.html"><a href="cap11.html#pré-requisitos-do-capítulo-7"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="11.1" data-path="cap11.html"><a href="cap11.html#aspectos-teóricos-2"><i class="fa fa-check"></i><b>11.1</b> Aspectos teóricos</a></li>
<li class="chapter" data-level="11.2" data-path="cap11.html"><a href="cap11.html#estimadores-baseados-na-abundância-das-espécies"><i class="fa fa-check"></i><b>11.2</b> Estimadores baseados na abundância das espécies</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="cap11.html"><a href="cap11.html#chao-1"><i class="fa fa-check"></i><b>11.2.1</b> CHAO 1</a></li>
<li class="chapter" data-level="11.2.2" data-path="cap11.html"><a href="cap11.html#ace---abundance-based-coverage-estimador"><i class="fa fa-check"></i><b>11.2.2</b> ACE - <em>Abundance-based Coverage Estimador</em></a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="cap11.html"><a href="cap11.html#estimadores-baseados-na-incidência-das-espécies"><i class="fa fa-check"></i><b>11.3</b> Estimadores baseados na incidência das espécies</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="cap11.html"><a href="cap11.html#chao-2"><i class="fa fa-check"></i><b>11.3.1</b> CHAO 2</a></li>
<li class="chapter" data-level="11.3.2" data-path="cap11.html"><a href="cap11.html#jackknife-1"><i class="fa fa-check"></i><b>11.3.2</b> JACKKNIFE 1</a></li>
<li class="chapter" data-level="11.3.3" data-path="cap11.html"><a href="cap11.html#jackknife-2"><i class="fa fa-check"></i><b>11.3.3</b> JACKKNIFE 2</a></li>
<li class="chapter" data-level="11.3.4" data-path="cap11.html"><a href="cap11.html#bootstrap"><i class="fa fa-check"></i><b>11.3.4</b> BOOTSTRAP</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="cap11.html"><a href="cap11.html#interpolação-e-extrapolação-baseadas-em-rarefação-usando-amostragens-de-incidência-ou-abundância"><i class="fa fa-check"></i><b>11.4</b> Interpolação e extrapolação baseadas em rarefação usando amostragens de incidência ou abundância</a></li>
<li class="chapter" data-level="11.5" data-path="cap11.html"><a href="cap11.html#para-se-aprofundar-7"><i class="fa fa-check"></i><b>11.5</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="cap12.html"><a href="cap12.html"><i class="fa fa-check"></i><b>12</b> Diversidade Taxonômica</a>
<ul>
<li class="chapter" data-level="" data-path="cap12.html"><a href="cap12.html#pré-requisitos-do-capítulo-8"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="12.1" data-path="cap12.html"><a href="cap12.html#aspectos-teóricos-3"><i class="fa fa-check"></i><b>12.1</b> Aspectos teóricos</a></li>
<li class="chapter" data-level="12.2" data-path="cap12.html"><a href="cap12.html#diversidade-alfa"><i class="fa fa-check"></i><b>12.2</b> Diversidade alfa</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="cap12.html"><a href="cap12.html#riqueza-de-espécies-ou-número-de-espécies"><i class="fa fa-check"></i><b>12.2.1</b> Riqueza de espécies ou número de espécies</a></li>
<li class="chapter" data-level="12.2.2" data-path="cap12.html"><a href="cap12.html#diversidade-de-espécies"><i class="fa fa-check"></i><b>12.2.2</b> Diversidade de espécies</a></li>
<li class="chapter" data-level="12.2.3" data-path="cap12.html"><a href="cap12.html#diagramas-de-whittaker-ou-curva-de-dominância"><i class="fa fa-check"></i><b>12.2.3</b> Diagramas de Whittaker ou Curva de Dominância</a></li>
<li class="chapter" data-level="12.2.4" data-path="cap12.html"><a href="cap12.html#curvas-de-distribuição-de-abundâncias"><i class="fa fa-check"></i><b>12.2.4</b> Curvas de distribuição de abundâncias</a></li>
<li class="chapter" data-level="12.2.5" data-path="cap12.html"><a href="cap12.html#números-de-hill-ou-série-de-hill"><i class="fa fa-check"></i><b>12.2.5</b> Números de Hill ou Série de Hill</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="cap12.html"><a href="cap12.html#diversidade-beta"><i class="fa fa-check"></i><b>12.3</b> Diversidade beta</a></li>
<li class="chapter" data-level="12.4" data-path="cap12.html"><a href="cap12.html#para-se-aprofundar-8"><i class="fa fa-check"></i><b>12.4</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="cap13.html"><a href="cap13.html"><i class="fa fa-check"></i><b>13</b> Diversidade Filogenética</a>
<ul>
<li class="chapter" data-level="" data-path="cap13.html"><a href="cap13.html#pré-requisitos-do-capítulo-9"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="13.1" data-path="cap13.html"><a href="cap13.html#aspectos-teóricos-4"><i class="fa fa-check"></i><b>13.1</b> Aspectos teóricos</a></li>
<li class="chapter" data-level="13.2" data-path="cap13.html"><a href="cap13.html#manipulação-de-filogenias"><i class="fa fa-check"></i><b>13.2</b> Manipulação de filogenias</a></li>
<li class="chapter" data-level="13.3" data-path="cap13.html"><a href="cap13.html#métricas-de-diversidade-alfa-filogenética"><i class="fa fa-check"></i><b>13.3</b> Métricas de diversidade alfa filogenética</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="cap13.html"><a href="cap13.html#riqueza-da-diversidade-alfa-filogenética"><i class="fa fa-check"></i><b>13.3.1</b> Riqueza da diversidade alfa filogenética</a></li>
<li class="chapter" data-level="13.3.2" data-path="cap13.html"><a href="cap13.html#divergência-da-diversidade-alfa-filogenética"><i class="fa fa-check"></i><b>13.3.2</b> Divergência da diversidade alfa filogenética</a></li>
<li class="chapter" data-level="13.3.3" data-path="cap13.html"><a href="cap13.html#regularidade-da-diversidade-alfa-filogenética"><i class="fa fa-check"></i><b>13.3.3</b> Regularidade da diversidade alfa filogenética</a></li>
<li class="chapter" data-level="13.3.4" data-path="cap13.html"><a href="cap13.html#correlação-entre-as-métricas-de-diversidade-alfa-filogenética"><i class="fa fa-check"></i><b>13.3.4</b> Correlação entre as métricas de diversidade alfa filogenética</a></li>
<li class="chapter" data-level="13.3.5" data-path="cap13.html"><a href="cap13.html#associação-entre-a-diversidade-alfa-filogenética-e-o-ambiente"><i class="fa fa-check"></i><b>13.3.5</b> Associação entre a diversidade alfa filogenética e o ambiente</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="cap13.html"><a href="cap13.html#métricas-de-diversidade-beta-filogenética"><i class="fa fa-check"></i><b>13.4</b> Métricas de diversidade beta filogenética</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="cap13.html"><a href="cap13.html#divergência-da-diversidade-beta-filogenética"><i class="fa fa-check"></i><b>13.4.1</b> Divergência da diversidade beta filogenética</a></li>
<li class="chapter" data-level="13.4.2" data-path="cap13.html"><a href="cap13.html#correlação-entre-as-métricas-de-diversidade-beta-filogenética"><i class="fa fa-check"></i><b>13.4.2</b> Correlação entre as métricas de diversidade beta filogenética</a></li>
<li class="chapter" data-level="13.4.3" data-path="cap13.html"><a href="cap13.html#associação-entre-a-divergência-da-diversidade-beta-filogenética-e-o-ambiente"><i class="fa fa-check"></i><b>13.4.3</b> Associação entre a divergência da diversidade beta filogenética e o ambiente</a></li>
<li class="chapter" data-level="13.4.4" data-path="cap13.html"><a href="cap13.html#riqueza-da-diversidade-beta-filogenética"><i class="fa fa-check"></i><b>13.4.4</b> Riqueza da diversidade beta filogenética</a></li>
<li class="chapter" data-level="13.4.5" data-path="cap13.html"><a href="cap13.html#correlação-entre-phylosor-e-unifrac"><i class="fa fa-check"></i><b>13.4.5</b> Correlação entre Phylosor e Unifrac</a></li>
<li class="chapter" data-level="13.4.6" data-path="cap13.html"><a href="cap13.html#associação-entre-a-riqueza-da-diversidade-beta-filogenética-e-o-ambiente"><i class="fa fa-check"></i><b>13.4.6</b> Associação entre a riqueza da diversidade beta filogenética e o ambiente</a></li>
<li class="chapter" data-level="13.4.7" data-path="cap13.html"><a href="cap13.html#partição-da-diversidade-beta-filogenética"><i class="fa fa-check"></i><b>13.4.7</b> Partição da diversidade beta filogenética</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="cap13.html"><a href="cap13.html#modelos-nulos"><i class="fa fa-check"></i><b>13.5</b> Modelos Nulos</a></li>
<li class="chapter" data-level="13.6" data-path="cap13.html"><a href="cap13.html#para-se-aprofundar-9"><i class="fa fa-check"></i><b>13.6</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="cap14.html"><a href="cap14.html"><i class="fa fa-check"></i><b>14</b> Diversidade Funcional</a>
<ul>
<li class="chapter" data-level="" data-path="cap14.html"><a href="cap14.html#pré-requisitos-do-capítulo-10"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="14.1" data-path="cap14.html"><a href="cap14.html#aspectos-teóricos-5"><i class="fa fa-check"></i><b>14.1</b> Aspectos teóricos</a></li>
<li class="chapter" data-level="14.2" data-path="cap14.html"><a href="cap14.html#definindo-a-dissimilaridade-entre-espécies"><i class="fa fa-check"></i><b>14.2</b> Definindo a dis(similaridade) entre espécies</a></li>
<li class="chapter" data-level="14.3" data-path="cap14.html"><a href="cap14.html#métricas-de-diversidade-funcional-alfa"><i class="fa fa-check"></i><b>14.3</b> Métricas de diversidade funcional (alfa)</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="cap14.html"><a href="cap14.html#riqueza-funcional"><i class="fa fa-check"></i><b>14.3.1</b> Riqueza funcional</a></li>
<li class="chapter" data-level="14.3.2" data-path="cap14.html"><a href="cap14.html#divergência-funcional"><i class="fa fa-check"></i><b>14.3.2</b> Divergência funcional</a></li>
<li class="chapter" data-level="14.3.3" data-path="cap14.html"><a href="cap14.html#regularidade-funcional"><i class="fa fa-check"></i><b>14.3.3</b> Regularidade funcional</a></li>
<li class="chapter" data-level="14.3.4" data-path="cap14.html"><a href="cap14.html#correlação-entre-as-métricas-de-diversidade-funcional-alfa"><i class="fa fa-check"></i><b>14.3.4</b> Correlação entre as métricas de diversidade funcional (alfa)</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="cap14.html"><a href="cap14.html#métricas-de-diversidade-funcional-beta"><i class="fa fa-check"></i><b>14.4</b> Métricas de diversidade funcional (beta)</a></li>
<li class="chapter" data-level="14.5" data-path="cap14.html"><a href="cap14.html#composição-funcional-community-wegihed-means---cwm"><i class="fa fa-check"></i><b>14.5</b> Composição Funcional (<em>Community Wegihed Means</em> - CWM)</a></li>
<li class="chapter" data-level="14.6" data-path="cap14.html"><a href="cap14.html#variação-intraspecífica"><i class="fa fa-check"></i><b>14.6</b> Variação Intraspecífica</a></li>
<li class="chapter" data-level="14.7" data-path="cap14.html"><a href="cap14.html#para-se-aprofundar-10"><i class="fa fa-check"></i><b>14.7</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="cap15.html"><a href="cap15.html"><i class="fa fa-check"></i><b>15</b> Dados geoespaciais no R</a>
<ul>
<li class="chapter" data-level="" data-path="cap15.html"><a href="cap15.html#pré-requisitos-do-capítulo-11"><i class="fa fa-check"></i>Pré-requisitos do capítulo</a></li>
<li class="chapter" data-level="15.1" data-path="cap15.html"><a href="cap15.html#contextualização-3"><i class="fa fa-check"></i><b>15.1</b> Contextualização</a></li>
<li class="chapter" data-level="15.2" data-path="cap15.html"><a href="cap15.html#vetor"><i class="fa fa-check"></i><b>15.2</b> Vetor</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="cap15.html"><a href="cap15.html#sf-principal-pacote-no-r-para-dados-vetoriais"><i class="fa fa-check"></i><b>15.2.1</b> sf: principal pacote no R para dados vetoriais</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="cap15.html"><a href="cap15.html#raster"><i class="fa fa-check"></i><b>15.3</b> Raster</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="cap15.html"><a href="cap15.html#raster-principal-pacote-no-r-para-dados-raster"><i class="fa fa-check"></i><b>15.3.1</b> raster: principal pacote no R para dados raster</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="cap15.html"><a href="cap15.html#sistema-de-referência-de-coordenadas-e-unidades"><i class="fa fa-check"></i><b>15.4</b> Sistema de Referência de Coordenadas e Unidades</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="cap15.html"><a href="cap15.html#sistema-de-coordenadas-geográficas"><i class="fa fa-check"></i><b>15.4.1</b> Sistema de Coordenadas Geográficas</a></li>
<li class="chapter" data-level="15.4.2" data-path="cap15.html"><a href="cap15.html#sistema-de-coordenadas-projetadas"><i class="fa fa-check"></i><b>15.4.2</b> Sistema de Coordenadas Projetadas</a></li>
<li class="chapter" data-level="15.4.3" data-path="cap15.html"><a href="cap15.html#datum"><i class="fa fa-check"></i><b>15.4.3</b> Datum</a></li>
<li class="chapter" data-level="15.4.4" data-path="cap15.html"><a href="cap15.html#sistema-de-referência-de-coordenadas-crs-no-r"><i class="fa fa-check"></i><b>15.4.4</b> Sistema de Referência de Coordenadas (CRS) no R</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="cap15.html"><a href="cap15.html#principais-fontes-de-dados-geoespaciais"><i class="fa fa-check"></i><b>15.5</b> Principais fontes de dados geoespaciais</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="cap15.html"><a href="cap15.html#vetor-1"><i class="fa fa-check"></i><b>15.5.1</b> Vetor</a></li>
<li class="chapter" data-level="15.5.2" data-path="cap15.html"><a href="cap15.html#raster-1"><i class="fa fa-check"></i><b>15.5.2</b> Raster</a></li>
<li class="chapter" data-level="15.5.3" data-path="cap15.html"><a href="cap15.html#pacotes-do-r"><i class="fa fa-check"></i><b>15.5.3</b> Pacotes do R</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="cap15.html"><a href="cap15.html#importar-e-exportar-dados-geoespaciais"><i class="fa fa-check"></i><b>15.6</b> Importar e exportar dados geoespaciais</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="cap15.html"><a href="cap15.html#principais-formatos-de-arquivos-geoespaciais"><i class="fa fa-check"></i><b>15.6.1</b> Principais formatos de arquivos geoespaciais</a></li>
<li class="chapter" data-level="15.6.2" data-path="cap15.html"><a href="cap15.html#importar-dados-1"><i class="fa fa-check"></i><b>15.6.2</b> Importar dados</a></li>
<li class="chapter" data-level="15.6.3" data-path="cap15.html"><a href="cap15.html#exportar-dados-1"><i class="fa fa-check"></i><b>15.6.3</b> Exportar dados</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="cap15.html"><a href="cap15.html#descrição-de-objetos-geoespaciais"><i class="fa fa-check"></i><b>15.7</b> Descrição de objetos geoespaciais</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="cap15.html"><a href="cap15.html#vetor-2"><i class="fa fa-check"></i><b>15.7.1</b> Vetor</a></li>
<li class="chapter" data-level="15.7.2" data-path="cap15.html"><a href="cap15.html#raster-2"><i class="fa fa-check"></i><b>15.7.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="cap15.html"><a href="cap15.html#reprojeção-de-dados-geoespaciais"><i class="fa fa-check"></i><b>15.8</b> Reprojeção de dados geoespaciais</a>
<ul>
<li class="chapter" data-level="15.8.1" data-path="cap15.html"><a href="cap15.html#vetor-3"><i class="fa fa-check"></i><b>15.8.1</b> Vetor</a></li>
<li class="chapter" data-level="15.8.2" data-path="cap15.html"><a href="cap15.html#raster-3"><i class="fa fa-check"></i><b>15.8.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.9" data-path="cap15.html"><a href="cap15.html#principais-operações-com-dados-geoespaciais"><i class="fa fa-check"></i><b>15.9</b> Principais operações com dados geoespaciais</a>
<ul>
<li class="chapter" data-level="15.9.1" data-path="cap15.html"><a href="cap15.html#operações-de-atributos"><i class="fa fa-check"></i><b>15.9.1</b> Operações de atributos</a></li>
<li class="chapter" data-level="15.9.2" data-path="cap15.html"><a href="cap15.html#operações-espaciais"><i class="fa fa-check"></i><b>15.9.2</b> Operações espaciais</a></li>
<li class="chapter" data-level="15.9.3" data-path="cap15.html"><a href="cap15.html#operações-geométricas"><i class="fa fa-check"></i><b>15.9.3</b> Operações geométricas</a></li>
</ul></li>
<li class="chapter" data-level="15.10" data-path="cap15.html"><a href="cap15.html#visualização-de-dados-geoespaciais"><i class="fa fa-check"></i><b>15.10</b> Visualização de dados geoespaciais</a>
<ul>
<li class="chapter" data-level="15.10.1" data-path="cap15.html"><a href="cap15.html#principais-elementos-de-um-mapa"><i class="fa fa-check"></i><b>15.10.1</b> Principais elementos de um mapa</a></li>
<li class="chapter" data-level="15.10.2" data-path="cap15.html"><a href="cap15.html#principais-pacotes-para-a-composição-de-mapas"><i class="fa fa-check"></i><b>15.10.2</b> Principais pacotes para a composição de mapas</a></li>
<li class="chapter" data-level="15.10.3" data-path="cap15.html"><a href="cap15.html#mapas-estáticos"><i class="fa fa-check"></i><b>15.10.3</b> Mapas estáticos</a></li>
<li class="chapter" data-level="15.10.4" data-path="cap15.html"><a href="cap15.html#mapas-animados"><i class="fa fa-check"></i><b>15.10.4</b> Mapas animados</a></li>
<li class="chapter" data-level="15.10.5" data-path="cap15.html"><a href="cap15.html#mapas-interativos"><i class="fa fa-check"></i><b>15.10.5</b> Mapas interativos</a></li>
</ul></li>
<li class="chapter" data-level="15.11" data-path="cap15.html"><a href="cap15.html#exemplos-de-aplicações-de-análises-geoespaciais-para-dados-ecológicos"><i class="fa fa-check"></i><b>15.11</b> Exemplos de aplicações de análises geoespaciais para dados ecológicos</a>
<ul>
<li class="chapter" data-level="15.11.1" data-path="cap15.html"><a href="cap15.html#resumir-informações-de-biodiversidade-para-unidades-espaciais"><i class="fa fa-check"></i><b>15.11.1</b> Resumir informações de biodiversidade para unidades espaciais</a></li>
<li class="chapter" data-level="15.11.2" data-path="cap15.html"><a href="cap15.html#extrair-dados-raster-para-pontos"><i class="fa fa-check"></i><b>15.11.2</b> Extrair dados raster para pontos</a></li>
<li class="chapter" data-level="15.11.3" data-path="cap15.html"><a href="cap15.html#resumir-dados-de-rasters-para-buffers"><i class="fa fa-check"></i><b>15.11.3</b> Resumir dados de rasters para buffers</a></li>
<li class="chapter" data-level="15.11.4" data-path="cap15.html"><a href="cap15.html#predições-espaciais-de-objetos-raster"><i class="fa fa-check"></i><b>15.11.4</b> Predições espaciais de objetos raster</a></li>
</ul></li>
<li class="chapter" data-level="15.12" data-path="cap15.html"><a href="cap15.html#para-se-aprofundar-11"><i class="fa fa-check"></i><b>15.12</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referências.html"><a href="referências.html"><i class="fa fa-check"></i>Referências</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Análises Ecológicas no R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cap5" class="section level1" number="5">
<h1><span class="header-section-number">Capítulo 5</span> Tidyverse</h1>
<div id="pré-requisitos-do-capítulo-1" class="section level2 unnumbered">
<h2>Pré-requisitos do capítulo</h2>
<p>Pacotes e dados que serão utilizados nesse capítulo.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="cap5.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Pacotes</span></span>
<span id="cb90-2"><a href="cap5.html#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb90-3"><a href="cap5.html#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb90-4"><a href="cap5.html#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb90-5"><a href="cap5.html#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb90-6"><a href="cap5.html#cb90-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb90-7"><a href="cap5.html#cb90-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb90-8"><a href="cap5.html#cb90-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb90-9"><a href="cap5.html#cb90-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb90-10"><a href="cap5.html#cb90-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb90-11"><a href="cap5.html#cb90-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb90-12"><a href="cap5.html#cb90-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb90-13"><a href="cap5.html#cb90-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb90-14"><a href="cap5.html#cb90-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-15"><a href="cap5.html#cb90-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Dados</span></span>
<span id="cb90-16"><a href="cap5.html#cb90-16" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins</span>
<span id="cb90-17"><a href="cap5.html#cb90-17" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins_raw</span>
<span id="cb90-18"><a href="cap5.html#cb90-18" aria-hidden="true" tabindex="-1"></a>tidy_anfibios_locais <span class="ot">&lt;-</span> ecodados<span class="sc">::</span>tidy_anfibios_locais</span></code></pre></div>
</div>
<div id="contextualização-1" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Contextualização</h2>
<p>Como todo idioma, a linguagem R vem passando por transformações nos últimos anos. Grande parte dessas mudanças estão dentro do paradigma de Ciência de Dados (<em>Data Science</em>), uma nova área de conhecimento que vem se moldando a partir do desenvolvimento da sociedade em torno da era digital e da grande quantidade de dados gerados e disponíveis pela internet, de onde advém os pilares das inovações tecnológicas: <em>Big Data</em>, <em>Machine Learning</em> e <em>Internet of Things</em>. A grande necessidade de computação para desenvolver esse novo paradigma colocaram o <a href="https://www.r-project.org/">R</a> e o <a href="https://www.python.org/">python</a> como as principais linguagens de programação frente a esses novos desafios. Apesar de não serem as únicas ferramentas utilizadas para esse propósito, elas rapidamente se tornaram uma das melhores escolhas, dado vários fatores como: ser de código-aberto e gratuitas, possuír grandes comunidades contribuidoras, ser linguagens de interpretação (orientadas a objeto) e relativamente fáceis de serem aprendidas e aplicadas.</p>
<p>Essas mudanças e expanções na utilização da linguagem R para a Ciência de Dados começaram a ser implementadas principalmente devido a um pesquisador: <a href="http://hadley.nz/">Hadley Wickham</a>, que iniciou sua contribuição à comunidade R com o desenvolvimento do já consagrado pacote <code>ggplot2</code> <span class="citation">(<a href="#ref-wickham2016" role="doc-biblioref">Wickham, 2016</a>)</span> para a composição de gráficos no R (ver mais no Capítulo <a href="cap6.html#cap6">6</a>), baseado na gramática de gráficos <span class="citation">(<a href="#ref-wilkinson2005" role="doc-biblioref">Wilkinson &amp; Wills, 2005</a>)</span>. Depois disso, Wickham dedicou-se ao desenvolvimento do pensamento de uma nova abordagem dentro da manipulação de dados, denominada <strong>Tidy Data</strong> (Dados organizados) <span class="citation">(<a href="#ref-wickham2014" role="doc-biblioref">Wickham, 2014</a>)</span>, na qual focou na limpeza e organização dos mesmos. A ideia postula que dados estão <code>tidy</code> quando: i) variáveis estão nas colunas, ii) observações estão nas linhas e iii) valores estão nas células, sendo que para esse último, não deve haver mais de um valor por célula (Figura <a href="cap5.html#fig:fig-r-dados-tidy">5.2</a>).</p>
<p>A partir dessas ideias, o <a href="https://www.tidyverse.org/"><em>tidyverse</em></a> foi operacionalizado no R como uma coleção de pacotes que atuam no fluxo de trabalho comum da ciência de dados: importação, manipulação, exploração, visualização, análise e comunicação de dados e análises <span class="citation">(<a href="#ref-tidyverse2019" role="doc-biblioref">Wickham et al., 2019</a>)</span> (Figura <a href="cap5.html#fig:fig-r-tidyverse">5.1</a>). O principal objetivo do <em>tidyverse</em> é aproximar a linguagem para melhorar a interação entre ser humano e computador sobre dados, de modo que os pacotes compartilham uma filosofia de design de alto nível e gramática, além da estrutura de dados de baixo nível <span class="citation">(<a href="#ref-tidyverse2019" role="doc-biblioref">Wickham et al., 2019</a>)</span>. As principais leituras sobre o tema no R são os artigos “Tidy Data” <span class="citation">(<a href="#ref-wickham2014" role="doc-biblioref">Wickham, 2014</a>)</span> e “Welcome to the Tidyverse” <span class="citation">(<a href="#ref-tidyverse2019" role="doc-biblioref">Wickham et al., 2019</a>)</span>, e o livro <a href="https://r4ds.had.co.nz/">“R for Data Science”</a> <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">Wickham &amp; Grolemund, 2017</a>)</span>, além do <a href="https://www.tidyverse.org/">Tidyverse</a> que possui muito mais informações.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-r-tidyverse"></span>
<img src="img/cap05_fig01.png" alt="Modelo das ferramentas necessárias em um projeto típico de ciência de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto à essas ferramentas está a programação. Adaptado de: Wickham &amp; Grolemund [-@wickham2017]." width="100%" height="100%" />
<p class="caption">
Figura 5.1: Modelo das ferramentas necessárias em um projeto típico de ciência de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto à essas ferramentas está a programação. Adaptado de: Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.
</p>
</div>
</div>
<div id="tidyverse" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> <em>tidyverse</em></h2>
<p>Uma vez instalado e carregado, o pacote <code>tidyverse</code> disponibiliza um conjunto de ferramentas através de vários pacotes. Esses pacotes compartilham uma filosofia de design, gramática e estruturas. Podemos entender o <em>tidyverse</em> como um “dialeto novo” para a linguagem R, onde <em>tidy</em> quer dizer organizado, arrumado, ordenado, e <em>verse</em> é universo. A seguir, listamos os principais pacotes e suas funcionalidades.</p>
<ul>
<li><a href="https://readr.tidyverse.org/"><code>readr</code></a>: importa dados tabulares (e.g. <code>.csv</code> e <code>.txt</code>)</li>
<li><a href="https://tibble.tidyverse.org/"><code>tibble</code></a>: implementa a classe <code>tibble</code></li>
<li><a href="https://tidyr.tidyverse.org/"><code>tidyr</code></a>: transformação de dados para <code>tidy</code></li>
<li><a href="https://dplyr.tidyverse.org/"><code>dplyr</code></a>: manipulação de dados</li>
<li><a href="https://github.com/tidyverse/stringr"><code>stringr</code></a>: manipulação de caracteres</li>
<li><a href="https://github.com/hadley/forcats"><code>forcats</code></a>: manipulação de fatores</li>
<li><a href="https://ggplot2.tidyverse.org/"><code>ggplot2</code></a>: possibilita a visualização de dados</li>
<li><a href="https://purrr.tidyverse.org/"><code>purrr</code></a>: disponibiliza ferramentas para programação funcional</li>
</ul>
<p>Além dos pacotes principais, fazemos também menção a outros pacotes que estão dentro dessa abordagem e que trataremos ainda neste capítulo, em outro momento do livro, ou que você leitor(a) deve se familiarizar. Alguns pacotes compõem o tidyverse outros são mais gerais, entretanto, todos estão envolvidos de alguma forma com ciência de dados.</p>
<ul>
<li><a href="https://readxl.tidyverse.org/"><code>readxl</code></a> e <a href="https://cran.r-project.org/package=writexl"><code>writexl</code></a>: importa e exporta dados tabulares (.xlsx)</li>
<li><a href="http://sfirke.github.io/janitor/"><code>janitor</code></a>: examinar e limpar dados sujos</li>
<li><a href="https://github.com/rstats-db/DBI"><code>DBI</code></a>: interface de banco de dados R</li>
<li><a href="https://github.com/tidyverse/haven"><code>haven</code></a>: importa e exporta dados do SPSS, Stata e SAS</li>
<li><a href="https://github.com/r-lib/httr"><code>httr</code></a>: ferramentas para trabalhar com URLs e HTTP</li>
<li><a href="https://github.com/tidyverse/rvest"><code>rvest</code></a>: coletar facilmente (raspe) páginas da web</li>
<li><a href="https://github.com/r-lib/xml2"><code>xml2</code></a>: trabalhar com arquivos XML</li>
<li><a href="https://github.com/jeroen/jsonlite"><code>jsonlite</code></a>: um analisador e gerador JSON simples e robusto para R</li>
<li><a href="https://github.com/rstats-db/hms"><code>hms</code></a>: hora do dia</li>
<li><a href="https://github.com/tidyverse/lubridate"><code>lubridate</code></a>: facilita o tratamento de datas</li>
<li><a href="https://magrittr.tidyverse.org/"><code>magrittr</code></a>: provê os operadores pipe (<code>%&gt;%</code>, <code>%$%</code>, <code>%&lt;&gt;%</code>)</li>
<li><a href="https://github.com/tidyverse/glue"><code>glue</code></a>: facilita combinar dados e caracteres</li>
<li><a href="https://rmarkdown.rstudio.com/"><code>rmarkdown</code></a>: cria documentos de análise dinâmica que combinam código, saída renderizada (como figuras) e texto</li>
<li><a href="https://yihui.org/knitr/"><code>knitr</code></a>: projetado para ser um mecanismo transparente para geração de relatórios dinâmicos com R</li>
<li><a href="https://shiny.rstudio.com/"><code>shiny</code></a>: framework de aplicativo Web para R</li>
<li><a href="https://rmarkdown.rstudio.com/flexdashboard/"><code>flexdashboard</code></a>: painéis interativos para R</li>
<li><a href="https://here.r-lib.org/"><code>here</code></a>: facilita a definição de diretórios</li>
<li><a href="https://usethis.r-lib.org/"><code>usethis</code></a>: automatiza tarefas durante a configuração e desenvolvimento de projetos (Git, ‘GitHub’ e Projetos RStudio)</li>
<li><a href="https://rdatatable.gitlab.io/data.table/"><code>data.table</code></a>: pacote que fornece uma versão de alto desempenho do <code>data.frame</code> (importar, manipular e expotar)</li>
<li><a href="https://rstudio.github.io/reticulate/"><code>reticulate</code></a>: pacote que fornece ferramentas para integrar Python e R</li>
<li><a href="https://spark.rstudio.com/"><code>sparklyr</code></a>: interface R para Apache Spark</li>
<li><a href="https://github.com/tidymodels/broom"><code>broom</code></a>: converte objetos estatísticos em tibbles organizados</li>
<li><a href="https://github.com/tidyverse/modelr"><code>modelr</code></a>: funções de modelagem que funcionam com o pipe</li>
<li><a href="https://www.tidymodels.org/"><code>tidymodels</code></a>: coleção de pacotes para modelagem e aprendizado de máquina usando os princípios do tidyverse</li>
</ul>
<p>Destacamos a grande expansão e aplicabilidade dos pacotes <a href="https://rmarkdown.rstudio.com/">rmarkdown</a>, <a href="https://yihui.org/knitr/">knitr</a> e <a href="https://bookdown.org/">bookdown</a>, que permitiram a escrita desse livro usando essas ferramentas e linguagem de marcação, chamada <a href="https://daringfireball.net/projects/markdown/">Markdown</a>.</p>
<p>Para instalar os principais pacotes que integram o <em>tidyverse</em> podemos instalar o pacote <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="cap5.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Instalar o pacote tidyverse</span></span>
<span id="cb91-2"><a href="cap5.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Quando carregamos o pacote <code>tidyverse</code> podemos notar uma mensagem indicando quais pacotes foram carregados, suas respectivas versões e os conflitos com outros pacotes.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="cap5.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Carregar o pacote tidyverse</span></span>
<span id="cb92-2"><a href="cap5.html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Podemos ainda listar todos os pacotes do <em>tidyverse</em> com a função <code>tidyverse::tidyverse_packages()</code>.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="cap5.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Listar todos os pacotes do tidyverse </span></span>
<span id="cb93-2"><a href="cap5.html#cb93-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_packages</span>()</span>
<span id="cb93-3"><a href="cap5.html#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;broom&quot;         &quot;cli&quot;           &quot;crayon&quot;        &quot;dbplyr&quot;        &quot;dplyr&quot;         &quot;dtplyr&quot;        &quot;forcats&quot;      </span></span>
<span id="cb93-4"><a href="cap5.html#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8] &quot;googledrive&quot;   &quot;googlesheets4&quot; &quot;ggplot2&quot;       &quot;haven&quot;         &quot;hms&quot;           &quot;httr&quot;          &quot;jsonlite&quot;     </span></span>
<span id="cb93-5"><a href="cap5.html#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15] &quot;lubridate&quot;     &quot;magrittr&quot;      &quot;modelr&quot;        &quot;pillar&quot;        &quot;purrr&quot;         &quot;readr&quot;         &quot;readxl&quot;       </span></span>
<span id="cb93-6"><a href="cap5.html#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [22] &quot;reprex&quot;        &quot;rlang&quot;         &quot;rstudioapi&quot;    &quot;rvest&quot;         &quot;stringr&quot;       &quot;tibble&quot;        &quot;tidyr&quot;        </span></span>
<span id="cb93-7"><a href="cap5.html#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [29] &quot;xml2&quot;          &quot;tidyverse&quot;</span></span></code></pre></div>
<p>Também podemos verificar se os pacotes estão atualizados, senão, podemos atualizá-los com a função <code>tidyverse::tidyverse_update()</code>.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="cap5.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Verificar e atualizar os pacotes do tidyverse </span></span>
<span id="cb94-2"><a href="cap5.html#cb94-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_update</span>(<span class="at">repos =</span> <span class="st">&quot;http://cran.us.r-project.org&quot;</span>)</span></code></pre></div>
<p>Todas as funções dos pacotes tidyverse usam <strong>fonte minúscula</strong> e <strong><code>_</code> (<em>underscore</em>)</strong> para separar os nomes internos das funções, seguindo a mesma sintaxe do Python (“Snake Case”). Neste sentido de padronização, é importante destacar ainda que existe um guia próprio para que os scripts sigam a recomendação de padronização, o <a href="https://style.tidyverse.org/">The tidyverse style guide</a>, criado pelo próprio Hadley Wickham. Para pessoas que desenvolvem funções e pacotes existe o <a href="https://design.tidyverse.org/">Tidyverse design guide</a> criado pelo <em>Tidyverse team</em>.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="cap5.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Funções no formato snake case</span></span>
<span id="cb95-2"><a href="cap5.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>()</span>
<span id="cb95-3"><a href="cap5.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_tsv</span>()</span>
<span id="cb95-4"><a href="cap5.html#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>()</span>
<span id="cb95-5"><a href="cap5.html#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>()</span>
<span id="cb95-6"><a href="cap5.html#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>()</span></code></pre></div>
<p>Por fim, para evitar possíveis conflitos de funções com o mesmo nome entre pacotes, recomendamos fortemente o hábito de usar as funções precedidas do operador <code>::</code> e o respectivo pacote. Assim, garante-se que a função utilizada é referente ao pacote daquela função. Segue um exemplo com as funções apresentadas anteriormente.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="cap5.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Funções seguidas de seus respectivos pacotes</span></span>
<span id="cb96-2"><a href="cap5.html#cb96-2" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>()</span>
<span id="cb96-3"><a href="cap5.html#cb96-3" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_tsv</span>()</span>
<span id="cb96-4"><a href="cap5.html#cb96-4" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb96-5"><a href="cap5.html#cb96-5" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">left_join</span>()</span>
<span id="cb96-6"><a href="cap5.html#cb96-6" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>()</span></code></pre></div>
<p>Seguindo essas ideias do novo paradigma da <strong>Ciência de Dados</strong>, outro conjunto de pacotes foi desenvolvido, chamado de <a href="https://www.tidymodels.org/"><code>tidymodels</code></a> que atuam no fluxo de trabalho da análise de dados em ciência de dados: separação e reamostragem, pré-processamento, ajuste de modelos e métricas de performasse de ajustes. Por razões de espaço e especificidade, não entraremos em detalhes desses pacotes.</p>
<p>Seguindo a estrutura da Figura <a href="cap5.html#fig:fig-r-tidyverse">5.1</a>, iremos ver nos itens das próximas seções como esses passos são realizados com funções de cada pacote.</p>
</div>
<div id="here" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> here</h2>
<p>Dentro do fluxo de trabalho do tidyverse, devemos sempre trabalhar com <strong>Projetos do RStudio</strong>. Junto com o projeto, também podemos fazer uso do pacote <code>here</code>. Ele permite construir caminhos para os arquivos do projeto de forma mais simples e com maior reprodutibilidade.</p>
<p>Esse pacote cobre o ponto de mudarmos o diretório de trabalho que discutimos no capítulo <a href="cap4.html#cap4">4</a>, dado que muitas vezes mudar o diretório com a função <code>setwd()</code> tende a ser demorado e tedioso, principalmente quando se trata de um script em que várias pessoas estão trabalhando em diferentes computadores e sistemas operacionais. Além disso, ele elimina a questão da fragilidade dos scripts, pois geralmente um script está com os diretórios conectados exatamente a um lugar e a um momento. Por fim, ele também simplifica o trabalho com subdiretórios, facilitando importar ou exportar arquivos para subpastas.</p>
<p>Seu uso é relativamente simples: uma vez criado e aberto o RStudio pelo Projeto do RStudio, o diretório automaticamente é definido para o diretório do projeto. Depois disso, podemos usar a função <code>here::here()</code> para definir os subdiretórios onde estão os dados. O exemplo da aplicação fica para a seção seguinte, quando iremos de fato importar um arquivo tabular para o R. Logo abaixo, mostramos como instalar e carregar o pacote <code>here</code>.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="cap5.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Instalar</span></span>
<span id="cb97-2"><a href="cap5.html#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb97-3"><a href="cap5.html#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="cap5.html#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Carregar</span></span>
<span id="cb97-5"><a href="cap5.html#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
</div>
<div id="readr-readxl-e-writexl" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> readr, readxl e writexl</h2>
<p>Dado que possuímos um conjunto de dados e que geralmente esse conjunto de dados estará no formato tabular com umas das extensões: .csv, .txt ou .xlsx, usaremos o pacote <code>readr</code> ou <code>readxl</code> para importar esses dados para o R. Esses pacotes leem e escrevem grandes arquivos de forma mais rápida, além de fornecerem medidores de progresso de importação e exportação, e imprimir a informação dos modos das colunas no momento da importação. Outro ponto bastante positivo é que também classificam automaticamente o modo dos dados de cada coluna, i.e., se uma coluna possui dados numéricos ou apenas texto, essa informação será considerada para classificar o modo da coluna toda. A classe do objeto atribuído quando lido por esses pacotes é automaticamente um <code>tibble</code>, que veremos melhor na seção seguinte. Todas as funções deste pacote são listadas na <a href="https://readr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Usamos as funções <code>readr::read_csv()</code> e <code>readr::write_csv()</code> para importar e exportar arquivos .csv do R, respectivamente. Para dados com a extensão .txt, podemos utilizar as funções <code>readr::read_tsv()</code> ou ainda <code>readr::read_delim()</code>. Para arquivos tabulares com a extensão .xlsx, temos de instalar e carregar dois pacotes adicionais: <code>readxl</code> e <code>writexl</code>, dos quais usaremos as funções <code>readxl::read_excel()</code>, <code>readxl::read_xlsx()</code> ou <code>readxl::read_xls()</code> para importar dados, atentado para o fato de podermos indicar a aba com os dados com o argumento <code>sheet</code>, e <code>writexl::write_xlsx()</code> para exportar.</p>
<p>Se o arquivo .csv foi criado com separador de decimais sendo <code>.</code> e separador de colunas sendo <code>,</code>, usamos as funções listadas acima normalmente. Caso seja criado com separador de decimais sendo <code>,</code> e separador de colunas sendo <code>;</code>, devemos usar a função <code>readr::read_csv2()</code> para importar e <code>readr::write_csv2()</code> para exportar nesse formato, que é mais comum no Brasil.</p>
<p>Para exemplificar como essas funções funcionam, vamos importar novamente os dados de comunidades de anfíbios da Mata Atlântica <span class="citation">(<a href="#ref-vancine2018" role="doc-biblioref">Vancine et al., 2018</a>)</span>, que fizemos o download no Capítulo <a href="cap4.html#cap4">4</a>. Estamos usando a função <code>readr::read_csv()</code>, indicando os diretórios com a função <code>here::here()</code>, e a classe do arquivo é <code>tibble</code>. Devemos atentar para o argumento <code>locale = readr::locale(encoding = "latin1")</code>,que selecionamos aqui como <code>latin1</code> para corrigir um erro de caracteres, que o autor dos dados cometeu quando publicou esse data paper.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="cap5.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Importar locais</span></span>
<span id="cb98-2"><a href="cap5.html#cb98-2" aria-hidden="true" tabindex="-1"></a>tidy_anfibios_locais <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb98-3"><a href="cap5.html#cb98-3" aria-hidden="true" tabindex="-1"></a>    here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;dados&quot;</span>, <span class="st">&quot;tabelas&quot;</span>, <span class="st">&quot;ATLANTIC_AMPHIBIANS_sites.csv&quot;</span>),</span>
<span id="cb98-4"><a href="cap5.html#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">locale =</span> readr<span class="sc">::</span><span class="fu">locale</span>(<span class="at">encoding =</span> <span class="st">&quot;latin1&quot;</span>)</span>
<span id="cb98-5"><a href="cap5.html#cb98-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb98-6"><a href="cap5.html#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Rows: 1163 Columns: 25</span></span>
<span id="cb98-7"><a href="cap5.html#cb98-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Column specification ─────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb98-8"><a href="cap5.html#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Delimiter: &quot;,&quot;</span></span>
<span id="cb98-9"><a href="cap5.html#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; chr (13): id, record, sampled_habitat, active_methods, passive_methods, complementary_methods, period, country, state...</span></span>
<span id="cb98-10"><a href="cap5.html#cb98-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dbl (12): reference_number, species_number, month_start, year_start, month_finish, year_finish, effort_months, latitu...</span></span>
<span id="cb98-11"><a href="cap5.html#cb98-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb98-12"><a href="cap5.html#cb98-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb98-13"><a href="cap5.html#cb98-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<p>Caso o download não funcione ou haja problemas com a importação, disponibilizamos os dados também no pacote <code>ecodados</code>.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="cap5.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Importar os dados pelo pacote ecodados</span></span>
<span id="cb99-2"><a href="cap5.html#cb99-2" aria-hidden="true" tabindex="-1"></a>tidy_anfibios_locais <span class="ot">&lt;-</span> ecodados<span class="sc">::</span>tidy_anfibios_locais</span>
<span id="cb99-3"><a href="cap5.html#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tidy_anfibios_locais)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do Capítulo <a href="https://r4ds.had.co.nz/data-import.html">11 Data import</a> de Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.</p>
</div>
<div id="tibble" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> tibble</h2>
<p>O <code>tibble</code> (<code>tbl_sf</code>) é uma versão aprimorada do data frame (<code>data.frame</code>). Ele é a classe aconselhada para que as funções do tidyverse funcionem melhor sobre conjuntos de dados tabulares importados para o R.</p>
<p>Geralmente, quando utilizamos funções tidyverse para importar dados para o R, é essa classe que os dados adquirem depois de serem importados. Além da importação de dados, podemos criar um tibble no R usando a função <code>tibble::tibble()</code>, semelhante ao uso da função <code>data.frame()</code>. Podemos ainda converter um <code>data.frame</code> para um <code>tibble</code> usando a função <code>tibble::as_tibble()</code>. Entretanto, em alguns momentos precisaremos da classe <code>data.frame</code> para algumas funções específicas, e podemos converter um <code>tibble</code> para <code>data.frame</code> usando a função <code>tibble::as_data_frame()</code>.</p>
<p>Existem duas diferenças principais no uso do <code>tibble</code> e do <code>data.frame</code>: impressão e subconjunto. Objetos da classe <code>tibbles</code> possuem um método de impressão que mostra a contagem do número de linhas e colunas, e apenas as primeiras 10 linhas e todas as colunas que cabem na tela no console, além dos modos ou tipos das colunas. Dessa forma, cada coluna ou variável, pode ser do modo numbers (<code>int</code> ou <code>dbl</code>), character (<code>chr</code>), logical (<code>lgl</code>), factor (<code>fctr</code>), date + time (<code>dttm</code>) e date (<code>date</code>), além de outras <a href="https://tibble.tidyverse.org/articles/types.html">inúmeras possibilidades</a>.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://tibble.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="cap5.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Tibble - impressão</span></span>
<span id="cb100-2"><a href="cap5.html#cb100-2" aria-hidden="true" tabindex="-1"></a>tidy_anfibios_locais</span>
<span id="cb100-3"><a href="cap5.html#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1,163 × 25</span></span>
<span id="cb100-4"><a href="cap5.html#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    id      reference_number species_number record sampled_habitat active_methods passive_methods complementary_me… period</span></span>
<span id="cb100-5"><a href="cap5.html#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;             &lt;chr&gt; </span></span>
<span id="cb100-6"><a href="cap5.html#cb100-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 amp1001             1001             19 ab     fo,ll           as             pt              &lt;NA&gt;              mo,da…</span></span>
<span id="cb100-7"><a href="cap5.html#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 amp1002             1002             16 co     fo,la,ll        as             pt              &lt;NA&gt;              mo,da…</span></span>
<span id="cb100-8"><a href="cap5.html#cb100-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 amp1003             1002             14 co     fo,la,ll        as             pt              &lt;NA&gt;              mo,da…</span></span>
<span id="cb100-9"><a href="cap5.html#cb100-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 amp1004             1002             13 co     fo,la,ll        as             pt              &lt;NA&gt;              mo,da…</span></span>
<span id="cb100-10"><a href="cap5.html#cb100-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 amp1005             1003             30 co     fo,ll,br        as             &lt;NA&gt;            &lt;NA&gt;              mo,da…</span></span>
<span id="cb100-11"><a href="cap5.html#cb100-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 amp1006             1004             42 co     tp,pp,la,ll,is  &lt;NA&gt;           &lt;NA&gt;            &lt;NA&gt;              &lt;NA&gt;  </span></span>
<span id="cb100-12"><a href="cap5.html#cb100-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 amp1007             1005             23 co     sp              as             &lt;NA&gt;            &lt;NA&gt;              &lt;NA&gt;  </span></span>
<span id="cb100-13"><a href="cap5.html#cb100-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 amp1008             1005             19 co     sp,la,sw        as,sb,tr       &lt;NA&gt;            &lt;NA&gt;              tw,ni </span></span>
<span id="cb100-14"><a href="cap5.html#cb100-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 amp1009             1005             13 ab     fo              &lt;NA&gt;           pt              &lt;NA&gt;              mo,da…</span></span>
<span id="cb100-15"><a href="cap5.html#cb100-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 amp1010             1006              1 ab     fo              &lt;NA&gt;           pt              &lt;NA&gt;              mo,da…</span></span>
<span id="cb100-16"><a href="cap5.html#cb100-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 1,153 more rows, and 16 more variables: month_start &lt;dbl&gt;, year_start &lt;dbl&gt;, month_finish &lt;dbl&gt;,</span></span>
<span id="cb100-17"><a href="cap5.html#cb100-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   year_finish &lt;dbl&gt;, effort_months &lt;dbl&gt;, country &lt;chr&gt;, state &lt;chr&gt;, state_abbreviation &lt;chr&gt;, municipality &lt;chr&gt;,</span></span>
<span id="cb100-18"><a href="cap5.html#cb100-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   site &lt;chr&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;, coordinate_precision &lt;chr&gt;, altitude &lt;dbl&gt;, temperature &lt;dbl&gt;,</span></span>
<span id="cb100-19"><a href="cap5.html#cb100-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   precipitation &lt;dbl&gt;</span></span></code></pre></div>
<p>Para o subconjunto, como vimos no Capítulo <a href="cap4.html#cap4">4</a>, para selecionar colunas e linhas de objetos bidimensionais podemos utilizar os operadores <code>[]</code> ou <code>[[]]</code>, associado com números separados por vírgulas ou o nome da coluna entre aspas, e o operador <code>$</code> para extrair uma coluna pelo seu nome. Comparando um <code>data.frame</code> a um <code>tibble</code>, o último é mais rígido na seleção das colunas: eles nunca fazem correspondência parcial e geram um aviso se a coluna que você está tentando acessar não existir.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="cap5.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Tibble - subconjunto</span></span>
<span id="cb101-2"><a href="cap5.html#cb101-2" aria-hidden="true" tabindex="-1"></a>tidy_anfibios_locais<span class="sc">$</span>ref</span>
<span id="cb101-3"><a href="cap5.html#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Unknown or uninitialised column: `ref`.</span></span>
<span id="cb101-4"><a href="cap5.html#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Por fim, podemos “espiar” os dados utilizando a função <code>tibble::glimpse()</code> para ter uma noção geral de número de linhas, colunas, e conteúdo de todas as colunas. Essa é função <em>tidyverse</em> da função R Base <code>str()</code>.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="cap5.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Espiar os dados</span></span>
<span id="cb102-2"><a href="cap5.html#cb102-2" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(tidy_anfibios_locais[, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb102-3"><a href="cap5.html#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Rows: 1,163</span></span>
<span id="cb102-4"><a href="cap5.html#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Columns: 10</span></span>
<span id="cb102-5"><a href="cap5.html#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ id                    &lt;chr&gt; &quot;amp1001&quot;, &quot;amp1002&quot;, &quot;amp1003&quot;, &quot;amp1004&quot;, &quot;amp1005&quot;, &quot;amp1006&quot;, &quot;amp1007&quot;, &quot;amp1008&quot;, &quot;…</span></span>
<span id="cb102-6"><a href="cap5.html#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ reference_number      &lt;dbl&gt; 1001, 1002, 1002, 1002, 1003, 1004, 1005, 1005, 1005, 1006, 1006, 1006, 1006, 1006, 1006,…</span></span>
<span id="cb102-7"><a href="cap5.html#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ species_number        &lt;dbl&gt; 19, 16, 14, 13, 30, 42, 23, 19, 13, 1, 1, 2, 4, 4, 6, 5, 8, 2, 5, 1, 2, 2, 1, 2, 2, 1, 2,…</span></span>
<span id="cb102-8"><a href="cap5.html#cb102-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ record                &lt;chr&gt; &quot;ab&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;ab&quot;, &quot;ab&quot;, &quot;ab&quot;, &quot;ab&quot;, &quot;ab&quot;, &quot;ab&quot;, &quot;ab&quot;,…</span></span>
<span id="cb102-9"><a href="cap5.html#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ sampled_habitat       &lt;chr&gt; &quot;fo,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,ll,br&quot;, &quot;tp,pp,la,ll,is&quot;, &quot;sp&quot;, &quot;sp,la,s…</span></span>
<span id="cb102-10"><a href="cap5.html#cb102-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ active_methods        &lt;chr&gt; &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, NA, &quot;as&quot;, &quot;as,sb,tr&quot;, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb102-11"><a href="cap5.html#cb102-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ passive_methods       &lt;chr&gt; &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, NA, NA, NA, NA, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;…</span></span>
<span id="cb102-12"><a href="cap5.html#cb102-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ complementary_methods &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb102-13"><a href="cap5.html#cb102-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ period                &lt;chr&gt; &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo,da,ni&quot;, NA, NA, &quot;tw,ni&quot;, …</span></span>
<span id="cb102-14"><a href="cap5.html#cb102-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ month_start           &lt;dbl&gt; 9, 12, 12, 12, 7, NA, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5…</span></span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do Capítulo <a href="https://r4ds.had.co.nz/tibbles.html">10 Tibbles</a> de Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.</p>
</div>
<div id="magrittr-pipe--" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> magrittr (pipe - %&gt;%)</h2>
<p>O operador pipe <code>%&gt;%</code> permite o encadeamento de várias funções, eliminando a necessidade de criar objetos para armazenar resultados intermediários. Dessa forma, pipes são uma ferramenta poderosa para expressar uma sequência de múltiplas operações.</p>
<p>O operador pipe <code>%&gt;%</code> vem do pacote <code>magrittr</code>, entretanto, todos os pacotes no tidyverse automaticamente tornam o pipe disponível. Essa função torna os códigos em R mais simples, pois realizamos múltiplas operações em uma única linha. Ele captura o resultado de uma declaração e o torna a primeira entrada da próxima declaração, então podemos pensar como “EM SEGUIDA FAÇA” ao final de cada linha de código.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://maggritr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>A principal vantagem do uso dos pipes é facilitar a depuração (<em>debugging</em> - achar erros) nos códigos, porque seu uso torna a linguagem R mais próxima do que falamos e pensamos, uma vez que evita o uso de funções dentro de funções (funções compostas, lembra-se do fog e gof do ensino médio? Evitamos eles aqui também).</p>
<p>Digitar <code>%&gt;%</code> é um pouco chato, dessa forma, existe um atalho para sua inserção nos scripts: <code>Ctrl + Shift + M</code>.</p>
<p>Para deixar esse tópico menos estranho a quem possa ver essa operação pela primeira vez, vamos fazer alguns exemplos.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="cap5.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Base R - sem pipe</span></span>
<span id="cb103-2"><a href="cap5.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>))</span>
<span id="cb103-3"><a href="cap5.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 71.06335</span></span>
<span id="cb103-4"><a href="cap5.html#cb103-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-5"><a href="cap5.html#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Tidyverse - com pipe</span></span>
<span id="cb103-6"><a href="cap5.html#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">%&gt;%</span> </span>
<span id="cb103-7"><a href="cap5.html#cb103-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb103-8"><a href="cap5.html#cb103-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sqrt</span>()</span>
<span id="cb103-9"><a href="cap5.html#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 71.06335</span></span></code></pre></div>
<p>Essas operações ainda estão simples, vamos torná-las mais complexas com várias funções compostas. É nesses casos que a propriedade organizacional do uso do pipe emerge: podemos facilmente ver o encadeamento de operações, onde cada função é disposta numa linha. Apenas um adendo: a função <code>set.seed()</code> que fixa a amostragem de funções que geram valores aleatórios, como é o caso da função <code>rpois()</code>.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="cap5.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Fixar amostragem</span></span>
<span id="cb104-2"><a href="cap5.html#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb104-3"><a href="cap5.html#cb104-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-4"><a href="cap5.html#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Base R - sem pipe</span></span>
<span id="cb104-5"><a href="cap5.html#cb104-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">sqrt</span>(<span class="fu">sin</span>(<span class="fu">log10</span>(<span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>)))))</span>
<span id="cb104-6"><a href="cap5.html#cb104-6" aria-hidden="true" tabindex="-1"></a>ve</span>
<span id="cb104-7"><a href="cap5.html#cb104-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 91.27018</span></span>
<span id="cb104-8"><a href="cap5.html#cb104-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-9"><a href="cap5.html#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Fixar amostragem</span></span>
<span id="cb104-10"><a href="cap5.html#cb104-10" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb104-11"><a href="cap5.html#cb104-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-12"><a href="cap5.html#cb104-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Tidyverse - com pipe</span></span>
<span id="cb104-13"><a href="cap5.html#cb104-13" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-14"><a href="cap5.html#cb104-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">log10</span>() <span class="sc">%&gt;%</span></span>
<span id="cb104-15"><a href="cap5.html#cb104-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sin</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb104-16"><a href="cap5.html#cb104-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb104-17"><a href="cap5.html#cb104-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>()</span>
<span id="cb104-18"><a href="cap5.html#cb104-18" aria-hidden="true" tabindex="-1"></a>ve</span>
<span id="cb104-19"><a href="cap5.html#cb104-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 91.27018</span></span></code></pre></div>
<p>O uso do pipe vai se tornar especialmente útil quando seguirmos para os pacotes das próximas duas seções: <code>tidyr</code> e <code>dplyr</code>. Com esses pacotes faremos operações em linhas e colunas de nossos dados tabulares, então podemos encadear uma série de funções para manipulação, limpeza e análise de dados.</p>
<p>Há ainda três outras variações do pipe que podem ser úteis em alguns momentos, mas que para funcionar precisam que o pacote <code>magrittr</code> esteja carregado:</p>
<ul>
<li><code>%T&gt;%</code>: retorna o lado esquerdo em vez do lado direito da operação</li>
<li><code>%$%</code>: “explode” as variáveis em um quadro de dados</li>
<li><code>%&lt;&gt;%</code>: permite atribuição usando pipes</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do Capítulo <a href="https://r4ds.had.co.nz/pipes.html">18 Pipes</a> de Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.</p>
<div class="alert alert-info">
<p><strong> 📝 Importante </strong><br />
A partir da versão do R 4.1+ (18/05/2021), o operador pipe se tornou nativo do R. Entretanto, o operador foi atualizado para <code>|&gt;</code>, podendo ser inserido com o mesmo atalho <code>Ctrl + Shift + M</code>, mas necessitando uma mudança de opção em <code>Tools &gt; Global Options &gt; Code &gt; [x] Use native pipe operator, |&gt; (requires R 4.1+)</code>, necessitando que o RStudio esteja numa versão igual ou superior a 1.4.17+.</p>
</div>
</div>
<div id="tidyr" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> tidyr</h2>
<p>Os conjuntos de dados <code>tidy</code> (organizados) são mais fáceis de manipular, modelar e visualizar. Um conjunto de dados está no formato <code>tidy</code> ou não, dependendo de como linhas, colunas e células são combinadas com observações, variáveis e valores. Nos dados tidy, as variáveis estão nas colunas, observações estão nas linhas e valores estão nas células, sendo que para esse último, não deve haver mais de um valor por célula (Figura <a href="cap5.html#fig:fig-r-dados-tidy">5.2</a>).</p>
<ol style="list-style-type: decimal">
<li>Cada variável em uma coluna</li>
<li>Cada observação em uma linha</li>
<li>Cada valor como uma célula</li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-r-dados-tidy"></span>
<img src="img/cap05_fig02.png" alt="As três regras que tornam um conjunto de dados *tidy*. Adaptado de: Wickham &amp; Grolemund [-@wickham2017]." width="100%" height="100%" />
<p class="caption">
Figura 5.2: As três regras que tornam um conjunto de dados <em>tidy</em>. Adaptado de: Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.
</p>
</div>
<p>Todas as funções deste pacote são listadas na <a href="https://tidyr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Para realizar diversas transformações nos dados, a fim de ajustá-los ao formato <code>tidy</code> existe uma série de funções para: unir colunas, separar colunas, lidar com valores faltantes (<code>NA</code>), transformar a base de dados de formato longo para largo (ou vice-e-versa), além de outras <a href="https://tidyr.tidyverse.org/reference/index.html">funções específicas</a>.</p>
<ul>
<li><code>unite()</code>: junta dados de múltiplas colunas em uma coluna</li>
<li><code>separate()</code>: separa caracteres em múltiplas colunas</li>
<li><code>separate_rows()</code>: separa caracteres em múltiplas colunas e linhas</li>
<li><code>drop_na()</code>: retira linhas com <code>NA</code> do conjunto de dados</li>
<li><code>replace_na()</code>: substitui <code>NA</code> do conjunto de dados</li>
<li><code>pivot_wider()</code>: transforma um conjunto de dados longo (<em>long</em>) para largo (<em>wide</em>)</li>
<li><code>pivot_longer()</code>: transforma um conjunto de dados largo (<em>wide</em>) para longo (<em>long</em>)</li>
</ul>
<div id="palmerpenguins" class="section level3" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> palmerpenguins</h3>
<p>Para exemplificar o funcionamento dessas funções, usaremos os dados de medidas de pinguins chamados <a href="https://allisonhorst.github.io/palmerpenguins"><em>palmerpenguins</em></a>, disponíveis no pacote <code>palmerpenguins</code>.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="cap5.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Instalar o pacote</span></span>
<span id="cb105-2"><a href="cap5.html#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;palmerpenguins&quot;</span>)</span></code></pre></div>
<p>Esses dados foram coletados e disponibilizados pela <a href="https://www.uaf.edu/cfos/people/faculty/detail/kristen-gorman.php">Dra. Kristen Gorman</a> e pela <a href="https://pal.lternet.edu/">Palmer Station, Antarctica LTER</a>, membro da Long Term Ecological Research Network.</p>
<p>O pacote <code>palmerpenguins</code> contém dois conjuntos de dados. Um é chamado de <code>penguins</code> e é uma versão simplificada dos dados brutos. O segundo conjunto de dados é <code>penguins_raw</code> e contém todas as variáveis e nomes originais baixados. Ambos os conjuntos de dados contêm dados para 344 pinguins, de três espécies diferentes, coletados em três ilhas no arquipélago de Palmer, na Antártica. Destacamos também a versão traduzida desses dados para o português, disponível no pacote <a href="https://cienciadedatos.github.io/dados/"><code>dados</code></a>.</p>
<p>Vamos utilizar principalmente o conjunto de dados <code>penguins_raw</code>, que é a versão dos dados brutos.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="cap5.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Carregar o pacote palmerpenguins</span></span>
<span id="cb106-2"><a href="cap5.html#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
<p>Podemos ainda vericar os dados, pedindo uma ajuda de cada um dos objetos.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="cap5.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Ajuda dos dados</span></span>
<span id="cb107-2"><a href="cap5.html#cb107-2" aria-hidden="true" tabindex="-1"></a>?penguins</span>
<span id="cb107-3"><a href="cap5.html#cb107-3" aria-hidden="true" tabindex="-1"></a>?penguins_raw</span></code></pre></div>
</div>
<div id="glimpse" class="section level3" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> glimpse()</h3>
<p>Primeiramente, vamos observar os dados e utilizar a função <code>tibble::glimpse()</code> para ter uma noção geral dos dados.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="cap5.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Visualizar os dados</span></span>
<span id="cb108-2"><a href="cap5.html#cb108-2" aria-hidden="true" tabindex="-1"></a>penguins_raw</span>
<span id="cb108-3"><a href="cap5.html#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 344 × 17</span></span>
<span id="cb108-4"><a href="cap5.html#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    studyName `Sample Number` Species     Region Island Stage `Individual ID` `Clutch Comple…` `Date Egg` `Culmen Length…`</span></span>
<span id="cb108-5"><a href="cap5.html#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;            &lt;date&gt;                &lt;dbl&gt;</span></span>
<span id="cb108-6"><a href="cap5.html#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 PAL0708                 1 Adelie Pen… Anvers Torge… Adul… N1A1            Yes              2007-11-11             39.1</span></span>
<span id="cb108-7"><a href="cap5.html#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 PAL0708                 2 Adelie Pen… Anvers Torge… Adul… N1A2            Yes              2007-11-11             39.5</span></span>
<span id="cb108-8"><a href="cap5.html#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 PAL0708                 3 Adelie Pen… Anvers Torge… Adul… N2A1            Yes              2007-11-16             40.3</span></span>
<span id="cb108-9"><a href="cap5.html#cb108-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 PAL0708                 4 Adelie Pen… Anvers Torge… Adul… N2A2            Yes              2007-11-16             NA  </span></span>
<span id="cb108-10"><a href="cap5.html#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 PAL0708                 5 Adelie Pen… Anvers Torge… Adul… N3A1            Yes              2007-11-16             36.7</span></span>
<span id="cb108-11"><a href="cap5.html#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 PAL0708                 6 Adelie Pen… Anvers Torge… Adul… N3A2            Yes              2007-11-16             39.3</span></span>
<span id="cb108-12"><a href="cap5.html#cb108-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 PAL0708                 7 Adelie Pen… Anvers Torge… Adul… N4A1            No               2007-11-15             38.9</span></span>
<span id="cb108-13"><a href="cap5.html#cb108-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 PAL0708                 8 Adelie Pen… Anvers Torge… Adul… N4A2            No               2007-11-15             39.2</span></span>
<span id="cb108-14"><a href="cap5.html#cb108-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 PAL0708                 9 Adelie Pen… Anvers Torge… Adul… N5A1            Yes              2007-11-09             34.1</span></span>
<span id="cb108-15"><a href="cap5.html#cb108-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 PAL0708                10 Adelie Pen… Anvers Torge… Adul… N5A2            Yes              2007-11-09             42  </span></span>
<span id="cb108-16"><a href="cap5.html#cb108-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 334 more rows, and 7 more variables: `Culmen Depth (mm)` &lt;dbl&gt;, `Flipper Length (mm)` &lt;dbl&gt;,</span></span>
<span id="cb108-17"><a href="cap5.html#cb108-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;, `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</span></span>
<span id="cb108-18"><a href="cap5.html#cb108-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-19"><a href="cap5.html#cb108-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Espiar os dados</span></span>
<span id="cb108-20"><a href="cap5.html#cb108-20" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(penguins_raw)</span>
<span id="cb108-21"><a href="cap5.html#cb108-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Rows: 344</span></span>
<span id="cb108-22"><a href="cap5.html#cb108-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Columns: 17</span></span>
<span id="cb108-23"><a href="cap5.html#cb108-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ studyName             &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;…</span></span>
<span id="cb108-24"><a href="cap5.html#cb108-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Sample Number`       &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25…</span></span>
<span id="cb108-25"><a href="cap5.html#cb108-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Species               &lt;chr&gt; &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie Pen…</span></span>
<span id="cb108-26"><a href="cap5.html#cb108-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Region                &lt;chr&gt; &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;,…</span></span>
<span id="cb108-27"><a href="cap5.html#cb108-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Island                &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;…</span></span>
<span id="cb108-28"><a href="cap5.html#cb108-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Stage                 &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;…</span></span>
<span id="cb108-29"><a href="cap5.html#cb108-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Individual ID`       &lt;chr&gt; &quot;N1A1&quot;, &quot;N1A2&quot;, &quot;N2A1&quot;, &quot;N2A2&quot;, &quot;N3A1&quot;, &quot;N3A2&quot;, &quot;N4A1&quot;, &quot;N4A2&quot;, &quot;N5A1&quot;, &quot;N5A2&quot;, &quot;N6A1&quot;, &quot;…</span></span>
<span id="cb108-30"><a href="cap5.html#cb108-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Clutch Completion`   &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, …</span></span>
<span id="cb108-31"><a href="cap5.html#cb108-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Date Egg`            &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16, 2007-11-16, 2007-11-16, 2007-11-15, 2007…</span></span>
<span id="cb108-32"><a href="cap5.html#cb108-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Culmen Length (mm)`  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.0, 37.8, 37.8, 41.1, 38.6, 34.6, 3…</span></span>
<span id="cb108-33"><a href="cap5.html#cb108-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Culmen Depth (mm)`   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, 20.2, 17.1, 17.3, 17.6, 21.2, 21.1, 1…</span></span>
<span id="cb108-34"><a href="cap5.html#cb108-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Flipper Length (mm)` &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186, 180, 182, 191, 198, 185, 195, 197, …</span></span>
<span id="cb108-35"><a href="cap5.html#cb108-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Body Mass (g)`       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, 4250, 3300, 3700, 3200, 3800, 4400, 3…</span></span>
<span id="cb108-36"><a href="cap5.html#cb108-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Sex                   &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;MALE&quot;, NA, NA, NA, NA, &quot;FEMA…</span></span>
<span id="cb108-37"><a href="cap5.html#cb108-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Delta 15 N (o/oo)`   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18718, 9.46060, NA, 9.13362, 8.63243, NA, N…</span></span>
<span id="cb108-38"><a href="cap5.html#cb108-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ `Delta 13 C (o/oo)`   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.29805, -25.21799, -24.89958, NA, -25.09368, …</span></span>
<span id="cb108-39"><a href="cap5.html#cb108-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Comments              &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, &quot;Adult not sampled.&quot;, NA, NA, &quot;Nest never obser…</span></span></code></pre></div>
</div>
<div id="unite" class="section level3" number="5.7.3">
<h3><span class="header-section-number">5.7.3</span> unite()</h3>
<p>Primeiramente, vamos exemplificar como juntar e separar colunas. Vamos utilizar a função <code>tidyr::unite()</code> para unir as colunas. Há diversos parâmetros para alterar como esta função funciona, entretanto, é importante destacar três deles: <code>col</code> nome da coluna que vai receber as colunas unidas, <code>sep</code> indicando o caracter separador das colunas unidas, e <code>remove</code> para uma resposta lógica se as colunas unidas são removidas ou não. Vamos unir as colunas “Region” e “Island” na nova coluna “region_island.”</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="cap5.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Unir colunas</span></span>
<span id="cb109-2"><a href="cap5.html#cb109-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_unir <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">unite</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb109-3"><a href="cap5.html#cb109-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">col =</span> <span class="st">&quot;region_island&quot;</span>,</span>
<span id="cb109-4"><a href="cap5.html#cb109-4" aria-hidden="true" tabindex="-1"></a>                                  Region<span class="sc">:</span>Island, </span>
<span id="cb109-5"><a href="cap5.html#cb109-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb109-6"><a href="cap5.html#cb109-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb109-7"><a href="cap5.html#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_unir[, <span class="fu">c</span>(<span class="st">&quot;Region&quot;</span>, <span class="st">&quot;Island&quot;</span>, <span class="st">&quot;region_island&quot;</span>)])</span>
<span id="cb109-8"><a href="cap5.html#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span id="cb109-9"><a href="cap5.html#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Region Island    region_island    </span></span>
<span id="cb109-10"><a href="cap5.html#cb109-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;            </span></span>
<span id="cb109-11"><a href="cap5.html#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Anvers Torgersen Anvers, Torgersen</span></span>
<span id="cb109-12"><a href="cap5.html#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Anvers Torgersen Anvers, Torgersen</span></span>
<span id="cb109-13"><a href="cap5.html#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Anvers Torgersen Anvers, Torgersen</span></span>
<span id="cb109-14"><a href="cap5.html#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Anvers Torgersen Anvers, Torgersen</span></span>
<span id="cb109-15"><a href="cap5.html#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Anvers Torgersen Anvers, Torgersen</span></span>
<span id="cb109-16"><a href="cap5.html#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Anvers Torgersen Anvers, Torgersen</span></span></code></pre></div>
</div>
<div id="separate" class="section level3" number="5.7.4">
<h3><span class="header-section-number">5.7.4</span> separate()</h3>
<p>De forma contrária, podemos utilizar as funções <code>tidyr::separate()</code> e <code>tidyr::separate_rows()</code> para separar elementos de uma coluna em mais colunas. Respectivamente, a primeira função separa uma coluna em novas colunas conforme a separação, e a segunda função separa uma coluna, distribuindo os elementos nas linhas. Novamente, há diversos parâmetros para mudar o comportamento dessas funções, mas destacaremos aqui quatro deles: <code>col</code> coluna a ser separada, <code>into</code> os nomes das novas colunas, <code>sep</code> indicando o caractere separador das colunas, e <code>remove</code> para uma resposta lógica se as colunas separadas são removidas ou não. Vamos separar a coluna “Stage” nas colunas “stage” e “egg_stage.”</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="cap5.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Separar colunas</span></span>
<span id="cb110-2"><a href="cap5.html#cb110-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb110-3"><a href="cap5.html#cb110-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">col =</span> Stage,</span>
<span id="cb110-4"><a href="cap5.html#cb110-4" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;stage&quot;</span>, <span class="st">&quot;egg_stage&quot;</span>), </span>
<span id="cb110-5"><a href="cap5.html#cb110-5" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb110-6"><a href="cap5.html#cb110-6" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb110-7"><a href="cap5.html#cb110-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_separar[, <span class="fu">c</span>(<span class="st">&quot;Stage&quot;</span>, <span class="st">&quot;stage&quot;</span>, <span class="st">&quot;egg_stage&quot;</span>)])</span>
<span id="cb110-8"><a href="cap5.html#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span id="cb110-9"><a href="cap5.html#cb110-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Stage              stage egg_stage  </span></span>
<span id="cb110-10"><a href="cap5.html#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt;      </span></span>
<span id="cb110-11"><a href="cap5.html#cb110-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adult, 1 Egg Stage Adult 1 Egg Stage</span></span>
<span id="cb110-12"><a href="cap5.html#cb110-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adult, 1 Egg Stage Adult 1 Egg Stage</span></span>
<span id="cb110-13"><a href="cap5.html#cb110-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adult, 1 Egg Stage Adult 1 Egg Stage</span></span>
<span id="cb110-14"><a href="cap5.html#cb110-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adult, 1 Egg Stage Adult 1 Egg Stage</span></span>
<span id="cb110-15"><a href="cap5.html#cb110-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adult, 1 Egg Stage Adult 1 Egg Stage</span></span>
<span id="cb110-16"><a href="cap5.html#cb110-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adult, 1 Egg Stage Adult 1 Egg Stage</span></span>
<span id="cb110-17"><a href="cap5.html#cb110-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-18"><a href="cap5.html#cb110-18" aria-hidden="true" tabindex="-1"></a><span class="do">## Separar colunas em novas linhas</span></span>
<span id="cb110-19"><a href="cap5.html#cb110-19" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar_linhas <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate_rows</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb110-20"><a href="cap5.html#cb110-20" aria-hidden="true" tabindex="-1"></a>                                                    Stage,</span>
<span id="cb110-21"><a href="cap5.html#cb110-21" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb110-22"><a href="cap5.html#cb110-22" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_separar_linhas[, <span class="fu">c</span>(<span class="st">&quot;studyName&quot;</span>, <span class="st">&quot;Sample Number&quot;</span>, <span class="st">&quot;Species&quot;</span>, </span>
<span id="cb110-23"><a href="cap5.html#cb110-23" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">&quot;Region&quot;</span>, <span class="st">&quot;Island&quot;</span>, <span class="st">&quot;Stage&quot;</span>)])</span>
<span id="cb110-24"><a href="cap5.html#cb110-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb110-25"><a href="cap5.html#cb110-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   studyName `Sample Number` Species                             Region Island    Stage      </span></span>
<span id="cb110-26"><a href="cap5.html#cb110-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;                               &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      </span></span>
<span id="cb110-27"><a href="cap5.html#cb110-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 PAL0708                 1 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult      </span></span>
<span id="cb110-28"><a href="cap5.html#cb110-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 PAL0708                 1 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen 1 Egg Stage</span></span>
<span id="cb110-29"><a href="cap5.html#cb110-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 PAL0708                 2 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult      </span></span>
<span id="cb110-30"><a href="cap5.html#cb110-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 PAL0708                 2 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen 1 Egg Stage</span></span>
<span id="cb110-31"><a href="cap5.html#cb110-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 PAL0708                 3 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult      </span></span>
<span id="cb110-32"><a href="cap5.html#cb110-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 PAL0708                 3 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen 1 Egg Stage</span></span></code></pre></div>
</div>
<div id="drop_na-e-replace_na" class="section level3" number="5.7.5">
<h3><span class="header-section-number">5.7.5</span> drop_na() e replace_na()</h3>
<p><em>Valores faltantes</em> (<code>NA</code>) é um tipo especial de elemento que discutimos no Capítulo <a href="cap4.html#cap4">4</a> e são relativamente comuns em conjuntos de dados. Em Base R, vimos algumas formas de lidar com esse tipo de elemento. No formato <code>tidyverse</code>, existem também várias formas de lidar com eles, mas aqui focaremos nas funções <code>tidyr::drop_na()</code> e <code>tidyr::replace_na()</code>, para retirar linhas e substituir esses valores, respectivamente.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="cap5.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Remover todas as linhas com NAs</span></span>
<span id="cb111-2"><a href="cap5.html#cb111-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_todas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw)</span>
<span id="cb111-3"><a href="cap5.html#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_todas_na)</span>
<span id="cb111-4"><a href="cap5.html#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 17</span></span>
<span id="cb111-5"><a href="cap5.html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   studyName `Sample Number` Species       Region Island Stage `Individual ID` `Clutch Comple…`</span></span>
<span id="cb111-6"><a href="cap5.html#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;           </span></span>
<span id="cb111-7"><a href="cap5.html#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 PAL0708                 7 Adelie Pengu… Anvers Torge… Adul… N4A1            No              </span></span>
<span id="cb111-8"><a href="cap5.html#cb111-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 PAL0708                 8 Adelie Pengu… Anvers Torge… Adul… N4A2            No              </span></span>
<span id="cb111-9"><a href="cap5.html#cb111-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 PAL0708                29 Adelie Pengu… Anvers Biscoe Adul… N18A1           No              </span></span>
<span id="cb111-10"><a href="cap5.html#cb111-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 PAL0708                30 Adelie Pengu… Anvers Biscoe Adul… N18A2           No              </span></span>
<span id="cb111-11"><a href="cap5.html#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 PAL0708                39 Adelie Pengu… Anvers Dream  Adul… N25A1           No              </span></span>
<span id="cb111-12"><a href="cap5.html#cb111-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 PAL0809                69 Adelie Pengu… Anvers Torge… Adul… N32A1           No              </span></span>
<span id="cb111-13"><a href="cap5.html#cb111-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 9 more variables: `Date Egg` &lt;date&gt;, `Culmen Length (mm)` &lt;dbl&gt;,</span></span>
<span id="cb111-14"><a href="cap5.html#cb111-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   `Culmen Depth (mm)` &lt;dbl&gt;, `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,</span></span>
<span id="cb111-15"><a href="cap5.html#cb111-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</span></span>
<span id="cb111-16"><a href="cap5.html#cb111-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-17"><a href="cap5.html#cb111-17" aria-hidden="true" tabindex="-1"></a><span class="do">## Remover linhas de colunas específicas com NAs</span></span>
<span id="cb111-18"><a href="cap5.html#cb111-18" aria-hidden="true" tabindex="-1"></a>penguins_raw_colunas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb111-19"><a href="cap5.html#cb111-19" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">any_of</span>(<span class="st">&quot;Comments&quot;</span>))</span>
<span id="cb111-20"><a href="cap5.html#cb111-20" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_colunas_na[, <span class="st">&quot;Comments&quot;</span>])</span>
<span id="cb111-21"><a href="cap5.html#cb111-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 1</span></span>
<span id="cb111-22"><a href="cap5.html#cb111-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Comments                             </span></span>
<span id="cb111-23"><a href="cap5.html#cb111-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                                </span></span>
<span id="cb111-24"><a href="cap5.html#cb111-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Not enough blood for isotopes.       </span></span>
<span id="cb111-25"><a href="cap5.html#cb111-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adult not sampled.                   </span></span>
<span id="cb111-26"><a href="cap5.html#cb111-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Nest never observed with full clutch.</span></span>
<span id="cb111-27"><a href="cap5.html#cb111-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Nest never observed with full clutch.</span></span>
<span id="cb111-28"><a href="cap5.html#cb111-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 No blood sample obtained.            </span></span>
<span id="cb111-29"><a href="cap5.html#cb111-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 No blood sample obtained for sexing.</span></span>
<span id="cb111-30"><a href="cap5.html#cb111-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-31"><a href="cap5.html#cb111-31" aria-hidden="true" tabindex="-1"></a><span class="do">## Substituir NAs por outro valor</span></span>
<span id="cb111-32"><a href="cap5.html#cb111-32" aria-hidden="true" tabindex="-1"></a>penguins_raw_subs_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb111-33"><a href="cap5.html#cb111-33" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">list</span>(<span class="at">Comments =</span> <span class="st">&quot;Unknown&quot;</span>))</span>
<span id="cb111-34"><a href="cap5.html#cb111-34" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_subs_na[, <span class="st">&quot;Comments&quot;</span>])</span>
<span id="cb111-35"><a href="cap5.html#cb111-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 1</span></span>
<span id="cb111-36"><a href="cap5.html#cb111-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Comments                      </span></span>
<span id="cb111-37"><a href="cap5.html#cb111-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                         </span></span>
<span id="cb111-38"><a href="cap5.html#cb111-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Not enough blood for isotopes.</span></span>
<span id="cb111-39"><a href="cap5.html#cb111-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Unknown                       </span></span>
<span id="cb111-40"><a href="cap5.html#cb111-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Unknown                       </span></span>
<span id="cb111-41"><a href="cap5.html#cb111-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adult not sampled.            </span></span>
<span id="cb111-42"><a href="cap5.html#cb111-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Unknown                       </span></span>
<span id="cb111-43"><a href="cap5.html#cb111-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Unknown</span></span></code></pre></div>
</div>
<div id="pivot_longer-e-pivot_wider" class="section level3" number="5.7.6">
<h3><span class="header-section-number">5.7.6</span> pivot_longer() e pivot_wider()</h3>
<p>Por fim, trataremos da pivotagem ou remodelagem de dados. Veremos como mudar o formato do nosso conjunto de dados de longo (<em>long</em>) para largo (<em>wide</em>) e vice-versa. Primeiramente, vamos ver como partir de um dados longo (<em>long</em>) e criar um dados largo (<em>wide</em>). Essa é uma operação semelhante à “Tabela Dinâmica” das planilhas eletrônicas. Consiste em usar uma coluna para distribuir seus valores em outras colunas, de modo que os valores dos elementos são preenchidos corretamente, reduzindo assim o número de linhas e aumentando o número de colunas. Essa operação é bastante comum em Ecologia de Comunidades, quando queremos transformar uma lista de espécies em uma matriz de comunidades, com várias espécies nas colunas. Para realizar essa operação, usarmos a função <code>tidyr::pivot_wider()</code>. Dos diversos parâmetros que podem compor essa função, dois deles são fundamentais: <code>names_from</code> que indica a coluna de onde os nomes serão usados e <code>values_from</code> a coluna com os valores.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="cap5.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Selecionar colunas</span></span>
<span id="cb112-2"><a href="cap5.html#cb112-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">13</span>)]</span>
<span id="cb112-3"><a href="cap5.html#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_sel_col)</span>
<span id="cb112-4"><a href="cap5.html#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span id="cb112-5"><a href="cap5.html#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   `Sample Number` Species                             `Body Mass (g)`</span></span>
<span id="cb112-6"><a href="cap5.html#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             &lt;dbl&gt; &lt;chr&gt;                                         &lt;dbl&gt;</span></span>
<span id="cb112-7"><a href="cap5.html#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1               1 Adelie Penguin (Pygoscelis adeliae)            3750</span></span>
<span id="cb112-8"><a href="cap5.html#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2               2 Adelie Penguin (Pygoscelis adeliae)            3800</span></span>
<span id="cb112-9"><a href="cap5.html#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3               3 Adelie Penguin (Pygoscelis adeliae)            3250</span></span>
<span id="cb112-10"><a href="cap5.html#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4               4 Adelie Penguin (Pygoscelis adeliae)              NA</span></span>
<span id="cb112-11"><a href="cap5.html#cb112-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5               5 Adelie Penguin (Pygoscelis adeliae)            3450</span></span>
<span id="cb112-12"><a href="cap5.html#cb112-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6               6 Adelie Penguin (Pygoscelis adeliae)            3650</span></span>
<span id="cb112-13"><a href="cap5.html#cb112-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-14"><a href="cap5.html#cb112-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Pivotar para largo</span></span>
<span id="cb112-15"><a href="cap5.html#cb112-15" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_wider <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb112-16"><a href="cap5.html#cb112-16" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">names_from =</span> Species, </span>
<span id="cb112-17"><a href="cap5.html#cb112-17" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">values_from =</span> <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span>
<span id="cb112-18"><a href="cap5.html#cb112-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_pivot_wider)</span>
<span id="cb112-19"><a href="cap5.html#cb112-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span id="cb112-20"><a href="cap5.html#cb112-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   `Sample Number` `Adelie Penguin (Pygoscelis adeliae)` `Gentoo penguin (Pygoscelis papua)` `Chinstrap penguin (Pygosce…`</span></span>
<span id="cb112-21"><a href="cap5.html#cb112-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             &lt;dbl&gt;                                 &lt;dbl&gt;                               &lt;dbl&gt;                         &lt;dbl&gt;</span></span>
<span id="cb112-22"><a href="cap5.html#cb112-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1               1                                  3750                                4500                          3500</span></span>
<span id="cb112-23"><a href="cap5.html#cb112-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2               2                                  3800                                5700                          3900</span></span>
<span id="cb112-24"><a href="cap5.html#cb112-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3               3                                  3250                                4450                          3650</span></span>
<span id="cb112-25"><a href="cap5.html#cb112-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4               4                                    NA                                5700                          3525</span></span>
<span id="cb112-26"><a href="cap5.html#cb112-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5               5                                  3450                                5400                          3725</span></span>
<span id="cb112-27"><a href="cap5.html#cb112-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6               6                                  3650                                4550                          3950</span></span></code></pre></div>
<p>De modo oposto, podemos partir de um conjunto de dados largo (<em>wide</em>), ou seja, com várias colunas, e queremos que essas colunas preencham uma única coluna, e que os valores antes espalhados nessas várias colunas sejam adicionados um embaixo do outro, numa única coluna, no formato longo (<em>long</em>). Para essa operação, podemos utilizar a função <code>tidyr::pivot_longer()</code>. Novamente, dos diversos parâmetros que podem compor essa função, três deles são fundamentais: <code>cols</code> indicando as colunas que serão usadas para serem pivotadas, <code>names_to</code> que indica a coluna de onde os nomes serão usados e <code>values_to</code> a coluna com os valores.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="cap5.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Selecionar colunas</span></span>
<span id="cb113-2"><a href="cap5.html#cb113-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">10</span><span class="sc">:</span><span class="dv">13</span>)]</span>
<span id="cb113-3"><a href="cap5.html#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_sel_col)</span>
<span id="cb113-4"><a href="cap5.html#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb113-5"><a href="cap5.html#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   `Sample Number` Species                             `Culmen Length …` `Culmen Depth …` `Flipper Lengt…` `Body Mass (g)`</span></span>
<span id="cb113-6"><a href="cap5.html#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             &lt;dbl&gt; &lt;chr&gt;                                           &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span id="cb113-7"><a href="cap5.html#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1               1 Adelie Penguin (Pygoscelis adeliae)              39.1             18.7              181            3750</span></span>
<span id="cb113-8"><a href="cap5.html#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2               2 Adelie Penguin (Pygoscelis adeliae)              39.5             17.4              186            3800</span></span>
<span id="cb113-9"><a href="cap5.html#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3               3 Adelie Penguin (Pygoscelis adeliae)              40.3             18                195            3250</span></span>
<span id="cb113-10"><a href="cap5.html#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4               4 Adelie Penguin (Pygoscelis adeliae)              NA               NA                 NA              NA</span></span>
<span id="cb113-11"><a href="cap5.html#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5               5 Adelie Penguin (Pygoscelis adeliae)              36.7             19.3              193            3450</span></span>
<span id="cb113-12"><a href="cap5.html#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6               6 Adelie Penguin (Pygoscelis adeliae)              39.3             20.6              190            3650</span></span>
<span id="cb113-13"><a href="cap5.html#cb113-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-14"><a href="cap5.html#cb113-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Pivotar para largo</span></span>
<span id="cb113-15"><a href="cap5.html#cb113-15" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_longer <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb113-16"><a href="cap5.html#cb113-16" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">cols =</span> <span class="st">`</span><span class="at">Culmen Length (mm)</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>,</span>
<span id="cb113-17"><a href="cap5.html#cb113-17" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">names_to =</span> <span class="st">&quot;medidas&quot;</span>, </span>
<span id="cb113-18"><a href="cap5.html#cb113-18" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">values_to =</span> <span class="st">&quot;valores&quot;</span>)</span>
<span id="cb113-19"><a href="cap5.html#cb113-19" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw_pivot_longer)</span>
<span id="cb113-20"><a href="cap5.html#cb113-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span id="cb113-21"><a href="cap5.html#cb113-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   `Sample Number` Species                             medidas             valores</span></span>
<span id="cb113-22"><a href="cap5.html#cb113-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             &lt;dbl&gt; &lt;chr&gt;                               &lt;chr&gt;                 &lt;dbl&gt;</span></span>
<span id="cb113-23"><a href="cap5.html#cb113-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1               1 Adelie Penguin (Pygoscelis adeliae) Culmen Length (mm)     39.1</span></span>
<span id="cb113-24"><a href="cap5.html#cb113-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2               1 Adelie Penguin (Pygoscelis adeliae) Culmen Depth (mm)      18.7</span></span>
<span id="cb113-25"><a href="cap5.html#cb113-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3               1 Adelie Penguin (Pygoscelis adeliae) Flipper Length (mm)   181  </span></span>
<span id="cb113-26"><a href="cap5.html#cb113-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4               1 Adelie Penguin (Pygoscelis adeliae) Body Mass (g)        3750  </span></span>
<span id="cb113-27"><a href="cap5.html#cb113-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5               2 Adelie Penguin (Pygoscelis adeliae) Culmen Length (mm)     39.5</span></span>
<span id="cb113-28"><a href="cap5.html#cb113-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6               2 Adelie Penguin (Pygoscelis adeliae) Culmen Depth (mm)      17.4</span></span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do Capítulo 12 <a href="https://r4ds.had.co.nz/tidy-data.html">Tidy data</a> de Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.</p>
</div>
</div>
<div id="dplyr" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> dplyr</h2>
<p>O <code>dplyr</code> é um pacote que facilita a manipulação de dados, com uma gramática simples e flexível (por exemplo, como filtragem, reordenamento, seleção, entre outras). Ele foi construído com o intuito de obter uma forma mais rápida e expressiva de manipular dados tabulares. O <code>tibble</code> é a versão de data frame mais conveniente para se usar com pacote <code>dplyr</code>.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://dplyr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<div id="gramática" class="section level3" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Gramática</h3>
<p>Sua gramática simples contém funções verbais para manipulação de dados, baseada em:</p>
<ul>
<li>Verbos: <code>mutate()</code>, <code>select()</code>, <code>filter()</code>, <code>arrange()</code>, <code>summarise()</code>, <code>slice()</code>, <code>rename()</code>, etc.</li>
<li>Replicação: <code>across()</code>, <code>if_any()</code>, <code>if_all()</code>, <code>where()</code>, <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, etc.</li>
<li>Agrupamento: <code>group_by()</code> e <code>ungroup()</code></li>
<li>Junções: <code>inner_join()</code>, <code>full_join()</code>, <code>left_join()</code>, <code>right_join()</code>, etc.</li>
<li>Combinações: <code>bind_rows()</code> e <code>bind_cols()</code></li>
<li>Resumos, contagem e seleção: <code>n()</code>, <code>n_distinct()</code>, <code>first()</code>, <code>last()</code>, <code>nth()</code>, etc.</li>
</ul>
<p>Existe uma série de funções para realizar a manipulação dos dados, com diversas finalidades: manipulação de uma tabela, manipulação de duas tabelas, replicação, agrupamento, funções de vetores, além de muitas outras <a href="https://dplyr.tidyverse.org/reference/index.html">funções específicas</a>.</p>
<ul>
<li><code>relocate()</code>: muda a ordem das colunas</li>
<li><code>rename()</code>: muda o nome das colunas</li>
<li><code>select()</code>: seleciona colunas pelo nome ou posição</li>
<li><code>pull()</code>: seleciona uma coluna como vetor</li>
<li><code>mutate()</code>: adiciona novas colunas ou resultados em colunas existentes</li>
<li><code>arrange()</code>: reordena as linhas com base nos valores de colunas</li>
<li><code>filter()</code>: seleciona linhas com base em valores de colunas</li>
<li><code>slice()</code>: seleciona linhas de diferente formas</li>
<li><code>distinct()</code>: remove linhas com valores repetidos com base nos valores de colunas</li>
<li><code>count()</code>: conta observações para um grupo</li>
<li><code>group_by()</code>: agrupa linhas pelos valores das colunas</li>
<li><code>summarise()</code>: resume os dados através de funções considerando valores das colunas</li>
<li><code>*_join()</code>: funções que juntam dados de duas tabelas através de uma coluna chave</li>
</ul>
</div>
<div id="sintaxe" class="section level3" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Sintaxe</h3>
<p>As funções do <code>dplyr</code> podem seguir uma mesma sintaxe: o <code>tibble</code> será sempre o primeiro argumento dessas funções, seguido de um operador pipe (<code>%&gt;%</code>) e pelo nome da função que irá fazer a manipulação nesses dados. Isso permite o encadeamento de várias operações consecutivas mantendo a estrutura do dado original e acrescentando mudanças num encadeamento lógico.</p>
<p>Sendo assim, as funções verbais não precisam modificar necessariamente o tibble original, sendo que as operações de manipulações podem e devem ser atribuídas a um novo objeto.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="cap5.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Sintaxe</span></span>
<span id="cb114-2"><a href="cap5.html#cb114-2" aria-hidden="true" tabindex="-1"></a>tb_dplyr <span class="ot">&lt;-</span> tb <span class="sc">%&gt;%</span> </span>
<span id="cb114-3"><a href="cap5.html#cb114-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">funcao_verbal1</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb114-4"><a href="cap5.html#cb114-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">funcao_verbal2</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb114-5"><a href="cap5.html#cb114-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">funcao_verbal3</span>(argumento1, argumento2, ...)</span></code></pre></div>
<p>Além de <code>data.frames</code> e <code>tibbles</code>, a manipulação pelo formato <code>dplyr</code> torna o trabalho com outros formatos de classes e dados acessíveis e eficientes como <code>data.table</code>, SQL e Apache Spark, para os quais existem pacotes específicos.</p>
<ul>
<li><a href="https://dtplyr.tidyverse.org/"><em>dtplyr</em></a>: manipular conjuntos de dados <code>data.table</code></li>
<li><a href="https://dbplyr.tidyverse.org/"><em>dbplyr</em></a>: manipular conjuntos de dados SQL</li>
<li><a href="https://spark.rstudio.com/"><em>sparklyr</em></a>: manipular conjuntos de dados no Apache Spark</li>
</ul>
</div>
<div id="palmerpenguins-1" class="section level3" number="5.8.3">
<h3><span class="header-section-number">5.8.3</span> palmerpenguins</h3>
<p>Para nossos exemplos, vamos utilizar novamente os dados de pinguins <a href="https://allisonhorst.github.io/palmerpenguins"><em>palmerpenguins</em></a>. Esses dados estão disponíveis no pacote <code>palmerpenguins</code>. Vamos utilizar principalmente o conjunto de dados <code>penguins</code>, que é a versão simplificada dos dados brutos <code>penguins_raw</code>.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="cap5.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Carregar o pacote palmerpenguins</span></span>
<span id="cb115-2"><a href="cap5.html#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
</div>
<div id="relocate" class="section level3" number="5.8.4">
<h3><span class="header-section-number">5.8.4</span> relocate()</h3>
<p>Primeiramente, vamos reordenar as colunas com a função <code>dplyr::relocate()</code>, onde simplesmente listamos as colunas que queremos mudar de posição e para onde elas devem ir. Para esse último passo há dois argumentos: <code>.before</code> que indica a coluna onde a coluna realocada deve se mover antes, e o argumento <code>.after</code> indicando onde deve se mover depois. Ambos podem ser informados com os nomes ou posições dessas colunas com números.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="cap5.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Reordenar colunas - nome</span></span>
<span id="cb116-2"><a href="cap5.html#cb116-2" aria-hidden="true" tabindex="-1"></a>penguins_relocate_col <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb116-3"><a href="cap5.html#cb116-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> island)</span>
<span id="cb116-4"><a href="cap5.html#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_relocate_col)</span>
<span id="cb116-5"><a href="cap5.html#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb116-6"><a href="cap5.html#cb116-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    sex     year bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span id="cb116-7"><a href="cap5.html#cb116-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;fct&gt;  &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;</span></span>
<span id="cb116-8"><a href="cap5.html#cb116-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen male    2007           39.1          18.7               181        3750</span></span>
<span id="cb116-9"><a href="cap5.html#cb116-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen female  2007           39.5          17.4               186        3800</span></span>
<span id="cb116-10"><a href="cap5.html#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen female  2007           40.3          18                 195        3250</span></span>
<span id="cb116-11"><a href="cap5.html#cb116-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen &lt;NA&gt;    2007           NA            NA                  NA          NA</span></span>
<span id="cb116-12"><a href="cap5.html#cb116-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen female  2007           36.7          19.3               193        3450</span></span>
<span id="cb116-13"><a href="cap5.html#cb116-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen male    2007           39.3          20.6               190        3650</span></span>
<span id="cb116-14"><a href="cap5.html#cb116-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-15"><a href="cap5.html#cb116-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Reordenar colunas - posição</span></span>
<span id="cb116-16"><a href="cap5.html#cb116-16" aria-hidden="true" tabindex="-1"></a>penguins_relocate_ncol <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb116-17"><a href="cap5.html#cb116-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> <span class="dv">2</span>)</span>
<span id="cb116-18"><a href="cap5.html#cb116-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_relocate_ncol)</span>
<span id="cb116-19"><a href="cap5.html#cb116-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb116-20"><a href="cap5.html#cb116-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    sex     year bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span id="cb116-21"><a href="cap5.html#cb116-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;fct&gt;  &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;</span></span>
<span id="cb116-22"><a href="cap5.html#cb116-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen male    2007           39.1          18.7               181        3750</span></span>
<span id="cb116-23"><a href="cap5.html#cb116-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen female  2007           39.5          17.4               186        3800</span></span>
<span id="cb116-24"><a href="cap5.html#cb116-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen female  2007           40.3          18                 195        3250</span></span>
<span id="cb116-25"><a href="cap5.html#cb116-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen &lt;NA&gt;    2007           NA            NA                  NA          NA</span></span>
<span id="cb116-26"><a href="cap5.html#cb116-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen female  2007           36.7          19.3               193        3450</span></span>
<span id="cb116-27"><a href="cap5.html#cb116-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen male    2007           39.3          20.6               190        3650</span></span></code></pre></div>
</div>
<div id="rename" class="section level3" number="5.8.5">
<h3><span class="header-section-number">5.8.5</span> rename()</h3>
<p>Podemos renomear colunas facilmente com a função <code>dplyr::rename()</code>, onde primeiramente informamos o nome que queremos que a coluna tenha, seguido do operador <code>=</code> e a coluna do nosso dado (“nova_coluna = antiga_coluna”). Também podemos utilizar a função <code>dplyr::rename_with()</code>, que faz a mudança do nome em múltiplas colunas, que pode depender ou não de resultados booleanos.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="cap5.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Renomear as colunas</span></span>
<span id="cb117-2"><a href="cap5.html#cb117-2" aria-hidden="true" tabindex="-1"></a>penguins_rename <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="cap5.html#cb117-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">bill_length =</span> bill_length_mm,</span>
<span id="cb117-4"><a href="cap5.html#cb117-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bill_depth =</span> bill_depth_mm,</span>
<span id="cb117-5"><a href="cap5.html#cb117-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">flipper_length =</span> flipper_length_mm,</span>
<span id="cb117-6"><a href="cap5.html#cb117-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">body_mass =</span> body_mass_g)</span>
<span id="cb117-7"><a href="cap5.html#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_rename)</span>
<span id="cb117-8"><a href="cap5.html#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb117-9"><a href="cap5.html#cb117-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length bill_depth flipper_length body_mass sex     year</span></span>
<span id="cb117-10"><a href="cap5.html#cb117-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;      &lt;dbl&gt;          &lt;int&gt;     &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb117-11"><a href="cap5.html#cb117-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen        39.1       18.7            181      3750 male    2007</span></span>
<span id="cb117-12"><a href="cap5.html#cb117-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen        39.5       17.4            186      3800 female  2007</span></span>
<span id="cb117-13"><a href="cap5.html#cb117-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen        40.3       18              195      3250 female  2007</span></span>
<span id="cb117-14"><a href="cap5.html#cb117-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen        NA         NA               NA        NA &lt;NA&gt;    2007</span></span>
<span id="cb117-15"><a href="cap5.html#cb117-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen        36.7       19.3            193      3450 female  2007</span></span>
<span id="cb117-16"><a href="cap5.html#cb117-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen        39.3       20.6            190      3650 male    2007</span></span>
<span id="cb117-17"><a href="cap5.html#cb117-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-18"><a href="cap5.html#cb117-18" aria-hidden="true" tabindex="-1"></a><span class="do">## mudar o nome de todas as colunas</span></span>
<span id="cb117-19"><a href="cap5.html#cb117-19" aria-hidden="true" tabindex="-1"></a>penguins_rename_with <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb117-20"><a href="cap5.html#cb117-20" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename_with</span>(toupper)</span>
<span id="cb117-21"><a href="cap5.html#cb117-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_rename_with)</span>
<span id="cb117-22"><a href="cap5.html#cb117-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb117-23"><a href="cap5.html#cb117-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   SPECIES ISLAND    BILL_LENGTH_MM BILL_DEPTH_MM FLIPPER_LENGTH_MM BODY_MASS_G SEX     YEAR</span></span>
<span id="cb117-24"><a href="cap5.html#cb117-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb117-25"><a href="cap5.html#cb117-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb117-26"><a href="cap5.html#cb117-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb117-27"><a href="cap5.html#cb117-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb117-28"><a href="cap5.html#cb117-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007</span></span>
<span id="cb117-29"><a href="cap5.html#cb117-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb117-30"><a href="cap5.html#cb117-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007</span></span></code></pre></div>
</div>
<div id="select" class="section level3" number="5.8.6">
<h3><span class="header-section-number">5.8.6</span> select()</h3>
<p>Outra operação bastante usual dentro da manipulação de dados tabulares é a seleção de colunas. Podemos fazer essa operação com a função <code>dplyr::select()</code>, que seleciona colunas pelo nome ou pela sua posição. Aqui há uma série de possibilidades de seleção de colunas, desde utilizar operadores como <code>:</code> para selecionar intervalos de colunas, <code>!</code> para tomar o complemento (todas menos as listadas), além de funções como <code>dplyr::starts_with()</code>, <code>dplyr::ends_with()</code>, <code>dplyr::contains()</code> para procurar colunas com um padrão de texto do nome da coluna.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="cap5.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Selecionar colunas por posição</span></span>
<span id="cb118-2"><a href="cap5.html#cb118-2" aria-hidden="true" tabindex="-1"></a>penguins_select_position <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="cap5.html#cb118-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb118-4"><a href="cap5.html#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_select_position)</span>
<span id="cb118-5"><a href="cap5.html#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span id="cb118-6"><a href="cap5.html#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span id="cb118-7"><a href="cap5.html#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;</span></span>
<span id="cb118-8"><a href="cap5.html#cb118-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           39.1          18.7               181        3750</span></span>
<span id="cb118-9"><a href="cap5.html#cb118-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           39.5          17.4               186        3800</span></span>
<span id="cb118-10"><a href="cap5.html#cb118-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           40.3          18                 195        3250</span></span>
<span id="cb118-11"><a href="cap5.html#cb118-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA            NA                  NA          NA</span></span>
<span id="cb118-12"><a href="cap5.html#cb118-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           36.7          19.3               193        3450</span></span>
<span id="cb118-13"><a href="cap5.html#cb118-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           39.3          20.6               190        3650</span></span>
<span id="cb118-14"><a href="cap5.html#cb118-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-15"><a href="cap5.html#cb118-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Selecionar colunas por nomes</span></span>
<span id="cb118-16"><a href="cap5.html#cb118-16" aria-hidden="true" tabindex="-1"></a>penguins_select_names <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb118-17"><a href="cap5.html#cb118-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(bill_length_mm<span class="sc">:</span>body_mass_g)</span>
<span id="cb118-18"><a href="cap5.html#cb118-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_select_names)</span>
<span id="cb118-19"><a href="cap5.html#cb118-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span id="cb118-20"><a href="cap5.html#cb118-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span id="cb118-21"><a href="cap5.html#cb118-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;</span></span>
<span id="cb118-22"><a href="cap5.html#cb118-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           39.1          18.7               181        3750</span></span>
<span id="cb118-23"><a href="cap5.html#cb118-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           39.5          17.4               186        3800</span></span>
<span id="cb118-24"><a href="cap5.html#cb118-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           40.3          18                 195        3250</span></span>
<span id="cb118-25"><a href="cap5.html#cb118-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA            NA                  NA          NA</span></span>
<span id="cb118-26"><a href="cap5.html#cb118-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           36.7          19.3               193        3450</span></span>
<span id="cb118-27"><a href="cap5.html#cb118-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           39.3          20.6               190        3650</span></span>
<span id="cb118-28"><a href="cap5.html#cb118-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-29"><a href="cap5.html#cb118-29" aria-hidden="true" tabindex="-1"></a><span class="do">## Selecionar colunas por padrão</span></span>
<span id="cb118-30"><a href="cap5.html#cb118-30" aria-hidden="true" tabindex="-1"></a>penguins_select_contains <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb118-31"><a href="cap5.html#cb118-31" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;_mm&quot;</span>))</span>
<span id="cb118-32"><a href="cap5.html#cb118-32" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_select_contains)</span>
<span id="cb118-33"><a href="cap5.html#cb118-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span id="cb118-34"><a href="cap5.html#cb118-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   bill_length_mm bill_depth_mm flipper_length_mm</span></span>
<span id="cb118-35"><a href="cap5.html#cb118-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;</span></span>
<span id="cb118-36"><a href="cap5.html#cb118-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           39.1          18.7               181</span></span>
<span id="cb118-37"><a href="cap5.html#cb118-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           39.5          17.4               186</span></span>
<span id="cb118-38"><a href="cap5.html#cb118-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           40.3          18                 195</span></span>
<span id="cb118-39"><a href="cap5.html#cb118-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA            NA                  NA</span></span>
<span id="cb118-40"><a href="cap5.html#cb118-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           36.7          19.3               193</span></span>
<span id="cb118-41"><a href="cap5.html#cb118-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           39.3          20.6               190</span></span></code></pre></div>
</div>
<div id="pull" class="section level3" number="5.8.7">
<h3><span class="header-section-number">5.8.7</span> pull()</h3>
<p>Quando usamos a função <code>dplyr::select()</code>, mesmo que para apenas uma coluna, o retorno da função é sempre um <code>tibble</code>. Caso precisemos que essa coluna se torne um vetor dentro do encadeamento dos <code>pipes</code>, usamos a função <code>dplyr::pull()</code>, que extrai uma única coluna como vetor.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="cap5.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Coluna como vetor</span></span>
<span id="cb119-2"><a href="cap5.html#cb119-2" aria-hidden="true" tabindex="-1"></a>penguins_select_pull <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="cap5.html#cb119-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">pull</span>(bill_length_mm)</span>
<span id="cb119-4"><a href="cap5.html#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_select_pull, <span class="dv">15</span>)</span>
<span id="cb119-5"><a href="cap5.html#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] 39.1 39.5 40.3   NA 36.7 39.3 38.9 39.2 34.1 42.0 37.8 37.8 41.1 38.6 34.6</span></span></code></pre></div>
</div>
<div id="mutate" class="section level3" number="5.8.8">
<h3><span class="header-section-number">5.8.8</span> mutate()</h3>
<p>Uma das operações mais úteis dentre as operações para colunas é adicionar ou atualizar os valores de colunas. Para essa operação, usaremos a função <code>dplyr::mutate()</code>. Podemos ainda usar os argumentos <code>.before</code> e <code>.after</code> para indicar onde a nova coluna deve ficar, além do parâmetro <code>.keep</code> com diversas possibilidades de manter colunas depois de usar a função <code>dplyr::mutate()</code>. Por fim, é fundamental destacar o uso das funções de replicação: <code>dplyr::across()</code>, <code>dplyr::if_any()</code> e <code>dplyr::if_all()</code>, para os quais a função fará alterações em múltiplas colunas de uma vez, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="cap5.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Adicionar colunas</span></span>
<span id="cb120-2"><a href="cap5.html#cb120-2" aria-hidden="true" tabindex="-1"></a>penguins_mutate <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb120-3"><a href="cap5.html#cb120-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">body_mass_kg =</span> body_mass_g<span class="sc">/</span><span class="fl">1e3</span>, <span class="at">.before =</span> sex)</span>
<span id="cb120-4"><a href="cap5.html#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_mutate)</span>
<span id="cb120-5"><a href="cap5.html#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 9</span></span>
<span id="cb120-6"><a href="cap5.html#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g body_mass_kg sex     year</span></span>
<span id="cb120-7"><a href="cap5.html#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;        &lt;dbl&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb120-8"><a href="cap5.html#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750         3.75 male    2007</span></span>
<span id="cb120-9"><a href="cap5.html#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800         3.8  female  2007</span></span>
<span id="cb120-10"><a href="cap5.html#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250         3.25 female  2007</span></span>
<span id="cb120-11"><a href="cap5.html#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA        NA    &lt;NA&gt;    2007</span></span>
<span id="cb120-12"><a href="cap5.html#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450         3.45 female  2007</span></span>
<span id="cb120-13"><a href="cap5.html#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6               190        3650         3.65 male    2007</span></span>
<span id="cb120-14"><a href="cap5.html#cb120-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-15"><a href="cap5.html#cb120-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Modificar várias colunas</span></span>
<span id="cb120-16"><a href="cap5.html#cb120-16" aria-hidden="true" tabindex="-1"></a>penguins_mutate_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb120-17"><a href="cap5.html#cb120-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), as.character))</span>
<span id="cb120-18"><a href="cap5.html#cb120-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_mutate_across)</span>
<span id="cb120-19"><a href="cap5.html#cb120-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb120-20"><a href="cap5.html#cb120-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb120-21"><a href="cap5.html#cb120-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;chr&gt;  &lt;int&gt;</span></span>
<span id="cb120-22"><a href="cap5.html#cb120-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb120-23"><a href="cap5.html#cb120-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb120-24"><a href="cap5.html#cb120-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb120-25"><a href="cap5.html#cb120-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007</span></span>
<span id="cb120-26"><a href="cap5.html#cb120-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb120-27"><a href="cap5.html#cb120-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007</span></span></code></pre></div>
</div>
<div id="arrange" class="section level3" number="5.8.9">
<h3><span class="header-section-number">5.8.9</span> arrange()</h3>
<p>Além de operações em colunas, podemos fazer operações em linhas. Vamos começar com a reordenação das linhas com base nos valores das colunas. Para essa operação, usamos a função <code>dplyr::arrange()</code>. Podemos reordenar por uma ou mais colunas de forma crescente ou decrescente usando a função <code>desc()</code> ou o operador <code>-</code> antes da coluna de interesse. Da mesma forma que na função <code>dplyr::mutate()</code>, podemos usar as funções de replicação para ordenar as linhas para várias colunas de uma vez, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="cap5.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Reordenar linhas - crescente</span></span>
<span id="cb121-2"><a href="cap5.html#cb121-2" aria-hidden="true" tabindex="-1"></a>penguins_arrange <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb121-3"><a href="cap5.html#cb121-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(body_mass_g)</span>
<span id="cb121-4"><a href="cap5.html#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_arrange)</span>
<span id="cb121-5"><a href="cap5.html#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb121-6"><a href="cap5.html#cb121-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species   island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb121-7"><a href="cap5.html#cb121-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb121-8"><a href="cap5.html#cb121-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Chinstrap Dream               46.9          16.6               192        2700 female  2008</span></span>
<span id="cb121-9"><a href="cap5.html#cb121-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie    Biscoe              36.5          16.6               181        2850 female  2008</span></span>
<span id="cb121-10"><a href="cap5.html#cb121-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie    Biscoe              36.4          17.1               184        2850 female  2008</span></span>
<span id="cb121-11"><a href="cap5.html#cb121-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie    Biscoe              34.5          18.1               187        2900 female  2008</span></span>
<span id="cb121-12"><a href="cap5.html#cb121-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie    Dream               33.1          16.1               178        2900 female  2008</span></span>
<span id="cb121-13"><a href="cap5.html#cb121-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie    Torgersen           38.6          17                 188        2900 female  2009</span></span>
<span id="cb121-14"><a href="cap5.html#cb121-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-15"><a href="cap5.html#cb121-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Reordenar linhas - decrescente</span></span>
<span id="cb121-16"><a href="cap5.html#cb121-16" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb121-17"><a href="cap5.html#cb121-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(body_mass_g))</span>
<span id="cb121-18"><a href="cap5.html#cb121-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_arrange_desc)</span>
<span id="cb121-19"><a href="cap5.html#cb121-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb121-20"><a href="cap5.html#cb121-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex    year</span></span>
<span id="cb121-21"><a href="cap5.html#cb121-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt; &lt;int&gt;</span></span>
<span id="cb121-22"><a href="cap5.html#cb121-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Gentoo  Biscoe           49.2          15.2               221        6300 male   2007</span></span>
<span id="cb121-23"><a href="cap5.html#cb121-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Gentoo  Biscoe           59.6          17                 230        6050 male   2007</span></span>
<span id="cb121-24"><a href="cap5.html#cb121-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Gentoo  Biscoe           51.1          16.3               220        6000 male   2008</span></span>
<span id="cb121-25"><a href="cap5.html#cb121-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Gentoo  Biscoe           48.8          16.2               222        6000 male   2009</span></span>
<span id="cb121-26"><a href="cap5.html#cb121-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Gentoo  Biscoe           45.2          16.4               223        5950 male   2008</span></span>
<span id="cb121-27"><a href="cap5.html#cb121-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Gentoo  Biscoe           49.8          15.9               229        5950 male   2009</span></span>
<span id="cb121-28"><a href="cap5.html#cb121-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-29"><a href="cap5.html#cb121-29" aria-hidden="true" tabindex="-1"></a><span class="do">## Reordenar linhas - decrescente</span></span>
<span id="cb121-30"><a href="cap5.html#cb121-30" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc_m <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb121-31"><a href="cap5.html#cb121-31" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>body_mass_g)</span>
<span id="cb121-32"><a href="cap5.html#cb121-32" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_arrange_desc_m)</span>
<span id="cb121-33"><a href="cap5.html#cb121-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb121-34"><a href="cap5.html#cb121-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex    year</span></span>
<span id="cb121-35"><a href="cap5.html#cb121-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt; &lt;int&gt;</span></span>
<span id="cb121-36"><a href="cap5.html#cb121-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Gentoo  Biscoe           49.2          15.2               221        6300 male   2007</span></span>
<span id="cb121-37"><a href="cap5.html#cb121-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Gentoo  Biscoe           59.6          17                 230        6050 male   2007</span></span>
<span id="cb121-38"><a href="cap5.html#cb121-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Gentoo  Biscoe           51.1          16.3               220        6000 male   2008</span></span>
<span id="cb121-39"><a href="cap5.html#cb121-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Gentoo  Biscoe           48.8          16.2               222        6000 male   2009</span></span>
<span id="cb121-40"><a href="cap5.html#cb121-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Gentoo  Biscoe           45.2          16.4               223        5950 male   2008</span></span>
<span id="cb121-41"><a href="cap5.html#cb121-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Gentoo  Biscoe           49.8          15.9               229        5950 male   2009</span></span>
<span id="cb121-42"><a href="cap5.html#cb121-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-43"><a href="cap5.html#cb121-43" aria-hidden="true" tabindex="-1"></a><span class="do">## Reordenar linhas - multiplas colunas</span></span>
<span id="cb121-44"><a href="cap5.html#cb121-44" aria-hidden="true" tabindex="-1"></a>penguins_arrange_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb121-45"><a href="cap5.html#cb121-45" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))</span>
<span id="cb121-46"><a href="cap5.html#cb121-46" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_arrange_across)</span>
<span id="cb121-47"><a href="cap5.html#cb121-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb121-48"><a href="cap5.html#cb121-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb121-49"><a href="cap5.html#cb121-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb121-50"><a href="cap5.html#cb121-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Dream               32.1          15.5               188        3050 female  2009</span></span>
<span id="cb121-51"><a href="cap5.html#cb121-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Dream               33.1          16.1               178        2900 female  2008</span></span>
<span id="cb121-52"><a href="cap5.html#cb121-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           33.5          19                 190        3600 female  2008</span></span>
<span id="cb121-53"><a href="cap5.html#cb121-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Dream               34            17.1               185        3400 female  2008</span></span>
<span id="cb121-54"><a href="cap5.html#cb121-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           34.1          18.1               193        3475 &lt;NA&gt;    2007</span></span>
<span id="cb121-55"><a href="cap5.html#cb121-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           34.4          18.4               184        3325 female  2007</span></span></code></pre></div>
</div>
<div id="filter" class="section level3" number="5.8.10">
<h3><span class="header-section-number">5.8.10</span> filter()</h3>
<p>Uma das principais e mais usuais operações que podemos realizar em linhas é a seleção de linhas através do filtro por valores de uma ou mais colunas, utilizando a função <code>dplyr::filter()</code>. Para realizar os filtros utilizaremos grande parte dos operadores relacionais e lógicos que listamos na Tabela <a href="cap4.html#tab:tab-operadores">4.1</a> no Capítulo <a href="cap4.html#cap4">4</a>, especialmente os lógicos para combinações de filtros em mais de uma coluna. Além desses operadores, podemos utilizar a função <code>is.na()</code> para filtros em elementos faltantes, e as funções <code>dplyr::between()</code> e <code>dplyr::near()</code> para filtros entre valores, e para valores próximos com certa tolerância, respectivamente. Por fim, podemos usar as funções de replicação para filtro das linhas para mais de uma coluna, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="cap5.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtrar linhas</span></span>
<span id="cb122-2"><a href="cap5.html#cb122-2" aria-hidden="true" tabindex="-1"></a>penguins_filter <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb122-3"><a href="cap5.html#cb122-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span>)</span>
<span id="cb122-4"><a href="cap5.html#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_filter)</span>
<span id="cb122-5"><a href="cap5.html#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb122-6"><a href="cap5.html#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb122-7"><a href="cap5.html#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb122-8"><a href="cap5.html#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb122-9"><a href="cap5.html#cb122-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb122-10"><a href="cap5.html#cb122-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb122-11"><a href="cap5.html#cb122-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007</span></span>
<span id="cb122-12"><a href="cap5.html#cb122-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb122-13"><a href="cap5.html#cb122-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007</span></span>
<span id="cb122-14"><a href="cap5.html#cb122-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-15"><a href="cap5.html#cb122-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtrar linhas</span></span>
<span id="cb122-16"><a href="cap5.html#cb122-16" aria-hidden="true" tabindex="-1"></a>penguins_filter_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb122-17"><a href="cap5.html#cb122-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb122-18"><a href="cap5.html#cb122-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_filter_two)</span>
<span id="cb122-19"><a href="cap5.html#cb122-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb122-20"><a href="cap5.html#cb122-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb122-21"><a href="cap5.html#cb122-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb122-22"><a href="cap5.html#cb122-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb122-23"><a href="cap5.html#cb122-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb122-24"><a href="cap5.html#cb122-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb122-25"><a href="cap5.html#cb122-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           38.9          17.8               181        3625 female  2007</span></span>
<span id="cb122-26"><a href="cap5.html#cb122-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           41.1          17.6               182        3200 female  2007</span></span>
<span id="cb122-27"><a href="cap5.html#cb122-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           36.6          17.8               185        3700 female  2007</span></span>
<span id="cb122-28"><a href="cap5.html#cb122-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-29"><a href="cap5.html#cb122-29" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtrar linhas</span></span>
<span id="cb122-30"><a href="cap5.html#cb122-30" aria-hidden="true" tabindex="-1"></a>penguins_filter_in <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb122-31"><a href="cap5.html#cb122-31" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>),</span>
<span id="cb122-32"><a href="cap5.html#cb122-32" aria-hidden="true" tabindex="-1"></a>                  sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb122-33"><a href="cap5.html#cb122-33" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_filter_in)</span>
<span id="cb122-34"><a href="cap5.html#cb122-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb122-35"><a href="cap5.html#cb122-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb122-36"><a href="cap5.html#cb122-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb122-37"><a href="cap5.html#cb122-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb122-38"><a href="cap5.html#cb122-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb122-39"><a href="cap5.html#cb122-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb122-40"><a href="cap5.html#cb122-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           38.9          17.8               181        3625 female  2007</span></span>
<span id="cb122-41"><a href="cap5.html#cb122-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           41.1          17.6               182        3200 female  2007</span></span>
<span id="cb122-42"><a href="cap5.html#cb122-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           36.6          17.8               185        3700 female  2007</span></span>
<span id="cb122-43"><a href="cap5.html#cb122-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-44"><a href="cap5.html#cb122-44" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtrar linhas - NA</span></span>
<span id="cb122-45"><a href="cap5.html#cb122-45" aria-hidden="true" tabindex="-1"></a>penguins_filter_na <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb122-46"><a href="cap5.html#cb122-46" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex) <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb122-47"><a href="cap5.html#cb122-47" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_filter_na)</span>
<span id="cb122-48"><a href="cap5.html#cb122-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb122-49"><a href="cap5.html#cb122-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb122-50"><a href="cap5.html#cb122-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb122-51"><a href="cap5.html#cb122-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb122-52"><a href="cap5.html#cb122-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb122-53"><a href="cap5.html#cb122-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb122-54"><a href="cap5.html#cb122-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb122-55"><a href="cap5.html#cb122-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           39.3          20.6               190        3650 male    2007</span></span>
<span id="cb122-56"><a href="cap5.html#cb122-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           38.9          17.8               181        3625 female  2007</span></span>
<span id="cb122-57"><a href="cap5.html#cb122-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-58"><a href="cap5.html#cb122-58" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtrar linhas - intervalos</span></span>
<span id="cb122-59"><a href="cap5.html#cb122-59" aria-hidden="true" tabindex="-1"></a>penguins_filter_between <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb122-60"><a href="cap5.html#cb122-60" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">between</span>(body_mass_g, <span class="dv">3000</span>, <span class="dv">4000</span>))</span>
<span id="cb122-61"><a href="cap5.html#cb122-61" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_filter_between)</span>
<span id="cb122-62"><a href="cap5.html#cb122-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb122-63"><a href="cap5.html#cb122-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb122-64"><a href="cap5.html#cb122-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb122-65"><a href="cap5.html#cb122-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb122-66"><a href="cap5.html#cb122-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb122-67"><a href="cap5.html#cb122-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb122-68"><a href="cap5.html#cb122-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb122-69"><a href="cap5.html#cb122-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           39.3          20.6               190        3650 male    2007</span></span>
<span id="cb122-70"><a href="cap5.html#cb122-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           38.9          17.8               181        3625 female  2007</span></span>
<span id="cb122-71"><a href="cap5.html#cb122-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-72"><a href="cap5.html#cb122-72" aria-hidden="true" tabindex="-1"></a><span class="do">## Filtrar linhas por várias colunas</span></span>
<span id="cb122-73"><a href="cap5.html#cb122-73" aria-hidden="true" tabindex="-1"></a>penguins_filter_if <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb122-74"><a href="cap5.html#cb122-74" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">if_all</span>(<span class="fu">where</span>(is.integer), <span class="sc">~</span> . <span class="sc">&gt;</span> <span class="dv">200</span>))</span>
<span id="cb122-75"><a href="cap5.html#cb122-75" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_filter_if)</span>
<span id="cb122-76"><a href="cap5.html#cb122-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb122-77"><a href="cap5.html#cb122-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb122-78"><a href="cap5.html#cb122-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb122-79"><a href="cap5.html#cb122-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Dream               35.7          18                 202        3550 female  2008</span></span>
<span id="cb122-80"><a href="cap5.html#cb122-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Dream               41.1          18.1               205        4300 male    2008</span></span>
<span id="cb122-81"><a href="cap5.html#cb122-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Dream               40.8          18.9               208        4300 male    2008</span></span>
<span id="cb122-82"><a href="cap5.html#cb122-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Biscoe              41            20                 203        4725 male    2009</span></span>
<span id="cb122-83"><a href="cap5.html#cb122-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           41.4          18.5               202        3875 male    2009</span></span>
<span id="cb122-84"><a href="cap5.html#cb122-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           44.1          18                 210        4000 male    2009</span></span></code></pre></div>
</div>
<div id="slice" class="section level3" number="5.8.11">
<h3><span class="header-section-number">5.8.11</span> slice()</h3>
<p>Além da seleção de linhas por filtros, podemos fazer a seleção das linhas por intervalos, indicando quais linhas desejamos, usando a função <code>dplyr::slice()</code>, e informando o argumento <code>n</code> para o número da linha ou intervalo das linhas. Essa função possui variações no sufixo muito interessantes: <code>dplyr::slice_head()</code> e <code>dplyr::slice_tail()</code> seleciona as primeiras e últimas linhas, <code>dplyr::slice_min()</code> e <code>dplyr::slice_max()</code> seleciona linhas com os maiores e menores valores de uma coluna, e <code>dplyr::slice_sample()</code> seleciona linhas aleatoriamente.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="cap5.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Seleciona linhas</span></span>
<span id="cb123-2"><a href="cap5.html#cb123-2" aria-hidden="true" tabindex="-1"></a>penguins_slice <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb123-3"><a href="cap5.html#cb123-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="at">n =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">300</span><span class="sc">:</span><span class="fu">n</span>()))</span>
<span id="cb123-4"><a href="cap5.html#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_slice)</span>
<span id="cb123-5"><a href="cap5.html#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb123-6"><a href="cap5.html#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species   island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb123-7"><a href="cap5.html#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb123-8"><a href="cap5.html#cb123-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie    Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb123-9"><a href="cap5.html#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie    Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb123-10"><a href="cap5.html#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Chinstrap Dream               50.6          19.4               193        3800 male    2007</span></span>
<span id="cb123-11"><a href="cap5.html#cb123-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Chinstrap Dream               46.7          17.9               195        3300 female  2007</span></span>
<span id="cb123-12"><a href="cap5.html#cb123-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Chinstrap Dream               52            19                 197        4150 male    2007</span></span>
<span id="cb123-13"><a href="cap5.html#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Chinstrap Dream               50.5          18.4               200        3400 female  2008</span></span>
<span id="cb123-14"><a href="cap5.html#cb123-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-15"><a href="cap5.html#cb123-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Seleciona linhas - head</span></span>
<span id="cb123-16"><a href="cap5.html#cb123-16" aria-hidden="true" tabindex="-1"></a>penguins_slice_head <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb123-17"><a href="cap5.html#cb123-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb123-18"><a href="cap5.html#cb123-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_slice_head)</span>
<span id="cb123-19"><a href="cap5.html#cb123-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 8</span></span>
<span id="cb123-20"><a href="cap5.html#cb123-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb123-21"><a href="cap5.html#cb123-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb123-22"><a href="cap5.html#cb123-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb123-23"><a href="cap5.html#cb123-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb123-24"><a href="cap5.html#cb123-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb123-25"><a href="cap5.html#cb123-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007</span></span>
<span id="cb123-26"><a href="cap5.html#cb123-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb123-27"><a href="cap5.html#cb123-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-28"><a href="cap5.html#cb123-28" aria-hidden="true" tabindex="-1"></a><span class="do">## Seleciona linhas - max</span></span>
<span id="cb123-29"><a href="cap5.html#cb123-29" aria-hidden="true" tabindex="-1"></a>penguins_slice_max <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb123-30"><a href="cap5.html#cb123-30" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_max</span>(body_mass_g, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb123-31"><a href="cap5.html#cb123-31" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_slice_max)</span>
<span id="cb123-32"><a href="cap5.html#cb123-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb123-33"><a href="cap5.html#cb123-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex    year</span></span>
<span id="cb123-34"><a href="cap5.html#cb123-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt; &lt;int&gt;</span></span>
<span id="cb123-35"><a href="cap5.html#cb123-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Gentoo  Biscoe           49.2          15.2               221        6300 male   2007</span></span>
<span id="cb123-36"><a href="cap5.html#cb123-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Gentoo  Biscoe           59.6          17                 230        6050 male   2007</span></span>
<span id="cb123-37"><a href="cap5.html#cb123-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Gentoo  Biscoe           51.1          16.3               220        6000 male   2008</span></span>
<span id="cb123-38"><a href="cap5.html#cb123-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Gentoo  Biscoe           48.8          16.2               222        6000 male   2009</span></span>
<span id="cb123-39"><a href="cap5.html#cb123-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Gentoo  Biscoe           45.2          16.4               223        5950 male   2008</span></span>
<span id="cb123-40"><a href="cap5.html#cb123-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Gentoo  Biscoe           49.8          15.9               229        5950 male   2009</span></span>
<span id="cb123-41"><a href="cap5.html#cb123-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-42"><a href="cap5.html#cb123-42" aria-hidden="true" tabindex="-1"></a><span class="do">## Seleciona linhas - sample</span></span>
<span id="cb123-43"><a href="cap5.html#cb123-43" aria-hidden="true" tabindex="-1"></a>penguins_slice_sample <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb123-44"><a href="cap5.html#cb123-44" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>)</span>
<span id="cb123-45"><a href="cap5.html#cb123-45" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_slice_sample)</span>
<span id="cb123-46"><a href="cap5.html#cb123-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb123-47"><a href="cap5.html#cb123-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb123-48"><a href="cap5.html#cb123-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb123-49"><a href="cap5.html#cb123-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Biscoe              41.3          21.1               195        4400 male    2008</span></span>
<span id="cb123-50"><a href="cap5.html#cb123-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Gentoo  Biscoe              44.5          15.7               217        4875 &lt;NA&gt;    2009</span></span>
<span id="cb123-51"><a href="cap5.html#cb123-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           41.4          18.5               202        3875 male    2009</span></span>
<span id="cb123-52"><a href="cap5.html#cb123-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Biscoe              37.6          17                 185        3600 female  2008</span></span>
<span id="cb123-53"><a href="cap5.html#cb123-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Dream               36            17.9               190        3450 female  2007</span></span>
<span id="cb123-54"><a href="cap5.html#cb123-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Biscoe              35.7          16.9               185        3150 female  2008</span></span></code></pre></div>
</div>
<div id="distinct" class="section level3" number="5.8.12">
<h3><span class="header-section-number">5.8.12</span> distinct()</h3>
<p>A última operação que apresentaremos para linhas é a retirada de linhas com valores repetidos com base nos valores de uma ou mais colunas, utilizando a função <code>dplyr::distinct()</code>. Essa função por padrão retorna apenas a(s) coluna(s) utilizada(s) para retirar as linhas com valores repetidos, sendo necessário acrescentar o argumento <code>.keep_all = TRUE</code> para retornar todas as colunas. Por fim, podemos usar as funções de replicação para retirar linhas com valores repetidos para mais de uma coluna, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="cap5.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Retirar linhas com valores repetidos</span></span>
<span id="cb124-2"><a href="cap5.html#cb124-2" aria-hidden="true" tabindex="-1"></a>penguins_distinct <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb124-3"><a href="cap5.html#cb124-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g)</span>
<span id="cb124-4"><a href="cap5.html#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_distinct)</span>
<span id="cb124-5"><a href="cap5.html#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 1</span></span>
<span id="cb124-6"><a href="cap5.html#cb124-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   body_mass_g</span></span>
<span id="cb124-7"><a href="cap5.html#cb124-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         &lt;int&gt;</span></span>
<span id="cb124-8"><a href="cap5.html#cb124-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1        3750</span></span>
<span id="cb124-9"><a href="cap5.html#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2        3800</span></span>
<span id="cb124-10"><a href="cap5.html#cb124-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3        3250</span></span>
<span id="cb124-11"><a href="cap5.html#cb124-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          NA</span></span>
<span id="cb124-12"><a href="cap5.html#cb124-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5        3450</span></span>
<span id="cb124-13"><a href="cap5.html#cb124-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6        3650</span></span>
<span id="cb124-14"><a href="cap5.html#cb124-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-15"><a href="cap5.html#cb124-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Retirar linhas com valores repetidos - manter as outras colunas</span></span>
<span id="cb124-16"><a href="cap5.html#cb124-16" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb124-17"><a href="cap5.html#cb124-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb124-18"><a href="cap5.html#cb124-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_distinct_keep_all)</span>
<span id="cb124-19"><a href="cap5.html#cb124-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb124-20"><a href="cap5.html#cb124-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb124-21"><a href="cap5.html#cb124-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb124-22"><a href="cap5.html#cb124-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb124-23"><a href="cap5.html#cb124-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb124-24"><a href="cap5.html#cb124-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb124-25"><a href="cap5.html#cb124-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007</span></span>
<span id="cb124-26"><a href="cap5.html#cb124-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb124-27"><a href="cap5.html#cb124-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007</span></span>
<span id="cb124-28"><a href="cap5.html#cb124-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-29"><a href="cap5.html#cb124-29" aria-hidden="true" tabindex="-1"></a><span class="do">## Retirar linhas com valores repetidos para várias colunas</span></span>
<span id="cb124-30"><a href="cap5.html#cb124-30" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb124-31"><a href="cap5.html#cb124-31" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">distinct</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.integer)), <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb124-32"><a href="cap5.html#cb124-32" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_distinct_keep_all_across)</span>
<span id="cb124-33"><a href="cap5.html#cb124-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb124-34"><a href="cap5.html#cb124-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb124-35"><a href="cap5.html#cb124-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb124-36"><a href="cap5.html#cb124-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb124-37"><a href="cap5.html#cb124-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb124-38"><a href="cap5.html#cb124-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb124-39"><a href="cap5.html#cb124-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007</span></span>
<span id="cb124-40"><a href="cap5.html#cb124-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb124-41"><a href="cap5.html#cb124-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007</span></span></code></pre></div>
</div>
<div id="count" class="section level3" number="5.8.13">
<h3><span class="header-section-number">5.8.13</span> count()</h3>
<p>Agora entraremos no assunto de resumo das observações. Podemos fazer contagens resumos dos nossos dados, utilizando para isso a função <code>dplyr::count()</code>. Essa função contará valores de uma ou mais colunas, geralmente para variáveis categóricas, semelhante à função Base R <code>table()</code>, mas num contexto <em>tidyverse</em>.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="cap5.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Contagens de valores para uma coluna</span></span>
<span id="cb125-2"><a href="cap5.html#cb125-2" aria-hidden="true" tabindex="-1"></a>penguins_count <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb125-3"><a href="cap5.html#cb125-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">count</span>(species)</span>
<span id="cb125-4"><a href="cap5.html#cb125-4" aria-hidden="true" tabindex="-1"></a>penguins_count</span>
<span id="cb125-5"><a href="cap5.html#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb125-6"><a href="cap5.html#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species       n</span></span>
<span id="cb125-7"><a href="cap5.html#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb125-8"><a href="cap5.html#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie      152</span></span>
<span id="cb125-9"><a href="cap5.html#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Chinstrap    68</span></span>
<span id="cb125-10"><a href="cap5.html#cb125-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Gentoo      124</span></span>
<span id="cb125-11"><a href="cap5.html#cb125-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-12"><a href="cap5.html#cb125-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Contagens de valores para mais de uma coluna</span></span>
<span id="cb125-13"><a href="cap5.html#cb125-13" aria-hidden="true" tabindex="-1"></a>penguins_count_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb125-14"><a href="cap5.html#cb125-14" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">count</span>(species, island)</span>
<span id="cb125-15"><a href="cap5.html#cb125-15" aria-hidden="true" tabindex="-1"></a>penguins_count_two</span>
<span id="cb125-16"><a href="cap5.html#cb125-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb125-17"><a href="cap5.html#cb125-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species   island        n</span></span>
<span id="cb125-18"><a href="cap5.html#cb125-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb125-19"><a href="cap5.html#cb125-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie    Biscoe       44</span></span>
<span id="cb125-20"><a href="cap5.html#cb125-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie    Dream        56</span></span>
<span id="cb125-21"><a href="cap5.html#cb125-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie    Torgersen    52</span></span>
<span id="cb125-22"><a href="cap5.html#cb125-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Chinstrap Dream        68</span></span>
<span id="cb125-23"><a href="cap5.html#cb125-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Gentoo    Biscoe      124</span></span></code></pre></div>
</div>
<div id="group_by" class="section level3" number="5.8.14">
<h3><span class="header-section-number">5.8.14</span> group_by()</h3>
<p>Uma grande parte das operações feitas nos dados são realizadas em grupos definidos por valores de colunas com dados categóricas. A função <code>dplyr::group_by()</code> transforma um <code>tibble</code> em um <code>tibble grouped</code>, onde as operações são realizadas “por grupo.” Essa função é utilizada geralmente junto com a função <code>dplyr::summarise()</code>, que veremos logo em seguida. O agrupamento não altera a aparência dos dados (além de informar como estão agrupados). A função <code>dplyr::ungroup()</code> remove o agrupamento. Podemos ainda usar funções de replicação para fazer os agrupamentos para mais de uma coluna, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="cap5.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Agrupamento</span></span>
<span id="cb126-2"><a href="cap5.html#cb126-2" aria-hidden="true" tabindex="-1"></a>penguins_group_by <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb126-3"><a href="cap5.html#cb126-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(species)</span>
<span id="cb126-4"><a href="cap5.html#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_group_by)</span>
<span id="cb126-5"><a href="cap5.html#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb126-6"><a href="cap5.html#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   species [1]</span></span>
<span id="cb126-7"><a href="cap5.html#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb126-8"><a href="cap5.html#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb126-9"><a href="cap5.html#cb126-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb126-10"><a href="cap5.html#cb126-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb126-11"><a href="cap5.html#cb126-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb126-12"><a href="cap5.html#cb126-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007</span></span>
<span id="cb126-13"><a href="cap5.html#cb126-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb126-14"><a href="cap5.html#cb126-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007</span></span>
<span id="cb126-15"><a href="cap5.html#cb126-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-16"><a href="cap5.html#cb126-16" aria-hidden="true" tabindex="-1"></a><span class="do">## Agrupamento de várias colunas</span></span>
<span id="cb126-17"><a href="cap5.html#cb126-17" aria-hidden="true" tabindex="-1"></a>penguins_group_by_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb126-18"><a href="cap5.html#cb126-18" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor)))</span>
<span id="cb126-19"><a href="cap5.html#cb126-19" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_group_by_across)</span>
<span id="cb126-20"><a href="cap5.html#cb126-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span id="cb126-21"><a href="cap5.html#cb126-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   species, island, sex [3]</span></span>
<span id="cb126-22"><a href="cap5.html#cb126-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb126-23"><a href="cap5.html#cb126-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb126-24"><a href="cap5.html#cb126-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb126-25"><a href="cap5.html#cb126-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb126-26"><a href="cap5.html#cb126-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb126-27"><a href="cap5.html#cb126-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007</span></span>
<span id="cb126-28"><a href="cap5.html#cb126-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb126-29"><a href="cap5.html#cb126-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007</span></span></code></pre></div>
</div>
<div id="summarise" class="section level3" number="5.8.15">
<h3><span class="header-section-number">5.8.15</span> summarise()</h3>
<p>Como dissemos, muitas vezes queremos resumir nossos dados, principalmente para ter uma noção geral das variáveis (colunas) ou mesmo começar a análise exploratória resumindo variáveis contínuas por grupos de variáveis categóricas. Dessa forma, ao utilizar a função <code>dplyr::summarise()</code> teremos um novo <code>tibble</code> com os dados resumidos, que é a agregação ou resumo dos dados através de funções. Da mesma forma que outras funções, podemos usar funções de replicação para resumir valores para mais de uma coluna, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="cap5.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Resumo</span></span>
<span id="cb127-2"><a href="cap5.html#cb127-2" aria-hidden="true" tabindex="-1"></a>penguins_summarise <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb127-3"><a href="cap5.html#cb127-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb127-4"><a href="cap5.html#cb127-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">body_mass_g_mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb127-5"><a href="cap5.html#cb127-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">body_mass_g_sd =</span> <span class="fu">sd</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb127-6"><a href="cap5.html#cb127-6" aria-hidden="true" tabindex="-1"></a>penguins_summarise</span>
<span id="cb127-7"><a href="cap5.html#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span id="cb127-8"><a href="cap5.html#cb127-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species   body_mass_g_mean body_mass_g_sd</span></span>
<span id="cb127-9"><a href="cap5.html#cb127-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;                &lt;dbl&gt;          &lt;dbl&gt;</span></span>
<span id="cb127-10"><a href="cap5.html#cb127-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie               3701.           459.</span></span>
<span id="cb127-11"><a href="cap5.html#cb127-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Chinstrap            3733.           384.</span></span>
<span id="cb127-12"><a href="cap5.html#cb127-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Gentoo               5076.           504.</span></span>
<span id="cb127-13"><a href="cap5.html#cb127-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-14"><a href="cap5.html#cb127-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Resumo para várias colunas</span></span>
<span id="cb127-15"><a href="cap5.html#cb127-15" aria-hidden="true" tabindex="-1"></a>penguins_summarise_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb127-16"><a href="cap5.html#cb127-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb127-17"><a href="cap5.html#cb127-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb127-18"><a href="cap5.html#cb127-18" aria-hidden="true" tabindex="-1"></a>penguins_summarise_across</span>
<span id="cb127-19"><a href="cap5.html#cb127-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 6</span></span>
<span id="cb127-20"><a href="cap5.html#cb127-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g  year</span></span>
<span id="cb127-21"><a href="cap5.html#cb127-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb127-22"><a href="cap5.html#cb127-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie              38.8          18.3              190.       3701. 2008.</span></span>
<span id="cb127-23"><a href="cap5.html#cb127-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Chinstrap           48.8          18.4              196.       3733. 2008.</span></span>
<span id="cb127-24"><a href="cap5.html#cb127-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Gentoo              47.5          15.0              217.       5076. 2008.</span></span></code></pre></div>
</div>
<div id="bind_rows-e-bind_cols" class="section level3" number="5.8.16">
<h3><span class="header-section-number">5.8.16</span> bind_rows() e bind_cols()</h3>
<p>Muitas vezes teremos de combinar duas ou mais tabelas de dados. Podemos utilizar as funções Base R <code>rbind()</code> e <code>cbind()</code>, como vimos no Capítulo <a href="cap4.html#cap4">4</a>. Entretanto, pode ser interessante avançar para as funções <code>dplyr::bind_rows()</code> e <code>dplyr::bind_cols()</code> do formato <em>tidyverse</em>. A ideia é muito semelhante: a primeira função combina dados por linhas e a segunda por colunas. Entretanto, há algumas vantagens no uso dessas funções, como a identificação das linhas pelo argumento <code>.id</code> para a primeira função, e a conferência do nome das colunas pelo argumento <code>.name_repair</code> para a segunda função.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="cap5.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Selecionar as linhas para dois tibbles</span></span>
<span id="cb128-2"><a href="cap5.html#cb128-2" aria-hidden="true" tabindex="-1"></a>penguins_01 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb128-3"><a href="cap5.html#cb128-3" aria-hidden="true" tabindex="-1"></a>penguins_02 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">51</span><span class="sc">:</span><span class="dv">55</span>)</span>
<span id="cb128-4"><a href="cap5.html#cb128-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-5"><a href="cap5.html#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Combinar as linhas</span></span>
<span id="cb128-6"><a href="cap5.html#cb128-6" aria-hidden="true" tabindex="-1"></a>penguins_bind_rows <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(penguins_01, penguins_02, <span class="at">.id =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb128-7"><a href="cap5.html#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_bind_rows)</span>
<span id="cb128-8"><a href="cap5.html#cb128-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 9</span></span>
<span id="cb128-9"><a href="cap5.html#cb128-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   id    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year</span></span>
<span id="cb128-10"><a href="cap5.html#cb128-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;</span></span>
<span id="cb128-11"><a href="cap5.html#cb128-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1     Adelie  Torgersen           39.1          18.7               181        3750 male    2007</span></span>
<span id="cb128-12"><a href="cap5.html#cb128-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1     Adelie  Torgersen           39.5          17.4               186        3800 female  2007</span></span>
<span id="cb128-13"><a href="cap5.html#cb128-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1     Adelie  Torgersen           40.3          18                 195        3250 female  2007</span></span>
<span id="cb128-14"><a href="cap5.html#cb128-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1     Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007</span></span>
<span id="cb128-15"><a href="cap5.html#cb128-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 1     Adelie  Torgersen           36.7          19.3               193        3450 female  2007</span></span>
<span id="cb128-16"><a href="cap5.html#cb128-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 2     Adelie  Biscoe              39.6          17.7               186        3500 female  2008</span></span>
<span id="cb128-17"><a href="cap5.html#cb128-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-18"><a href="cap5.html#cb128-18" aria-hidden="true" tabindex="-1"></a><span class="do">## Combinar as colunas</span></span>
<span id="cb128-19"><a href="cap5.html#cb128-19" aria-hidden="true" tabindex="-1"></a>penguins_bind_cols <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(penguins_01, penguins_02, <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span>)</span>
<span id="cb128-20"><a href="cap5.html#cb128-20" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_bind_cols)</span>
<span id="cb128-21"><a href="cap5.html#cb128-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 16</span></span>
<span id="cb128-22"><a href="cap5.html#cb128-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species...1 island...2 bill_length_mm..… bill_depth_mm..… flipper_length_… body_mass_g...6 sex...7 year...8 species...9</span></span>
<span id="cb128-23"><a href="cap5.html#cb128-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;                  &lt;dbl&gt;            &lt;dbl&gt;            &lt;int&gt;           &lt;int&gt; &lt;fct&gt;      &lt;int&gt; &lt;fct&gt;      </span></span>
<span id="cb128-24"><a href="cap5.html#cb128-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie      Torgersen               39.1             18.7              181            3750 male        2007 Adelie     </span></span>
<span id="cb128-25"><a href="cap5.html#cb128-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie      Torgersen               39.5             17.4              186            3800 female      2007 Adelie     </span></span>
<span id="cb128-26"><a href="cap5.html#cb128-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie      Torgersen               40.3             18                195            3250 female      2007 Adelie     </span></span>
<span id="cb128-27"><a href="cap5.html#cb128-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie      Torgersen               NA               NA                 NA              NA &lt;NA&gt;        2007 Adelie     </span></span>
<span id="cb128-28"><a href="cap5.html#cb128-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie      Torgersen               36.7             19.3              193            3450 female      2007 Adelie     </span></span>
<span id="cb128-29"><a href="cap5.html#cb128-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 7 more variables: island...10 &lt;fct&gt;, bill_length_mm...11 &lt;dbl&gt;, bill_depth_mm...12 &lt;dbl&gt;,</span></span>
<span id="cb128-30"><a href="cap5.html#cb128-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   flipper_length_mm...13 &lt;int&gt;, body_mass_g...14 &lt;int&gt;, sex...15 &lt;fct&gt;, year...16 &lt;int&gt;</span></span></code></pre></div>
</div>
<div id="join" class="section level3" number="5.8.17">
<h3><span class="header-section-number">5.8.17</span> *_join()</h3>
<p>Finalmente, veremos o último conjunto de funções do pacote <code>dplyr</code>, a junção de tabelas. Nessa operação, fazemos a combinação de pares de conjunto de dados tabulares por uma ou mais colunas chaves. Há dois tipos de junções: junção de modificação e junção de filtragem. A junção de modificação primeiro combina as observações por suas chaves e, em seguida, copia as variáveis (colunas) de uma tabela para a outra. É fundamental destacar a importância da coluna chave, que é indicada pelo argumento <code>by</code>. Essa coluna deve conter elementos que sejam comuns às duas tabelas para que haja a combinação dos elementos.</p>
<p>Existem quatro tipos de junções de modificações, que são realizadas pelas funções: <code>dplyr::inner_join()</code>, <code>dplyr::left_join()</code>, <code>dplyr::full_join()</code> e <code>dplyr::right_join()</code>, e que podem ser representadas na Figura <a href="cap5.html#fig:fig-r-join">5.3</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-r-join"></span>
<img src="img/cap05_fig03.png" alt="Diferentes tipos de joins, representados com um diagrama de Venn. Adaptado de: Wickham &amp; Grolemund [-@wickham2017]." width="100%" height="100%" />
<p class="caption">
Figura 5.3: Diferentes tipos de joins, representados com um diagrama de Venn. Adaptado de: Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.
</p>
</div>
<p>Considerando a nomenclatura de duas tabelas de dados por <code>x</code> e <code>y</code>, temos:</p>
<ul>
<li><code>inner_join(x, y)</code>: mantém apenas as observações em <code>x</code> e em <code>y</code></li>
<li><code>left_join(x, y)</code>: mantém todas as observações em <code>x</code></li>
<li><code>right_join(x, y)</code>: mantém todas as observações em <code>y</code></li>
<li><code>full_join(x, y)</code>: mantém todas as observações em <code>x</code> e em <code>y</code></li>
</ul>
<p>Aqui, vamos demostrar apenas a função <code>dplyr::left_join()</code>, combinando um <code>tibble</code> de coordenadas geográficas das ilhas com o conjunto de dados do penguins.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="cap5.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Adicionar uma coluna chave de ids</span></span>
<span id="cb129-2"><a href="cap5.html#cb129-2" aria-hidden="true" tabindex="-1"></a>penguin_islands <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb129-3"><a href="cap5.html#cb129-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">island =</span> <span class="fu">c</span>(<span class="st">&quot;Torgersen&quot;</span>, <span class="st">&quot;Biscoe&quot;</span>, <span class="st">&quot;Dream&quot;</span>, <span class="st">&quot;Alpha&quot;</span>),</span>
<span id="cb129-4"><a href="cap5.html#cb129-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">longitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.083333</span>, <span class="sc">-</span><span class="fl">63.775636</span>, <span class="sc">-</span><span class="fl">64.233333</span>, <span class="sc">-</span><span class="dv">63</span>),</span>
<span id="cb129-5"><a href="cap5.html#cb129-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">latitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.766667</span>, <span class="sc">-</span><span class="fl">64.818569</span>, <span class="sc">-</span><span class="fl">64.733333</span>, <span class="sc">-</span><span class="fl">64.316667</span>))</span>
<span id="cb129-6"><a href="cap5.html#cb129-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-7"><a href="cap5.html#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Junção - left</span></span>
<span id="cb129-8"><a href="cap5.html#cb129-8" aria-hidden="true" tabindex="-1"></a>penguins_left_join <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(penguins, penguin_islands, <span class="at">by =</span> <span class="st">&quot;island&quot;</span>)</span>
<span id="cb129-9"><a href="cap5.html#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_left_join)</span>
<span id="cb129-10"><a href="cap5.html#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 10</span></span>
<span id="cb129-11"><a href="cap5.html#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year longitude latitude</span></span>
<span id="cb129-12"><a href="cap5.html#cb129-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb129-13"><a href="cap5.html#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007     -64.1    -64.8</span></span>
<span id="cb129-14"><a href="cap5.html#cb129-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007     -64.1    -64.8</span></span>
<span id="cb129-15"><a href="cap5.html#cb129-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007     -64.1    -64.8</span></span>
<span id="cb129-16"><a href="cap5.html#cb129-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007     -64.1    -64.8</span></span>
<span id="cb129-17"><a href="cap5.html#cb129-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007     -64.1    -64.8</span></span>
<span id="cb129-18"><a href="cap5.html#cb129-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007     -64.1    -64.8</span></span></code></pre></div>
<p>Já o segundo tipo de junção, a junção de filtragem combina as observações da mesma maneira que as junções de modificação, mas afetam as observações (linhas), não as variáveis (colunas). Existem dois tipos.</p>
<ul>
<li><code>semi_join(x, y)</code>: mantém todas as observações em <code>x</code> que têm uma correspondência em <code>y</code></li>
<li><code>anti_join(x, y)</code>: elimina todas as observações em <code>x</code> que têm uma correspondência em <code>y</code></li>
</ul>
<p>De forma geral, <em>semi-joins</em> são úteis para corresponder tabelas de resumo filtradas de volta às linhas originais, removendo as linhas que não estavam antes do join. Já <em>anti-joins</em> são úteis para diagnosticar incompatibilidades de junção, por exemplo, ao verificar os elementos que não combinam entre duas tabelas de dados.</p>
</div>
<div id="operações-de-conjuntos-e-comparação-de-dados" class="section level3" number="5.8.18">
<h3><span class="header-section-number">5.8.18</span> Operações de conjuntos e comparação de dados</h3>
<p>Temos ainda operações de conjuntos e comparação de dados.</p>
<ul>
<li><code>union(x, y)</code>: retorna todas as linhas que aparecem em <code>x</code>, <code>y</code> ou mais dos conjuntos de dados</li>
<li><code>interesect(x, y)</code>: retorna apenas as linhas que aparecem em <code>x</code> e em <code>y</code></li>
<li><code>setdiff(x, y)</code>: retorna as linhas que aparecem <code>x</code>, mas não em <code>y</code></li>
<li><code>setequal(x, y)</code>: retorna se <code>x</code> e <code>y</code> são iguais e quais suas diferenças</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do Capítulo <a href="https://r4ds.had.co.nz/relational-data.html">13 Relational data</a> de Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.</p>
</div>
</div>
<div id="stringr" class="section level2" number="5.9">
<h2><span class="header-section-number">5.9</span> stringr</h2>
<p>O pacote <code>stringr</code> fornece um conjunto de funções para a manipulação de caracteres ou strings. O pacote concentra-se nas funções de manipulação mais importantes e comumente usadas. Para funções mais específicas, recomenda-se usar o pacote <code>stringi</code>, que fornece um conjunto mais abrangente de funções. As funções do <code>stringr</code> podem ser agrupadas em algumas operações para tarefas específicas como i) correspondência de padrões, ii)retirar e acrescentar espaços em branco, iii) mudar maiúsculas e minúsculas, além de muitas outras operações com caracteres.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://stringr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Demonstraremos algumas funções para algumas operações mais comuns, utilizando um vetor de um elemento, com o string “penguins.”</p>
<p>Podemos explorar o comprimento de strings com a função <code>stringr::str_length()</code>.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="cap5.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Comprimento</span></span>
<span id="cb130-2"><a href="cap5.html#cb130-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_length</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span>
<span id="cb130-3"><a href="cap5.html#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 8</span></span></code></pre></div>
<p>Extrair um string por sua posição usando a função <code>stringr::str_sub()</code> ou por um padrão com <code>stringr::str_extract()</code>.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="cap5.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Extrair pela posição</span></span>
<span id="cb131-2"><a href="cap5.html#cb131-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sub</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">end =</span> <span class="dv">3</span>)</span>
<span id="cb131-3"><a href="cap5.html#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;pen&quot;</span></span>
<span id="cb131-4"><a href="cap5.html#cb131-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-5"><a href="cap5.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Extrair por padrão</span></span>
<span id="cb131-6"><a href="cap5.html#cb131-6" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_extract</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;p&quot;</span>)</span>
<span id="cb131-7"><a href="cap5.html#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;p&quot;</span></span></code></pre></div>
<p>Substituir strings por outros strings com <code>stringr::str_replace()</code>.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="cap5.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Substituir</span></span>
<span id="cb132-2"><a href="cap5.html#cb132-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;i&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;y&quot;</span>)</span>
<span id="cb132-3"><a href="cap5.html#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;penguyns&quot;</span></span></code></pre></div>
<p>Separar strings por um padrão com a função <code>stringr::str_split()</code>.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="cap5.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Separar</span></span>
<span id="cb133-2"><a href="cap5.html#cb133-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="at">string =</span> <span class="st">&quot;p-e-n-g-u-i-n-s&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;-&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb133-3"><a href="cap5.html#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]</span></span>
<span id="cb133-4"><a href="cap5.html#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;p&quot;  &quot;e&quot;  &quot;n&quot;  &quot;g&quot;  &quot;u&quot;  &quot;i&quot;  &quot;n&quot;  &quot;s&quot;</span></span></code></pre></div>
<p>Inserir espaços em brancos pela esquerda, direita ou ambos com a função <code>stringr::str_pad()</code>.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="cap5.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Inserir espacos em branco</span></span>
<span id="cb134-2"><a href="cap5.html#cb134-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span>
<span id="cb134-3"><a href="cap5.html#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;  penguins&quot;</span></span>
<span id="cb134-4"><a href="cap5.html#cb134-4" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span>
<span id="cb134-5"><a href="cap5.html#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;penguins  &quot;</span></span>
<span id="cb134-6"><a href="cap5.html#cb134-6" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span>
<span id="cb134-7"><a href="cap5.html#cb134-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot; penguins &quot;</span></span></code></pre></div>
<p>Também podemos remover espaços em branco da esquerda, direita ou ambos, utilizando <code>stringr::str_trim()</code>.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="cap5.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Remover espacos em branco</span></span>
<span id="cb135-2"><a href="cap5.html#cb135-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span>
<span id="cb135-3"><a href="cap5.html#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;penguins &quot;</span></span>
<span id="cb135-4"><a href="cap5.html#cb135-4" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span>
<span id="cb135-5"><a href="cap5.html#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot; penguins&quot;</span></span>
<span id="cb135-6"><a href="cap5.html#cb135-6" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span>
<span id="cb135-7"><a href="cap5.html#cb135-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;penguins&quot;</span></span></code></pre></div>
<p>Podemos também alterar minúsculas e maiúsculas em diferentes posições do string, com várias funções.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="cap5.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Alterar minúsculas e maiúsculas</span></span>
<span id="cb136-2"><a href="cap5.html#cb136-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(<span class="at">string =</span> <span class="st">&quot;Penguins&quot;</span>)</span>
<span id="cb136-3"><a href="cap5.html#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;penguins&quot;</span></span>
<span id="cb136-4"><a href="cap5.html#cb136-4" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_upper</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span>
<span id="cb136-5"><a href="cap5.html#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;PENGUINS&quot;</span></span>
<span id="cb136-6"><a href="cap5.html#cb136-6" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_sentence</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span>
<span id="cb136-7"><a href="cap5.html#cb136-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Penguins&quot;</span></span>
<span id="cb136-8"><a href="cap5.html#cb136-8" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_title</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span>
<span id="cb136-9"><a href="cap5.html#cb136-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Penguins&quot;</span></span></code></pre></div>
<p>Podemos ainda ordenar os elementos de um vetor por ordem alfabética de forma crescente ou decrescente, usando <code>stringr::str_sort()</code>.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="cap5.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Ordenar</span></span>
<span id="cb137-2"><a href="cap5.html#cb137-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters)</span>
<span id="cb137-3"><a href="cap5.html#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot; &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</span></span>
<span id="cb137-4"><a href="cap5.html#cb137-4" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters, <span class="at">dec =</span> <span class="cn">TRUE</span>)</span>
<span id="cb137-5"><a href="cap5.html#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;z&quot; &quot;y&quot; &quot;x&quot; &quot;w&quot; &quot;v&quot; &quot;u&quot; &quot;t&quot; &quot;s&quot; &quot;r&quot; &quot;q&quot; &quot;p&quot; &quot;o&quot; &quot;n&quot; &quot;m&quot; &quot;l&quot; &quot;k&quot; &quot;j&quot; &quot;i&quot; &quot;h&quot; &quot;g&quot; &quot;f&quot; &quot;e&quot; &quot;d&quot; &quot;c&quot; &quot;b&quot; &quot;a&quot;</span></span></code></pre></div>
<p>Podemos ainda utilizar essas funções em complemento com o pacote <code>dplyr</code>, para alterar os strings de colunas ou nome das colunas.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="cap5.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Alterar valores das colunas</span></span>
<span id="cb138-2"><a href="cap5.html#cb138-2" aria-hidden="true" tabindex="-1"></a>penguins_stringr_valores <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb138-3"><a href="cap5.html#cb138-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">species =</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(species))</span>
<span id="cb138-4"><a href="cap5.html#cb138-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-5"><a href="cap5.html#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Alterar nome das colunas</span></span>
<span id="cb138-6"><a href="cap5.html#cb138-6" aria-hidden="true" tabindex="-1"></a>penguins_stringr_nomes <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb138-7"><a href="cap5.html#cb138-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rename_with</span>(stringr<span class="sc">::</span>str_to_title)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do Capítulo <a href="https://r4ds.had.co.nz/strings.html">14 Strings</a> de Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.</p>
</div>
<div id="forcats" class="section level2" number="5.10">
<h2><span class="header-section-number">5.10</span> forcats</h2>
<p>O pacote <code>forcats</code> fornece um conjunto de ferramentas úteis para facilitar a manipulação de fatores. Como dito no Capítulo <a href="cap4.html#cap4">4</a>, usamos fatores geralmente quando temos dados categóricos, que são variáveis que possuem um conjunto de valores fixos e conhecidos. As funções são utilizadas principalmente para: i) mudar a ordem dos níveis, ii) mudar os valores dos níveis, iii) adicionar e remover níveis, iv) combinar múltiplos níveis, além de outras operações.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://forcats.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Vamos utilizar ainda os dados <code>penguins</code> e <code>penguins_raw</code> para exemplificar o uso do pacote <code>forcats</code>.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="cap5.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Carregar o pacote palmerpenguins</span></span>
<span id="cb139-2"><a href="cap5.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
<p>Primeiramente, vamos converter dados de string para fator, utilizando a função <code>forcats::as_factor()</code>.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="cap5.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="do">## String</span></span>
<span id="cb140-2"><a href="cap5.html#cb140-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">as_factor</span>(penguins_raw<span class="sc">$</span>Species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb140-3"><a href="cap5.html#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)</span></span>
<span id="cb140-4"><a href="cap5.html#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)</span></span>
<span id="cb140-5"><a href="cap5.html#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Levels: Adelie Penguin (Pygoscelis adeliae) ... Chinstrap penguin (Pygoscelis antarctica)</span></span></code></pre></div>
<p>Podemos facilmente mudar o nome dos níveis utilizando a função <code>forcats::fct_recode()</code>.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="cap5.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Mudar o nome dos níveis</span></span>
<span id="cb141-2"><a href="cap5.html#cb141-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_recode</span>(penguins<span class="sc">$</span>species, <span class="at">a =</span> <span class="st">&quot;Adelie&quot;</span>, <span class="at">c =</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="at">g =</span> <span class="st">&quot;Gentoo&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb141-3"><a href="cap5.html#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] a a a a a a</span></span>
<span id="cb141-4"><a href="cap5.html#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: a c g</span></span></code></pre></div>
<p>Para inverter os níveis, usamos a função <code>forcats::fct_rev()</code>.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="cap5.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Inverter os níveis</span></span>
<span id="cb142-2"><a href="cap5.html#cb142-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_rev</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb142-3"><a href="cap5.html#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] Adelie Adelie Adelie Adelie Adelie Adelie</span></span>
<span id="cb142-4"><a href="cap5.html#cb142-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: Gentoo Chinstrap Adelie</span></span></code></pre></div>
<p>Uma operação muito comum com fatores é mudar a ordem dos níveis. Quando precisamos especificar a ordem dos níveis, podemos fazer essa operação manualmente com a função <code>forcats::fct_relevel()</code>.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="cap5.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Especificar a ordem dos níveis</span></span>
<span id="cb143-2"><a href="cap5.html#cb143-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_relevel</span>(penguins<span class="sc">$</span>species, <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Adelie&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb143-3"><a href="cap5.html#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] Adelie Adelie Adelie Adelie Adelie Adelie</span></span>
<span id="cb143-4"><a href="cap5.html#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: Chinstrap Gentoo Adelie</span></span></code></pre></div>
<p>Como vimos, a reordenação dos níveis pode ser feita manualmente. Mas existem outras formas automáticas de reordenação seguindo algumas regras, para as quais existem funções específicas.</p>
<ul>
<li><code>forcats::fct_inorder()</code>: pela ordem em que aparecem pela primeira vez</li>
<li><code>forcats::fct_infreq()</code>: por número de observações com cada nível (decrescente, i.e., o maior primeiro)</li>
<li><code>forcats::fct_inseq()</code>: pelo valor numérico do nível</li>
</ul>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="cap5.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Níveis pela ordem em que aparecem</span></span>
<span id="cb144-2"><a href="cap5.html#cb144-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb144-3"><a href="cap5.html#cb144-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] Adelie Adelie Adelie Adelie Adelie Adelie</span></span>
<span id="cb144-4"><a href="cap5.html#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: Adelie Gentoo Chinstrap</span></span>
<span id="cb144-5"><a href="cap5.html#cb144-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-6"><a href="cap5.html#cb144-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Ordem (decrescente) de frequência</span></span>
<span id="cb144-7"><a href="cap5.html#cb144-7" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb144-8"><a href="cap5.html#cb144-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] Adelie Adelie Adelie Adelie Adelie Adelie</span></span>
<span id="cb144-9"><a href="cap5.html#cb144-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: Adelie Gentoo Chinstrap</span></span></code></pre></div>
<p>Por fim, podemos fazer a agregação de níveis raros em um nível utilizando a função <code>forcats::fct_lump()</code>.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="cap5.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Agregação de níveis raros em um nível</span></span>
<span id="cb145-2"><a href="cap5.html#cb145-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_lump</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb145-3"><a href="cap5.html#cb145-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] Adelie Adelie Adelie Adelie Adelie Adelie</span></span>
<span id="cb145-4"><a href="cap5.html#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: Adelie Gentoo Other</span></span></code></pre></div>
<p>Podemos ainda utilizar essas funções em complemento com o pacote <code>dplyr</code> para fazer manipulações de fatores nas colunas de <code>tibbles</code>.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="cap5.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Transformar várias colunas em fator</span></span>
<span id="cb146-2"><a href="cap5.html#cb146-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_multi_factor <span class="ot">&lt;-</span> penguins_raw <span class="sc">%&gt;%</span> </span>
<span id="cb146-3"><a href="cap5.html#cb146-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), forcats<span class="sc">::</span>as_factor))</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do Capítulo <a href="https://r4ds.had.co.nz/factors.html">15 Factors</a> de Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.</p>
</div>
<div id="lubridate" class="section level2" number="5.11">
<h2><span class="header-section-number">5.11</span> lubridate</h2>
<p>O pacote <code>lubridate</code> fornece um conjunto de funções para a manipulação de dados de data e horário. Dessa forma, esse pacote facilita a manipulação dessa classe de dado no R, pois geralmente esses dados não são intuitivos e mudam dependendo do tipo de objeto de data e horário. Além disso, os métodos que usam datas e horários devem levar em consideração fusos horários, anos bissextos, horários de verão, além de outras particularidades. Existem diversas funções nesse pacote, sendo as mesmas focadas em: i) transformações de data/horário, ii) componentes, iii) arredondamentos, iv) durações, v) períodos, vi) intervalos, além de muitas outras funções específicas.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://lubridate.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Apesar de estar inserido no escopo do <em>tidyverse</em>, este pacote não é carregado com os demais, requisitando seu carregamento solo.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="cap5.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Carregar</span></span>
<span id="cb147-2"><a href="cap5.html#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<p>Existem três tipos de dados data/horário:</p>
<ul>
<li><strong>Data</strong>: tempo em dias, meses e anos <code>&lt;date&gt;</code></li>
<li><strong>Horário</strong>: tempo dentro de um dia <code>&lt;time&gt;</code></li>
<li><strong>Data-horário</strong>: tempo em um instante (data mais tempo) <code>&lt;dttm&gt;</code></li>
</ul>
<p>Para trabalhar exclusivamente com horários, podemos utilizar o pacote <code>hms</code>.</p>
<p>É fundamental também destacar que algumas letras terão um significado temporal, sendo abreviações de diferentes períodos em inglês: <strong>y</strong>ear (ano), <strong>m</strong>onth (mês), <strong>w</strong>eak (semana), <strong>d</strong>ay (dia), <strong>h</strong>our (hora), <strong>m</strong>inute (minuto), e <strong>s</strong>econd (segundo).</p>
<p>Para acessar a informação da data e horários atuais podemos utilizar as funções <code>lubridate::today()</code> e <code>lubridate::now()</code>.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="cap5.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Extrair a data nesse instante</span></span>
<span id="cb148-2"><a href="cap5.html#cb148-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb148-3"><a href="cap5.html#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-02&quot;</span></span>
<span id="cb148-4"><a href="cap5.html#cb148-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-5"><a href="cap5.html#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Extrair a data e tempo nesse instante</span></span>
<span id="cb148-6"><a href="cap5.html#cb148-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">now</span>()</span>
<span id="cb148-7"><a href="cap5.html#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-02 00:33:47 -03&quot;</span></span></code></pre></div>
<p>Além dessas informações instantâneas, existem três maneiras de criar um dado de data/horário.</p>
<ul>
<li>De um string</li>
<li>De componentes individuais de data e horário</li>
<li>De um objeto de data/horário existente</li>
</ul>
<p>Os dados de data/horário geralmente estão no formato de strings. Podemos transformar os dados especificando a ordem dos seus componentes, ou seja, a ordem em que ano, mês e dia aparecem no string, usando as letras <code>y</code> (ano), <code>m</code> (mês) e <code>d</code> (dia) na mesma ordem, por exemplo, <code>lubridate::dmy()</code>.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="cap5.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Strings e números para datas</span></span>
<span id="cb149-2"><a href="cap5.html#cb149-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-03-2021&quot;</span>)</span>
<span id="cb149-3"><a href="cap5.html#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2021-03-03&quot;</span></span></code></pre></div>
<p>Essas funções também aceitam números sem aspas, além de serem muito versáteis e funcionarem em outros diversos formatos.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="cap5.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Strings e números para datas</span></span>
<span id="cb150-2"><a href="cap5.html#cb150-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-Mar-2021&quot;</span>)</span>
<span id="cb150-3"><a href="cap5.html#cb150-3" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="dv">03032021</span>)</span>
<span id="cb150-4"><a href="cap5.html#cb150-4" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03032021&quot;</span>)</span>
<span id="cb150-5"><a href="cap5.html#cb150-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03/03/2021&quot;</span>)</span>
<span id="cb150-6"><a href="cap5.html#cb150-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03.03.2021&quot;</span>)</span></code></pre></div>
<p>Além da data, podemos especificar horários atrelados a essas datas. Para criar uma data com horário adicionamos um underscore (<code>_</code>) e <code>h</code> (hora), <code>m</code> (minuto) e <code>s</code> (segundo) ao nome da função, além do argumento <code>tz</code> para especificar o <em>fuso horário</em> (tema tratado mais adiante nessa seção).</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="cap5.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Especificar horários e fuso horário</span></span>
<span id="cb151-2"><a href="cap5.html#cb151-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_h</span>(<span class="st">&quot;03-03-2021 13&quot;</span>)</span>
<span id="cb151-3"><a href="cap5.html#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2021-03-03 13:00:00 UTC&quot;</span></span>
<span id="cb151-4"><a href="cap5.html#cb151-4" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hm</span>(<span class="st">&quot;03-03-2021 13:32&quot;</span>)</span>
<span id="cb151-5"><a href="cap5.html#cb151-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2021-03-03 13:32:00 UTC&quot;</span></span>
<span id="cb151-6"><a href="cap5.html#cb151-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>)</span>
<span id="cb151-7"><a href="cap5.html#cb151-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2021-03-03 13:32:01 UTC&quot;</span></span>
<span id="cb151-8"><a href="cap5.html#cb151-8" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span>
<span id="cb151-9"><a href="cap5.html#cb151-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2021-03-03 13:32:01 -03&quot;</span></span></code></pre></div>
<p>Podemos ainda ter componentes individuais de data/horário em múltiplas colunas. Para realizar essa transformação, podemos usar as funções <code>lubridate::make_date()</code> e <code>lubridate::make_datetime()</code>.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="cap5.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Dados com componentes individuais</span></span>
<span id="cb152-2"><a href="cap5.html#cb152-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb152-3"><a href="cap5.html#cb152-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ano =</span> <span class="fu">c</span>(<span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2021</span>),</span>
<span id="cb152-4"><a href="cap5.html#cb152-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mes =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb152-5"><a href="cap5.html#cb152-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">dia =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">20</span>, <span class="dv">31</span>),</span>
<span id="cb152-6"><a href="cap5.html#cb152-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">hora =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">14</span>, <span class="dv">18</span>), </span>
<span id="cb152-7"><a href="cap5.html#cb152-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">minuto =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">44</span>, <span class="dv">55</span>))</span>
<span id="cb152-8"><a href="cap5.html#cb152-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-9"><a href="cap5.html#cb152-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Data de componentes individuais</span></span>
<span id="cb152-10"><a href="cap5.html#cb152-10" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> </span>
<span id="cb152-11"><a href="cap5.html#cb152-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">data =</span> lubridate<span class="sc">::</span><span class="fu">make_datetime</span>(ano, mes, dia, hora, minuto))</span>
<span id="cb152-12"><a href="cap5.html#cb152-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 6</span></span>
<span id="cb152-13"><a href="cap5.html#cb152-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     ano   mes   dia  hora minuto data               </span></span>
<span id="cb152-14"><a href="cap5.html#cb152-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             </span></span>
<span id="cb152-15"><a href="cap5.html#cb152-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2021     1    12     2      2 2021-01-12 02:02:00</span></span>
<span id="cb152-16"><a href="cap5.html#cb152-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2021     2    20    14     44 2021-02-20 14:44:00</span></span>
<span id="cb152-17"><a href="cap5.html#cb152-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2021     3    31    18     55 2021-03-31 18:55:00</span></span></code></pre></div>
<p>Por fim, podemo criar datas modificando entre data/horário e data, utilizando as funções <code>lubridate::as_datetime()</code> e <code>lubridate::as_date()</code>.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="cap5.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Data para data-horário</span></span>
<span id="cb153-2"><a href="cap5.html#cb153-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_datetime</span>(<span class="fu">today</span>())</span>
<span id="cb153-3"><a href="cap5.html#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-02 UTC&quot;</span></span>
<span id="cb153-4"><a href="cap5.html#cb153-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-5"><a href="cap5.html#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Data-horário para data</span></span>
<span id="cb153-6"><a href="cap5.html#cb153-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_date</span>(<span class="fu">now</span>())</span>
<span id="cb153-7"><a href="cap5.html#cb153-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-02&quot;</span></span></code></pre></div>
<p>Uma vez que entendemos como podemos criar dados de data/horário, podemos explorar funções para acessar e definir componentes individuais. Para essa tarefa existe uma grande quantidade de funções para acessar de partes específicas de datas e horários.</p>
<ul>
<li><code>year()</code>: acessa o ano</li>
<li><code>month()</code>: acessa o mês</li>
<li><code>month()</code>: acessa o dia</li>
<li><code>yday()</code>: acessa o dia do ano</li>
<li><code>mday()</code>: acessa o dia do mês</li>
<li><code>wday()</code>: acessa o dia da semana</li>
<li><code>hour()</code>: acessa as horas</li>
<li><code>minute()</code>: acessa os minutos</li>
<li><code>second()</code>: acessa os segundos</li>
</ul>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="cap5.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Extrair</span></span>
<span id="cb154-2"><a href="cap5.html#cb154-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">now</span>())</span>
<span id="cb154-3"><a href="cap5.html#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2022</span></span>
<span id="cb154-4"><a href="cap5.html#cb154-4" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>())</span>
<span id="cb154-5"><a href="cap5.html#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb154-6"><a href="cap5.html#cb154-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span>
<span id="cb154-7"><a href="cap5.html#cb154-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] Feb</span></span>
<span id="cb154-8"><a href="cap5.html#cb154-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; Oct &lt; Nov &lt; Dec</span></span>
<span id="cb154-9"><a href="cap5.html#cb154-9" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">day</span>(<span class="fu">now</span>())</span>
<span id="cb154-10"><a href="cap5.html#cb154-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb154-11"><a href="cap5.html#cb154-11" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>())</span>
<span id="cb154-12"><a href="cap5.html#cb154-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb154-13"><a href="cap5.html#cb154-13" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span>
<span id="cb154-14"><a href="cap5.html#cb154-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] Wed</span></span>
<span id="cb154-15"><a href="cap5.html#cb154-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat</span></span>
<span id="cb154-16"><a href="cap5.html#cb154-16" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">second</span>(<span class="fu">now</span>())</span>
<span id="cb154-17"><a href="cap5.html#cb154-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 47.49535</span></span></code></pre></div>
<p>Além de acessar componentes de datas e horários, podemos usar essas funções para fazer a inclusão de informações de datas e horários.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="cap5.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Data</span></span>
<span id="cb155-2"><a href="cap5.html#cb155-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">dmy_hms</span>(<span class="st">&quot;04-03-2021 01:04:56&quot;</span>)</span>
<span id="cb155-3"><a href="cap5.html#cb155-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-4"><a href="cap5.html#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Incluir</span></span>
<span id="cb155-5"><a href="cap5.html#cb155-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(data) <span class="ot">&lt;-</span> <span class="dv">2020</span></span>
<span id="cb155-6"><a href="cap5.html#cb155-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(data) <span class="ot">&lt;-</span> <span class="dv">01</span></span>
<span id="cb155-7"><a href="cap5.html#cb155-7" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hour</span>(data) <span class="ot">&lt;-</span> <span class="dv">13</span></span></code></pre></div>
<p>Mais convenientemente, podemos utilizar a função <code>update()</code> para alterar vários valores de uma vez.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="cap5.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Incluir vários valores</span></span>
<span id="cb156-2"><a href="cap5.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span>(data, <span class="at">year =</span> <span class="dv">2020</span>, <span class="at">month =</span> <span class="dv">1</span>, <span class="at">mday =</span> <span class="dv">1</span>, <span class="at">hour =</span> <span class="dv">1</span>)</span>
<span id="cb156-3"><a href="cap5.html#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2020-01-01 01:04:56 UTC&quot;</span></span></code></pre></div>
<p>Muitas vezes precisamos fazer operações com datas, como a aritmética: adição, subtração, multiplicação e divisão. Para tanto, é preciso entender três classes importantes que representam intervalos de tempo.</p>
<ul>
<li><strong>Durações</strong>: representam um número exato de segundos</li>
<li><strong>Períodos</strong>: representam unidades humanas como semanas e meses</li>
<li><strong>Intervalos</strong>: representam um ponto inicial e final</li>
</ul>
<p>Quando fazemos uma subtração de datas, criamos um objeto da classe <code>difftime</code>. Essa classe pode ser um pouco complicada de trabalhar, então dentro do <em>lubridate</em> usamos funções que convertem essa classe em duração, da classe <code>Duration</code>. As durações sempre registram o intervalo de tempo em segundos, com alguma unidade de tempo maior entre parênteses. Há uma série de funções para tratar dessa classe.</p>
<ul>
<li><code>duration()</code>: cria data em duração</li>
<li><code>as.duration()</code>: converte datas em duração</li>
<li><code>dyears()</code>: duração de anos</li>
<li><code>dmonths()</code>: duração de meses</li>
<li><code>dweeks()</code>: duração de semanas</li>
<li><code>ddays()</code>: duração de dias</li>
<li><code>dhours()</code>: duração de horas</li>
<li><code>dminutes()</code>: duração de minutos</li>
<li><code>dseconds()</code>: duração de segundos</li>
</ul>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="cap5.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Subtração de datas</span></span>
<span id="cb157-2"><a href="cap5.html#cb157-2" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb157-3"><a href="cap5.html#cb157-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-4"><a href="cap5.html#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Conversão para duração</span></span>
<span id="cb157-5"><a href="cap5.html#cb157-5" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r_dur <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">as.duration</span>(tempo_estudando_r)</span>
<span id="cb157-6"><a href="cap5.html#cb157-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-7"><a href="cap5.html#cb157-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Criando durações</span></span>
<span id="cb157-8"><a href="cap5.html#cb157-8" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">90</span>, <span class="st">&quot;seconds&quot;</span>)</span>
<span id="cb157-9"><a href="cap5.html#cb157-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;90s (~1.5 minutes)&quot;</span></span>
<span id="cb157-10"><a href="cap5.html#cb157-10" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="fl">1.5</span>, <span class="st">&quot;minutes&quot;</span>)</span>
<span id="cb157-11"><a href="cap5.html#cb157-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;90s (~1.5 minutes)&quot;</span></span>
<span id="cb157-12"><a href="cap5.html#cb157-12" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">1</span>, <span class="st">&quot;days&quot;</span>)</span>
<span id="cb157-13"><a href="cap5.html#cb157-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;86400s (~1 days)&quot;</span></span>
<span id="cb157-14"><a href="cap5.html#cb157-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-15"><a href="cap5.html#cb157-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Transformação da duração</span></span>
<span id="cb157-16"><a href="cap5.html#cb157-16" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dseconds</span>(<span class="dv">100</span>)</span>
<span id="cb157-17"><a href="cap5.html#cb157-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;100s (~1.67 minutes)&quot;</span></span>
<span id="cb157-18"><a href="cap5.html#cb157-18" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dminutes</span>(<span class="dv">100</span>)</span>
<span id="cb157-19"><a href="cap5.html#cb157-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;6000s (~1.67 hours)&quot;</span></span>
<span id="cb157-20"><a href="cap5.html#cb157-20" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dhours</span>(<span class="dv">100</span>)</span>
<span id="cb157-21"><a href="cap5.html#cb157-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;360000s (~4.17 days)&quot;</span></span>
<span id="cb157-22"><a href="cap5.html#cb157-22" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">100</span>)</span>
<span id="cb157-23"><a href="cap5.html#cb157-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;8640000s (~14.29 weeks)&quot;</span></span>
<span id="cb157-24"><a href="cap5.html#cb157-24" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dweeks</span>(<span class="dv">100</span>)</span>
<span id="cb157-25"><a href="cap5.html#cb157-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;60480000s (~1.92 years)&quot;</span></span>
<span id="cb157-26"><a href="cap5.html#cb157-26" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">100</span>)</span>
<span id="cb157-27"><a href="cap5.html#cb157-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;3155760000s (~100 years)&quot;</span></span></code></pre></div>
<p>Podemos ainda utilizar as durações para fazer operações aritméticas com datas como adição, subtração e multiplicação.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="cap5.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Somando durações a datas</span></span>
<span id="cb158-2"><a href="cap5.html#cb158-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">1</span>)</span>
<span id="cb158-3"><a href="cap5.html#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-03&quot;</span></span>
<span id="cb158-4"><a href="cap5.html#cb158-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-5"><a href="cap5.html#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Subtraindo durações de datas</span></span>
<span id="cb158-6"><a href="cap5.html#cb158-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">1</span>)</span>
<span id="cb158-7"><a href="cap5.html#cb158-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2021-02-01 18:00:00 UTC&quot;</span></span>
<span id="cb158-8"><a href="cap5.html#cb158-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-9"><a href="cap5.html#cb158-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Multiplicando durações</span></span>
<span id="cb158-10"><a href="cap5.html#cb158-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="fu">dyears</span>(<span class="dv">2</span>)</span>
<span id="cb158-11"><a href="cap5.html#cb158-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;126230400s (~4 years)&quot;</span></span></code></pre></div>
<p>Além das durações, podemos usar períodos, que são extensões de tempo não fixados em segundos como as durações, mas flexíveis, com o tempo em dias, semanas, meses ou anos, permitindo uma interpretação mais intuitiva das datas. Novamente, há uma série de funções para realizar essas operações.</p>
<ul>
<li><code>period()</code>: cria data em período</li>
<li><code>as.period()</code>: converte datas em período</li>
<li><code>seconds()</code>: período em segundos</li>
<li><code>minutes()</code>: período em minutos</li>
<li><code>hours()</code>: período em horas</li>
<li><code>days()</code>: período em dias</li>
<li><code>weeks()</code>: período em semanas</li>
<li><code>months()</code>: período em meses</li>
<li><code>years()</code>: período em anos</li>
</ul>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="cap5.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Criando períodos</span></span>
<span id="cb159-2"><a href="cap5.html#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>))</span>
<span id="cb159-3"><a href="cap5.html#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5M 90S&quot;</span></span>
<span id="cb159-4"><a href="cap5.html#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">13</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>, <span class="st">&quot;hour&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;week&quot;</span>))</span>
<span id="cb159-5"><a href="cap5.html#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;20d 2H 1M 3S&quot;</span></span>
<span id="cb159-6"><a href="cap5.html#cb159-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-7"><a href="cap5.html#cb159-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Transformação de períodos</span></span>
<span id="cb159-8"><a href="cap5.html#cb159-8" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">seconds</span>(<span class="dv">100</span>)</span>
<span id="cb159-9"><a href="cap5.html#cb159-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;100S&quot;</span></span>
<span id="cb159-10"><a href="cap5.html#cb159-10" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">minutes</span>(<span class="dv">100</span>)</span>
<span id="cb159-11"><a href="cap5.html#cb159-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;100M 0S&quot;</span></span>
<span id="cb159-12"><a href="cap5.html#cb159-12" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hours</span>(<span class="dv">100</span>)</span>
<span id="cb159-13"><a href="cap5.html#cb159-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;100H 0M 0S&quot;</span></span>
<span id="cb159-14"><a href="cap5.html#cb159-14" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">days</span>(<span class="dv">100</span>)</span>
<span id="cb159-15"><a href="cap5.html#cb159-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;100d 0H 0M 0S&quot;</span></span>
<span id="cb159-16"><a href="cap5.html#cb159-16" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">100</span>)</span>
<span id="cb159-17"><a href="cap5.html#cb159-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;700d 0H 0M 0S&quot;</span></span>
<span id="cb159-18"><a href="cap5.html#cb159-18" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">years</span>(<span class="dv">100</span>)</span>
<span id="cb159-19"><a href="cap5.html#cb159-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;100y 0m 0d 0H 0M 0S&quot;</span></span></code></pre></div>
<p>Além disso, podemos fazer operações com os períodos, somando e subtraindo.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="cap5.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Somando datas</span></span>
<span id="cb160-2"><a href="cap5.html#cb160-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span>
<span id="cb160-3"><a href="cap5.html#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-04-13&quot;</span></span>
<span id="cb160-4"><a href="cap5.html#cb160-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-5"><a href="cap5.html#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Subtraindo datas</span></span>
<span id="cb160-6"><a href="cap5.html#cb160-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span>
<span id="cb160-7"><a href="cap5.html#cb160-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2021-11-24&quot;</span></span>
<span id="cb160-8"><a href="cap5.html#cb160-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-9"><a href="cap5.html#cb160-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Criando datas recorrentes</span></span>
<span id="cb160-10"><a href="cap5.html#cb160-10" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb160-11"><a href="cap5.html#cb160-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;2022-02-02&quot; &quot;2022-02-09&quot; &quot;2022-02-16&quot; &quot;2022-02-23&quot; &quot;2022-03-02&quot; &quot;2022-03-09&quot; &quot;2022-03-16&quot; &quot;2022-03-23&quot; &quot;2022-03-30&quot;</span></span>
<span id="cb160-12"><a href="cap5.html#cb160-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;2022-04-06&quot; &quot;2022-04-13&quot;</span></span></code></pre></div>
<p>Por fim, intervalos são períodos de tempo limitados por duas datas, possuindo uma duração com um ponto de partida, que o faz preciso para determinar uma duração. Intervalos são objetos da classe <code>Interval</code>. Da mesma forma que para duração e períodos, há uma série de funções para realizar essas operações.</p>
<ul>
<li><code>interval()</code>: cria data em intervalo</li>
<li><code>%--%</code>: cria data em intervalo</li>
<li><code>as.interval()</code>: converte datas em intervalo</li>
<li><code>int_start()</code>: acessa ou atribui data inicial de um intervalo</li>
<li><code>int_end()</code>: acessa ou atribui data final de um intervalo</li>
<li><code>int_length()</code>: comprimento de um intervalo em segundos</li>
<li><code>int_flip()</code>: inverte a ordem da data de início e da data de término em um intervalo</li>
<li><code>int_shift()</code>: desloca as datas de início e término de um intervalo</li>
<li><code>int_aligns()</code>: testa se dois intervalos compartilham um ponto final</li>
<li><code>int_standardize()</code>: garante que todos os intervalos sejam positivos</li>
<li><code>int_diff()</code>: retorna os intervalos que ocorrem entre os elementos de data/horário</li>
<li><code>int_overlaps()</code>: testa se dois intervalos se sobrepõem</li>
<li><code>%within%</code>: testa se o primeiro intervalo está contido no segundo</li>
</ul>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="cap5.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Criando duas datas - início de estudos do R e nascimento do meu filho</span></span>
<span id="cb161-2"><a href="cap5.html#cb161-2" aria-hidden="true" tabindex="-1"></a>r_inicio <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb161-3"><a href="cap5.html#cb161-3" aria-hidden="true" tabindex="-1"></a>filho_nascimento <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;26-09-2013&quot;</span>)</span>
<span id="cb161-4"><a href="cap5.html#cb161-4" aria-hidden="true" tabindex="-1"></a>r_hoje <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb161-5"><a href="cap5.html#cb161-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-6"><a href="cap5.html#cb161-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Criando intervalos - interval</span></span>
<span id="cb161-7"><a href="cap5.html#cb161-7" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">interval</span>(r_inicio, r_hoje)</span>
<span id="cb161-8"><a href="cap5.html#cb161-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-9"><a href="cap5.html#cb161-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Criando intervalos - interval %--%</span></span>
<span id="cb161-10"><a href="cap5.html#cb161-10" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="ot">&lt;-</span> filho_nascimento <span class="sc">%--%</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb161-11"><a href="cap5.html#cb161-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-12"><a href="cap5.html#cb161-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Operações com intervalos</span></span>
<span id="cb161-13"><a href="cap5.html#cb161-13" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_start</span>(r_intervalo)</span>
<span id="cb161-14"><a href="cap5.html#cb161-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2011-11-30 UTC&quot;</span></span>
<span id="cb161-15"><a href="cap5.html#cb161-15" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_end</span>(r_intervalo)</span>
<span id="cb161-16"><a href="cap5.html#cb161-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-02 UTC&quot;</span></span>
<span id="cb161-17"><a href="cap5.html#cb161-17" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_length</span>(r_intervalo)</span>
<span id="cb161-18"><a href="cap5.html#cb161-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 321148800</span></span>
<span id="cb161-19"><a href="cap5.html#cb161-19" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_flip</span>(r_intervalo)</span>
<span id="cb161-20"><a href="cap5.html#cb161-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2022-02-02 UTC--2011-11-30 UTC</span></span>
<span id="cb161-21"><a href="cap5.html#cb161-21" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_shift</span>(r_intervalo, <span class="fu">duration</span>(<span class="at">days =</span> <span class="dv">30</span>))</span>
<span id="cb161-22"><a href="cap5.html#cb161-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2011-12-30 UTC--2022-03-04 UTC</span></span></code></pre></div>
<p>Uma operação de destaque é verificar a sobreposição entre dois intervalos.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="cap5.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Verificar sobreposição - int_overlaps</span></span>
<span id="cb162-2"><a href="cap5.html#cb162-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_overlaps</span>(r_intervalo, filho_intervalo)</span>
<span id="cb162-3"><a href="cap5.html#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb162-4"><a href="cap5.html#cb162-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-5"><a href="cap5.html#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Verificar se intervalo está contido</span></span>
<span id="cb162-6"><a href="cap5.html#cb162-6" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%within%</span> filho_intervalo</span>
<span id="cb162-7"><a href="cap5.html#cb162-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb162-8"><a href="cap5.html#cb162-8" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">%within%</span> r_intervalo</span>
<span id="cb162-9"><a href="cap5.html#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Podemos ainda calcular quantos períodos existem dentro de um intervalo, utilizando as operações de <code>/</code> e <code>%/%</code>.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="cap5.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Períodos dentro de um intervalo - anos</span></span>
<span id="cb163-2"><a href="cap5.html#cb163-2" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span>
<span id="cb163-3"><a href="cap5.html#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10.17534</span></span>
<span id="cb163-4"><a href="cap5.html#cb163-4" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%/%</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span>
<span id="cb163-5"><a href="cap5.html#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span>
<span id="cb163-6"><a href="cap5.html#cb163-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-7"><a href="cap5.html#cb163-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Períodos dentro de um intervalo - dias e semandas</span></span>
<span id="cb163-8"><a href="cap5.html#cb163-8" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">days</span>()</span>
<span id="cb163-9"><a href="cap5.html#cb163-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3051</span></span>
<span id="cb163-10"><a href="cap5.html#cb163-10" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>()</span>
<span id="cb163-11"><a href="cap5.html#cb163-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 435.8571</span></span></code></pre></div>
<p>Ainda podemos fazer transformações dos dados para períodos e ter todas as unidades de data e tempo que o intervalo compreende.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="cap5.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Tempo total estudando R</span></span>
<span id="cb164-2"><a href="cap5.html#cb164-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(r_intervalo)</span>
<span id="cb164-3"><a href="cap5.html#cb164-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;10y 2m 3d 0H 0M 0S&quot;</span></span>
<span id="cb164-4"><a href="cap5.html#cb164-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-5"><a href="cap5.html#cb164-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Idade do meu filho</span></span>
<span id="cb164-6"><a href="cap5.html#cb164-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(filho_intervalo)</span>
<span id="cb164-7"><a href="cap5.html#cb164-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;8y 4m 7d 0H 0M 0S&quot;</span></span></code></pre></div>
<p>Por fim, fusos horários tendem a ser um fator complicador quando precisamos analisar informações instantâneas de tempo (horário) de outras partes do planeta, ou mesmo fazer conversões dos horários. No <code>lubridate</code> há funções para ajudar nesse sentido. Para isso, podemos utilizar a função <code>lubridate::with_tz()</code> e no argumento <code>tzone</code> informar o fuso horário para a transformação do horário.</p>
<p>Podemos descobrir o fuso horário que o R está considerando com a função <code>Sys.timezone()</code>.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="cap5.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Fuso horário no R</span></span>
<span id="cb165-2"><a href="cap5.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.timezone</span>()</span>
<span id="cb165-3"><a href="cap5.html#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;America/Sao_Paulo&quot;</span></span></code></pre></div>
<p>No R há uma listagem dos nomes dos fusos horários que podemos utilizar no argumento <code>tzone</code> para diferentes fusos horários.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="cap5.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Verificar os fuso horários</span></span>
<span id="cb166-2"><a href="cap5.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">OlsonNames</span>())</span>
<span id="cb166-3"><a href="cap5.html#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 595</span></span>
<span id="cb166-4"><a href="cap5.html#cb166-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">OlsonNames</span>())</span>
<span id="cb166-5"><a href="cap5.html#cb166-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Africa/Abidjan&quot;     &quot;Africa/Accra&quot;       &quot;Africa/Addis_Ababa&quot; &quot;Africa/Algiers&quot;     &quot;Africa/Asmara&quot;     </span></span>
<span id="cb166-6"><a href="cap5.html#cb166-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] &quot;Africa/Asmera&quot;</span></span></code></pre></div>
<p>Podemos nos perguntar que horas são em outra parte do globo ou fazer as conversões facilmente no <em>lubridate</em>.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="cap5.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Que horas são em...</span></span>
<span id="cb167-2"><a href="cap5.html#cb167-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span>
<span id="cb167-3"><a href="cap5.html#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-02 00:33:47 -03&quot;</span></span>
<span id="cb167-4"><a href="cap5.html#cb167-4" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span>
<span id="cb167-5"><a href="cap5.html#cb167-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-02 03:33:47 GMT&quot;</span></span>
<span id="cb167-6"><a href="cap5.html#cb167-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;Europe/Berlin&quot;</span>)</span>
<span id="cb167-7"><a href="cap5.html#cb167-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-02 04:33:47 CET&quot;</span></span>
<span id="cb167-8"><a href="cap5.html#cb167-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-9"><a href="cap5.html#cb167-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Altera o fuso sem mudar a hora</span></span>
<span id="cb167-10"><a href="cap5.html#cb167-10" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">force_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span>
<span id="cb167-11"><a href="cap5.html#cb167-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2022-02-02 00:33:47 GMT&quot;</span></span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do Capítulo <a href="https://r4ds.had.co.nz/dates-and-times.html">16 Dates and times</a> de Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.</p>
</div>
<div id="purrr" class="section level2" number="5.12">
<h2><span class="header-section-number">5.12</span> purrr</h2>
<p>O pacote <code>purrr</code> implementa a <em>Programação Funcional</em> no R, fornecendo um conjunto completo e consistente de ferramentas para trabalhar com funções e vetores. A programação funcional é um assunto bastante extenso, sendo mais conhecido no R pela família de funções <code>purrr::map()</code>, que permite substituir muitos <em>loops for</em> por um código mais sucinto e fácil de ler. Não focaremos aqui nas outras funções, pois esse é um assunto extremamente extenso.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://purrr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Um <em>loop for</em> pode ser entendido como uma iteração: um bloco de códigos é repetido mudando um contador de uma lista de possibilidades. Vamos exemplificar com uma iteração bem simples, onde imprimiremos no console os valores de 1 a 10, utilizando a função <code>for()</code>, um contador <code>i</code> em um vetor de dez números <code>1:10</code> que será iterado, no bloco de códigos definido entre <code>{}</code>, usando a função <code>print()</code> para imprimir os valores.</p>
<p>A ideia é bastante simples: a função <code>for()</code> vai atribuir o primeiro valor da lista ao contador <code>i</code>, esse contador será utilizado em todo o bloco de códigos. Quando o bloco terminar, o segundo valor é atribuído ao contador <code>i</code> e entra no bloco de códigos, repetindo esse processo até que todos os elementos da lista tenham sido atribuídos ao contador.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="cap5.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Loop for</span></span>
<span id="cb168-2"><a href="cap5.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb168-3"><a href="cap5.html#cb168-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(i)</span>
<span id="cb168-4"><a href="cap5.html#cb168-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb168-5"><a href="cap5.html#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb168-6"><a href="cap5.html#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb168-7"><a href="cap5.html#cb168-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb168-8"><a href="cap5.html#cb168-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb168-9"><a href="cap5.html#cb168-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span>
<span id="cb168-10"><a href="cap5.html#cb168-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span>
<span id="cb168-11"><a href="cap5.html#cb168-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 7</span></span>
<span id="cb168-12"><a href="cap5.html#cb168-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 8</span></span>
<span id="cb168-13"><a href="cap5.html#cb168-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9</span></span>
<span id="cb168-14"><a href="cap5.html#cb168-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p>Com essa ideia em mente, a programação funcional faz a mesma operação utilizando a função <code>purrr::map()</code>. O mesmo <em>loop for</em> ficaria dessa forma.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="cap5.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Loop for com map</span></span>
<span id="cb169-2"><a href="cap5.html#cb169-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(<span class="at">.x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">.f =</span> print)</span>
<span id="cb169-3"><a href="cap5.html#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb169-4"><a href="cap5.html#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb169-5"><a href="cap5.html#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb169-6"><a href="cap5.html#cb169-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb169-7"><a href="cap5.html#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span>
<span id="cb169-8"><a href="cap5.html#cb169-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span>
<span id="cb169-9"><a href="cap5.html#cb169-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 7</span></span>
<span id="cb169-10"><a href="cap5.html#cb169-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 8</span></span>
<span id="cb169-11"><a href="cap5.html#cb169-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9</span></span>
<span id="cb169-12"><a href="cap5.html#cb169-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span>
<span id="cb169-13"><a href="cap5.html#cb169-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb169-14"><a href="cap5.html#cb169-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb169-15"><a href="cap5.html#cb169-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-16"><a href="cap5.html#cb169-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb169-17"><a href="cap5.html#cb169-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb169-18"><a href="cap5.html#cb169-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-19"><a href="cap5.html#cb169-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb169-20"><a href="cap5.html#cb169-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb169-21"><a href="cap5.html#cb169-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-22"><a href="cap5.html#cb169-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb169-23"><a href="cap5.html#cb169-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb169-24"><a href="cap5.html#cb169-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-25"><a href="cap5.html#cb169-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[5]]</span></span>
<span id="cb169-26"><a href="cap5.html#cb169-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span>
<span id="cb169-27"><a href="cap5.html#cb169-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-28"><a href="cap5.html#cb169-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[6]]</span></span>
<span id="cb169-29"><a href="cap5.html#cb169-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span>
<span id="cb169-30"><a href="cap5.html#cb169-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-31"><a href="cap5.html#cb169-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[7]]</span></span>
<span id="cb169-32"><a href="cap5.html#cb169-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 7</span></span>
<span id="cb169-33"><a href="cap5.html#cb169-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-34"><a href="cap5.html#cb169-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[8]]</span></span>
<span id="cb169-35"><a href="cap5.html#cb169-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 8</span></span>
<span id="cb169-36"><a href="cap5.html#cb169-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-37"><a href="cap5.html#cb169-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[9]]</span></span>
<span id="cb169-38"><a href="cap5.html#cb169-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9</span></span>
<span id="cb169-39"><a href="cap5.html#cb169-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb169-40"><a href="cap5.html#cb169-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[10]]</span></span>
<span id="cb169-41"><a href="cap5.html#cb169-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p>Nessa estrutura, temos:</p>
<p><code>map(.x, .f)</code></p>
<ul>
<li><code>.x</code>: um vetor, lista ou data frame</li>
<li><code>.f</code>: uma função</li>
</ul>
<p>Num outro exemplo, aplicaremos a função <code>sum()</code> para somar os valores de vários elementos de uma lista.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="cap5.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Função map</span></span>
<span id="cb170-2"><a href="cap5.html#cb170-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb170-3"><a href="cap5.html#cb170-3" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(x, sum)</span>
<span id="cb170-4"><a href="cap5.html#cb170-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb170-5"><a href="cap5.html#cb170-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 15</span></span>
<span id="cb170-6"><a href="cap5.html#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb170-7"><a href="cap5.html#cb170-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb170-8"><a href="cap5.html#cb170-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 16</span></span>
<span id="cb170-9"><a href="cap5.html#cb170-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb170-10"><a href="cap5.html#cb170-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb170-11"><a href="cap5.html#cb170-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb170-12"><a href="cap5.html#cb170-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb170-13"><a href="cap5.html#cb170-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb170-14"><a href="cap5.html#cb170-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p>Há diferente tipos de retornos da família <code>purrr::map()</code>.</p>
<ul>
<li><code>map()</code>: retorna uma lista</li>
<li><code>map_chr()</code>: retorna um vetor de strings</li>
<li><code>map_dbl()</code>: retorna um vetor numérico (double)</li>
<li><code>map_int()</code>: retorna um vetor numérico (integer)</li>
<li><code>map_lgl()</code>: retorna um vetor lógico</li>
<li><code>map_dfr()</code>: retorna um data frame (por linhas)</li>
<li><code>map_dfc()</code>: retorna um data frame (por colunas)</li>
</ul>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="cap5.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Variações da função map</span></span>
<span id="cb171-2"><a href="cap5.html#cb171-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_dbl</span>(x, sum)</span>
<span id="cb171-3"><a href="cap5.html#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 15 16  3 10</span></span>
<span id="cb171-4"><a href="cap5.html#cb171-4" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_chr</span>(x, paste, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb171-5"><a href="cap5.html#cb171-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;1 2 3 4 5&quot; &quot;4 5 7&quot;     &quot;1 1 1&quot;     &quot;2 2 2 2 2&quot;</span></span></code></pre></div>
<p>Essas funcionalidades já eram conhecidas no Base R pelas funções da <em>família <code>apply()</code></em>: <code>apply()</code>, <code>lapply()</code>, <code>sapply()</code>, <code>vapply()</code>, <code>mapply()</code>, <code>rapply()</code> e <code>tapply()</code>. Essas funções formam a base de combinações mais complexas e ajudam a realizar operações com poucas linhas de código, para diferentes retornos.</p>
<p>Temos ainda duas variantes da função <code>map()</code>: <code>purrr::map2()</code> e <code>purrr::pmap()</code>, para duas ou mais listas, respectivamente. Como vimos para a primeira função, existem várias variações do sufixo para modificar o retorno da função.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="cap5.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Listas</span></span>
<span id="cb172-2"><a href="cap5.html#cb172-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb172-3"><a href="cap5.html#cb172-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb172-4"><a href="cap5.html#cb172-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb172-5"><a href="cap5.html#cb172-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-6"><a href="cap5.html#cb172-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Função map2</span></span>
<span id="cb172-7"><a href="cap5.html#cb172-7" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map2_dbl</span>(x, y, prod)</span>
<span id="cb172-8"><a href="cap5.html#cb172-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  9 25  0  1</span></span>
<span id="cb172-9"><a href="cap5.html#cb172-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-10"><a href="cap5.html#cb172-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Função pmap</span></span>
<span id="cb172-11"><a href="cap5.html#cb172-11" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pmap_dbl</span>(<span class="fu">list</span>(x, y, z), prod)</span>
<span id="cb172-12"><a href="cap5.html#cb172-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  27 125   0   1</span></span></code></pre></div>
<p>Essas funções podem ser usadas em conjunto para implementar rotinas de manipulação e análise de dados com poucas linhas de código, mas que não exploraremos em sua completude aqui. Listamos dois exemplos simples.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="cap5.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Resumo dos dados</span></span>
<span id="cb173-2"><a href="cap5.html#cb173-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb173-3"><a href="cap5.html#cb173-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb173-4"><a href="cap5.html#cb173-4" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb173-5"><a href="cap5.html#cb173-5" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map_dbl</span>(mean)</span>
<span id="cb173-6"><a href="cap5.html#cb173-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    bill_length_mm     bill_depth_mm flipper_length_mm       body_mass_g              year </span></span>
<span id="cb173-7"><a href="cap5.html#cb173-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          43.92193          17.15117         200.91520        4201.75439        2008.02924</span></span></code></pre></div>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="cap5.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Análise dos dados</span></span>
<span id="cb174-2"><a href="cap5.html#cb174-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb174-3"><a href="cap5.html#cb174-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_split</span>(island, species) <span class="sc">%&gt;%</span> </span>
<span id="cb174-4"><a href="cap5.html#cb174-4" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(bill_depth_mm <span class="sc">~</span> bill_length_mm, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span> </span>
<span id="cb174-5"><a href="cap5.html#cb174-5" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(summary) <span class="sc">%&gt;%</span> </span>
<span id="cb174-6"><a href="cap5.html#cb174-6" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(<span class="st">&quot;r.squared&quot;</span>)</span>
<span id="cb174-7"><a href="cap5.html#cb174-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb174-8"><a href="cap5.html#cb174-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.2192052</span></span>
<span id="cb174-9"><a href="cap5.html#cb174-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb174-10"><a href="cap5.html#cb174-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb174-11"><a href="cap5.html#cb174-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.4139429</span></span>
<span id="cb174-12"><a href="cap5.html#cb174-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb174-13"><a href="cap5.html#cb174-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb174-14"><a href="cap5.html#cb174-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.2579242</span></span>
<span id="cb174-15"><a href="cap5.html#cb174-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb174-16"><a href="cap5.html#cb174-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb174-17"><a href="cap5.html#cb174-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.4271096</span></span>
<span id="cb174-18"><a href="cap5.html#cb174-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb174-19"><a href="cap5.html#cb174-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[5]]</span></span>
<span id="cb174-20"><a href="cap5.html#cb174-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.06198376</span></span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do Capítulo <a href="https://r4ds.had.co.nz/iteration.html">21 Iteration</a> de Wickham &amp; Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span>.</p>
</div>
<div id="exercícios-1" class="section level2" number="5.13">
<h2><span class="header-section-number">5.13</span> Exercícios</h2>
<ol style="list-style-type: decimal">
<li>Reescreva as operações abaixo utilizando pipes <code>%&gt;%</code>.</li>
</ol>
<ul>
<li><code>log10(cumsum(1:100))</code></li>
<li><code>sum(sqrt(abs(rnorm(100))))</code></li>
<li><code>sum(sort(sample(1:10, 10000, rep = TRUE)))</code></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><p>Use a função <code>download.file()</code> e <code>unzip()</code> para baixar e extrair o arquivo do data paper de médios e grandes mamíferos: <a href="https://doi.org/10.1002/ecy.2785">ATLANTIC MAMMALS</a>. Em seguinda, importe para o R, usando a função <code>readxl::read_excel()</code>.</p></li>
<li><p>Use a função <code>tibble::glimpse()</code> para ter uma noção geral dos dados importados no item anterior.</p></li>
<li><p>Compare os dados de penguins (<em>palmerpenguins::penguins_raw</em> e <em>palmerpenguins::penguins</em>). Monte uma série de funções dos pacotes <em>tidyr</em> e <code>dplyr</code> para fazer limpar os dados e fazer com que o primeiro dado seja igual ao segundo.</p></li>
<li><p>Usando os dados de penguins (<em>palmerpenguins::penguins</em>), calcule a correlação de Pearson entre comprimento e profundidade do bico para cada espécie e para todas as espécies. Compare os índices de correlação para exemplificar o Paradoxo de Simpsom.</p></li>
<li><p>Oficialmente a pandemia de COVID-19 começou no Brasil com o primeiro caso no dia 26 de fevereiro de 2020. Calcule quantos anos, meses, dias, semanas, horas, minutos e segundos se passou desde então. Calcule também quanto tempo se passou até você ser vacinado.</p></li>
</ol>
</div>
<div id="para-se-aprofundar-1" class="section level2" number="5.14">
<h2><span class="header-section-number">5.14</span> Para se aprofundar</h2>
<p>Listamos a seguir livros que recomendamos para seguir com sua aprendizagem em R e tidyverse.</p>
<div id="livros-1" class="section level3" number="5.14.1">
<h3><span class="header-section-number">5.14.1</span> Livros</h3>
<p>Recomendamos aos interessados os livros: i) Oliveira e colaboradores <span class="citation">(<a href="#ref-oliveira_ciencia_2018" role="doc-biblioref">2018</a>)</span> Ciência de dados com R, ii) Grolemund <span class="citation">(<a href="#ref-williams_essentials_2018" role="doc-biblioref">2018</a>)</span> The Essentials of Data Science: Knowledge Discovery Using R, Holmes e Huber <span class="citation">(<a href="#ref-holmes_modern_2019" role="doc-biblioref">2019</a>)</span> Modern Statistics for Modern Biology, iii) Irizarry <span class="citation">(<a href="#ref-irizarry_data_2017" role="doc-biblioref">2017</a>)</span> Introduction to Data Science: Data Analysis and Prediction Algorithms with R, iv) Ismay e Kim <span class="citation">(<a href="#ref-ismay_statistical_2020" role="doc-biblioref">2020</a>)</span> Statistical Inference via Data Science: A ModernDive into R and the Tidyverse, v) Wickham e Grolemund <span class="citation">(<a href="#ref-wickham2017" role="doc-biblioref">2017</a>)</span> R for Data Science: Import, Tidy, Transform, Visualize, and Model Data, vi) Zumel e Mount <span class="citation">(<a href="#ref-zumel_practical_2014" role="doc-biblioref">2014</a>)</span> Practical Data Science with R Paperback.</p>

</div>
</div>
</div>
<h3>Referências</h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-holmes_modern_2019" class="csl-entry">
Holmes, S., &amp; Huber, W. (2019). <em>Modern statistics for modern biology</em>. Cambridge university press.
</div>
<div id="ref-irizarry_data_2017" class="csl-entry">
Irizarry, R. A. (2017). <em>Data analysis for the life sciences with <span>R</span></em>. CRC Press, Taylor &amp; Francis Group.
</div>
<div id="ref-ismay_statistical_2020" class="csl-entry">
Ismay, C., &amp; Kim, A. Y.-S. (2020). <em>Statistical inference via data science: A <span>ModernDive</span> into <span>R</span> and the <span>Tidyverse</span></em>. CRC Press / Taylor &amp; Francis Group.
</div>
<div id="ref-oliveira_ciencia_2018" class="csl-entry">
Oliveira, P. F., Guerra, S., &amp; McDonnell, R. (2018). <em>Ciência de <span>Dados</span> com <span>R</span> - <span>Introdução</span></em>.
</div>
<div id="ref-vancine2018" class="csl-entry">
Vancine, M. H., Duarte, K. S., de Souza, Y. S., Giovanelli, J. G. R., Martins-Sobrinho, P. M., López, A., Bovo, R. P., Maffei, F., Lion, M. B. i., Ribeiro Júnior, J. W., Brassaloti, R., da Costa, C. O. R., Sawakuchi, H. O., Forti, L. R., Cacciali, P., Bertoluci, J., Haddad, C. F. B., &amp; Ribeiro, M. C. (2018). <span class="nocase">ATLANTIC AMPHIBIANS: a data set of amphibian communities from the Atlantic Forests of South America</span>. <em>Ecology</em>, <em>99</em>(7), 1692–1692. <a href="https://doi.org/10.1002/ecy.2392">https://doi.org/10.1002/ecy.2392</a>
</div>
<div id="ref-wickham2014" class="csl-entry">
Wickham, H. (2014). <span>Tidy Data</span>. <em>Journal of Statistical Software</em>, <em>59</em>(10). <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>
</div>
<div id="ref-wickham2016" class="csl-entry">
Wickham, H. (2016). <em><span class="nocase">ggplot2: Elegant graphics for data analysis</span></em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>
</div>
<div id="ref-tidyverse2019" class="csl-entry">
Wickham, H., Averick, M., Bryan, J., Chang, W., McGowan, L., François, R., Grolemund, G., Hayes, A., Henry, L., Hester, J., Kuhn, M., Pedersen, T., Miller, E., Bache, S., Müller, K., Ooms, J., Robinson, D., Seidel, D., Spinu, V., … Yutani, H. (2019). <span class="nocase">Welcome to the Tidyverse</span>. <em>Journal of Open Source Software</em>, <em>4</em>(43), 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>
</div>
<div id="ref-wickham2017" class="csl-entry">
Wickham, H., &amp; Grolemund, G. (2017). <em><span class="nocase">R for data science: import, tidy, transform, visualize, and model data</span></em> (First edit). O’Reilly.
</div>
<div id="ref-wilkinson2005" class="csl-entry">
Wilkinson, L., &amp; Wills, G. (2005). <em><span class="nocase">The grammar of graphics</span></em> (2nd ed). Springer.
</div>
<div id="ref-williams_essentials_2018" class="csl-entry">
Williams, G. J. (2018). <em>The essentials of data science: Knowledge discovery using <span>R</span></em>. Taylor &amp; Francis, CRC Press.
</div>
<div id="ref-zumel_practical_2014" class="csl-entry">
Zumel, N., &amp; Mount, J. (2014). <em>Practical data science with <span>R</span></em>. Manning Publications Co.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cap4.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cap6.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/paternogbc/livro_aer/edit/master/05_tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/paternogbc/livro_aer/blob/master/05_tidyverse.Rmd",
"text": null
},
"download": ["livro.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
